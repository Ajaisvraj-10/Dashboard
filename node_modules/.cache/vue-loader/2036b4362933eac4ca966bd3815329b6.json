{"remainingRequest":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\reports.vue?vue&type=style&index=0&id=38d7dae3&scoped=true&lang=css&","dependencies":[{"path":"E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\reports.vue","mtime":1655457830650},{"path":"E:\\vue_projects\\biowin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgJ3N0eWxlcy9zdHlsZS5jc3MnOwouc3RhdHVzOmhvdmVyewogIGZvbnQtc2l6ZToxNXB4Cn0KI2ZpbHRlci10eXBlLm1vZGFsLnNob3cgLm1vZGFsLWRpYWxvZ3sKICBtaW4td2lkdGg6IDUwMHB4IWltcG9ydGFudDsKfQoK"},{"version":3,"sources":["reports.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2aA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reports.vue","sourceRoot":"src/views/app/oodo","sourcesContent":["<template>\r\n  <div class=\"main-content main-content2\">\r\n    <div>\r\n       <div class=\"d-flex mb-2 align-items-center justify-content-between\">\r\n            <slot name=\"header\">\r\n              <div>\r\n               <h5 class=\"mb-0\">Reports</h5>\r\n              </div>\r\n            </slot>\r\n        </div>\r\n        <div class=\"border-top\"></div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12 p-1 main-scroll\">\r\n        <b-card class=\"\" v-if=\"filter1=='Farmers'\">\r\n          <div class=\"text-center py-4\">\r\n             <div class=\"row\">\r\n                <div class=\"col-md-3 pr-1\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4><small>Total </small> Farmers</h4>\r\n                    <h1>{{report.total_farmers}}</h1>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-9 pl-1\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4><small>Farmers </small> Status</h4>\r\n                    <div class=\"w-100 d-flex\">\r\n                      <div class=\"p-2 text-white status\" v-for=\"(status,key) in report.membership_statuses\" :style=\"'background-color:'+status.color+';width:'+((status.value/100)*report.total_farmers)+'%;min-width:7%'\">\r\n                        {{status.name}}\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"w-100 d-flex\">\r\n                      <div class=\"px-2 text-center status\" v-for=\"(status,key) in report.membership_statuses\" :style=\"'color:'+status.color+';width:'+((status.value/100)*report.total_farmers)+'%;min-width:7%'\">\r\n                        {{status.value}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-4 pr-1 mt-4\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4>Farmers Gender</h4>\r\n                    <div class=\"chart-wrapper\" style=\"height: 351px\">\r\n                      <v-chart :options=\"echartPie\" :autoresize=\"true\"></v-chart>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-4 px-1 mt-4\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4>Farmers Status</h4>\r\n                    <div class=\"chart-wrapper\" style=\"height: 351px\">\r\n                      <v-chart :options=\"basicDoughnut\" :autoresize=\"true\"></v-chart>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-4 pl-1 mt-4\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4>Farmers Religion</h4>\r\n                    <div class=\"chart-wrapper\" style=\"height: 351px\">\r\n                      <v-chart :options=\"stackedPie\" :autoresize=\"true\"></v-chart>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n             </div>\r\n             <div class=\"mt-4 text-center\">\r\n              <h2 class=\"text-center\">Lands <small>(2021)</small></h2>\r\n             </div>\r\n             <div class=\"row\">\r\n                <div class=\"col-md-3 pr-1\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4><small>Total </small> Farming Area</h4>\r\n                    <h1 class=\"\">{{report.total_farming_areas.toFixed(2)}}<small class=\"\">/Hectre</small></h1>\r\n                  </div>\r\n                  <div class=\"card p-3 mx-0 mt-4 text-left\">\r\n                    <h4><small>Total </small> VFC</h4>\r\n                    <h1>{{report.total_vfc}}</h1>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-9 pl-1\">\r\n                  <div class=\"card p-3 m-0 text-left\">\r\n                    <h4><small>Total </small> Farming Lands</h4>\r\n                    <div class=\"w-100 d-flex\">\r\n                      <div class=\"p-2 text-white status\" v-for=\"farming_area in report.farming_areas\" :style=\"'background-color:'+farming_area.color+';width:'+((farming_area.value/100)*report.total_farming_areas)+'%;min-width:10%'\">\r\n                        {{farming_area.name}}\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"w-100 d-flex rounded\">\r\n                      <b class=\"px-2 text-center status\" v-for=\"farming_area in report.farming_areas\" :style=\"'color:'+farming_area.color+';width:'+((farming_area.value/100)*report.total_farming_areas)+'%;min-width:10%'\">\r\n                        {{farming_area.value.toFixed(2)}}<small>/Hectre</small>\r\n                      </b>\r\n                    </div>\r\n                  </div>\r\n              <!--     <div class=\"card p-3 mx-0 mt-4 text-left\">\r\n                    <h4><small>Total </small> Lands</h4>\r\n                    <div class=\"chart-wrapper\" style=\"height: 351px\">\r\n                      <v-chart :options=\"echartBar\" :autoresize=\"true\"></v-chart>\r\n                    </div>\r\n                  </div> -->\r\n                </div>\r\n             </div>\r\n          </div>\r\n        </b-card>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      \r\n      <b-modal id=\"filter-type\" hide-header  hide-footer>\r\n        <div>\r\n           <div class=\"d-flex mb-2 align-items-center  justify-content-between\">\r\n              <slot name=\"header\">\r\n                 <h5 class=\"mb-0\"><span class=\"text-success\">Filter</span> /{{filter1}}</h5>\r\n              </slot>\r\n              <div class=\"d-flex\">\r\n                <b-button variant=\"success\" type=\"button\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"not_start=true;generateReport()\">\r\n                  Generate Report\r\n                </b-button>\r\n                <b-button type=\"button\" variant=\"danger\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"$bvModal.hide('filter-type')\">Close</b-button>\r\n              </div>\r\n            </div>\r\n            <div class=\" my-3 border-top\"></div>\r\n        </div>\r\n        <b-row class=\"main-scroll\">\r\n          <b-col lg=\"12\" xl=\"12\" class=\"\">\r\n            <form ref=\"dataForm\" @submit.prevent=\"generateReport()\">\r\n              <b-card header-bg-variant=\"transparent\" class=\"mt-2\">\r\n                <div class=\"user-info pt-2\">\r\n                  <div>\r\n                    <div class=\"row\" v-if=\"filter1=='Product'\">\r\n                      <div class=\"col-md-6 border-right\">\r\n                        <label>Select products</label>\r\n                        <div class=\"o_thread_search_input\" v-for=\"product in products\">\r\n                          <label style=\"width:300px;\" :for=\"'product'+product.id\"> {{product.name}}/{{product.product_type_detail.name}}: </label>\r\n                          <input type=\"checkbox\" name=\"\" :id=\"'product'+product.id\">\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-md-6\">\r\n                        <label>Filter by</label>\r\n                        <b-form-group class=\"work_type_option\">\r\n                          <b-form-radio-group\r\n                            id=\"filter2\"\r\n                            v-model=\"filter2\"\r\n                            :options=\"['Location','FPO']\"\r\n                            button-variant=\"outline-primary\"\r\n                            name=\"filter2\"\r\n                            buttons\r\n                            style=\"font-size:20px\"\r\n                            @change=\"setFilter2()\"\r\n                          ></b-form-radio-group>\r\n                        </b-form-group>\r\n                        <div v-if=\"load_locations\">\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\"> FPO: </span>\r\n                            <select class=\"ui-autocomplete-input w-100 mx-1\" v-model=\"fpo_id\" name=\"fpo\">\r\n                                <option v-for=\"type in types\" :value=\"type.id\">{{type.name}}</option>\r\n                            </select>\r\n                          </div>\r\n                          <LocationFields :id=\"location_id\" location_limit=\"7\"></LocationFields>\r\n                        </div>\r\n                        <div v-else>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> FPO: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" v-model=\"fpo_id\" name=\"fpo\">\r\n                                  <option v-for=\"type in types\" :value=\"type.id\">{{type.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                           <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> ICS: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"ics\" v-model=\"ics_id\">\r\n                                  <option v-for=\"ics in all_ics\" :value=\"ics.id\" v-if=\"ics.type==fpo_id\">{{ics.name}}</option>\r\n                              </select>\r\n                           </div>\r\n                           <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> VFC: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"vfc\" v-model=\"vfc_id\">\r\n                                  <option v-for=\"vfc in all_vfc\" :value=\"vfc.id\" v-if=\"vfc.ics.includes(ics_id)\">{{vfc.name}}</option>\r\n                              </select>\r\n                           </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div v-else>\r\n                      <label>Filter by</label>\r\n                      <b-form-group class=\"work_type_option\">\r\n                        <b-form-radio-group\r\n                          id=\"filter2\"\r\n                          v-model=\"filter2\"\r\n                          :options=\"['Location','FPO']\"\r\n                          button-variant=\"outline-primary\"\r\n                          name=\"filter2\"\r\n                          buttons\r\n                          style=\"font-size:20px\"\r\n                          @change=\"setFilter2()\"\r\n                        ></b-form-radio-group>\r\n                      </b-form-group>\r\n                      <div v-if=\"load_locations\">\r\n                        <div class=\"o_thread_search_input\">\r\n                          <span style=\"width:120px;\"> FPO: </span>\r\n                          <select class=\"ui-autocomplete-input w-100 mx-1\" v-model=\"fpo_id\" name=\"fpo\">\r\n                              <option v-for=\"type in types\" :value=\"type.id\">{{type.name}}</option>\r\n                          </select>\r\n                        </div>\r\n                        <LocationFields :id=\"location_id\" location_limit=\"7\"></LocationFields>\r\n                      </div>\r\n                      <div v-else>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\"> FPO: </span>\r\n                            <select class=\"ui-autocomplete-input w-100 mx-1\" v-model=\"fpo_id\" name=\"fpo\">\r\n                                <option v-for=\"type in types\" :value=\"type.id\">{{type.name}}</option>\r\n                            </select>\r\n                          </div>\r\n                         <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\"> ICS: </span>\r\n                            <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"ics\" v-model=\"ics_id\">\r\n                                <option v-for=\"ics in all_ics\" :value=\"ics.id\" v-if=\"ics.type==fpo_id\">{{ics.name}}</option>\r\n                            </select>\r\n                         </div>\r\n                         <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\"> VFC: </span>\r\n                            <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"vfc\" v-model=\"vfc_id\">\r\n                                <option v-for=\"vfc in all_vfc\" :value=\"vfc.id\" v-if=\"vfc.ics.includes(ics_id)\">{{vfc.name}}</option>\r\n                            </select>\r\n                         </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </b-card>\r\n            </form>\r\n          </b-col>\r\n        </b-row>\r\n      </b-modal>\r\n    </div>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport Fields from '@/data/Fields'\r\nimport contacts from '@/data/list_grid'\r\nimport {echartPie,echartBar,basicLine,multiLine,basicBar,multipleBar,multipleBar2,zoomBar,basicDoughnut,gaugeStart,basicArea,stackedArea,stackedPointerArea,solidArea,basicPie,stackedPie,bubbleChart} from \"@/data/echarts\";\r\nimport LocationFields from '/src/views/app/oodo/components/location_fields'\r\n\r\nexport default {\r\n  metaInfo: {\r\n    title: \"States\"\r\n  },\r\n  components:{\r\n    LocationFields\r\n  },\r\n  data() {\r\n    return {\r\n      echartPie,\r\n      echartBar,\r\n      basicLine,\r\n      multiLine,\r\n      basicBar,\r\n      multipleBar,\r\n      multipleBar2,\r\n      zoomBar,\r\n      basicDoughnut,\r\n      gaugeStart,\r\n      basicArea,\r\n      stackedArea,\r\n      stackedPointerArea,\r\n      solidArea,\r\n      basicPie,\r\n      stackedPie,\r\n      bubbleChart,\r\n      filter1:'Farmers',\r\n      filter2:'Location',\r\n      load_locations:true,\r\n      location_id:null,\r\n      all_ics:[],\r\n      ics_id:null,\r\n      types:[],\r\n      fpo_id:null,\r\n      all_vfc:[],\r\n      vfc_id:null,\r\n      products:[],\r\n      product_id:null,\r\n      report:{\r\n        total_farmers:0,\r\n        membership_statuses:[{'name':'NEW','value':0,'color':'#0095ff'},{'name':'IC1','value':0,'color':'#0074c7'},{'name':'IC2','value':0,'color':'#0064ab'},{'name':'IC3','value':0,'color':'#004a80'},{'name':'ORG','value':0,'color':'#00b50c'}],\r\n        genders:[{'name':'Male','short_name':'M','value':4,'color':'#2d21b5'},{'name':'Female','short_name':'F','value':3,'color':'#f500cc'}],\r\n        religions:[{'name':'HINDU','value':0,'color':'#ff6f00'},{'name':'CHRISTIAN','value':0,'color':'#636363'},{'name':'MUSLIM','value':0,'color':'#00ba0c'}],\r\n        total_farming_areas:0,\r\n        farming_areas:[{'name':'Organic Area','value':0,'color':'#ff6f00'},{'name':'Conventional Land Area','value':0,'color':'#636363'},{'name':'Wet Land','value':0,'color':'#00ba0c'},{'name':'Other Land','value':0,'color':'#00ba0c'}],\r\n        total_vfc:0,\r\n      },\r\n      not_start:false,\r\n    };\r\n  },\r\n  mounted(){\r\n    this.$root.current_section = 'reports'\r\n    this.getTypes()\r\n    this.getIcs()\r\n    this.getVfc()\r\n    this.getProducts()\r\n    if(this.$route.query.filter){\r\n      this.setFilter1(this.$route.query.filter)\r\n    }\r\n    this.generateReport()\r\n    console.log(echartBar)\r\n  },\r\n  watch: {\r\n    '$route': 'changeParam'\r\n  },\r\n  methods: {\r\n    changeParam(){\r\n      if(this.$route.query.filter){\r\n        this.setFilter1(this.$route.query.filter)\r\n      }\r\n    },\r\n    setFilter1(filter){\r\n      this.filter1 = filter\r\n      this.$router.push('/app/reports')\r\n      this.$bvModal.show('filter-type')\r\n    },\r\n    setFilter2(){\r\n      if(this.filter2=='Location'){\r\n        this.load_locations = false\r\n      }else{\r\n        this.load_locations = true\r\n      }\r\n    },\r\n    setStackedPie(){\r\n      // this.stackedPie.color = [this.report.genders[0].color,this.report.genders[1].color]\r\n      this.stackedPie.series[0].data = this.report.religions\r\n      this.stackedPie.series[0].name = 'Religion'\r\n      // this.stackedPie.visualMap = {inRange:{colorLightness:[0,1]},max:60000,min:0,show:false}\r\n    },\r\n    setBasicDoughnut(){\r\n      this.basicDoughnut.color = []\r\n      self = this\r\n      this.report.membership_statuses.forEach(function(color){\r\n        self.basicDoughnut.color.push(color.color)\r\n      })\r\n      this.basicDoughnut.series[0].data = this.report.membership_statuses\r\n    },\r\n    setEchartPie(){\r\n      this.echartPie.color = [this.report.genders[0].color,this.report.genders[1].color]\r\n      this.echartPie.series[0].data = this.report.genders\r\n      this.echartPie.series[0].name = 'Gender'\r\n    },\r\n    generateReport() {\r\n      var formdata = new FormData(this.$refs['dataForm'])\r\n      formdata.append('filter1',this.filter1)\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/generate_report/', {\r\n          method : 'post',\r\n          body : formdata,\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.report = jsonData\r\n        this.setEchartPie()\r\n        this.setBasicDoughnut()\r\n        this.setStackedPie()\r\n        if(this.not_start){\r\n          this.$bvModal.hide('filter-type')\r\n          this.showAlert('Report generated succesfully!')\r\n        }\r\n      })\r\n    },\r\n    getTypes() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/types/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.types = jsonData\r\n      })\r\n    },\r\n    getProducts() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/products/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.products = jsonData\r\n      })\r\n    },\r\n    getIcs() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/ics/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.all_ics = jsonData\r\n      })\r\n    },\r\n    getVfc() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/vfc/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.all_vfc = jsonData\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n  @import 'styles/style.css';\r\n  .status:hover{\r\n    font-size:15px\r\n  }\r\n  #filter-type.modal.show .modal-dialog{\r\n    min-width: 500px!important;\r\n  }\r\n\r\n</style>"]}]}