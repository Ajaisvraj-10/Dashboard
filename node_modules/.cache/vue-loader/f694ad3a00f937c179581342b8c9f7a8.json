{"remainingRequest":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\production\\process\\processing-packing.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\production\\process\\processing-packing.vue","mtime":1676396277717},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHJvZHVjdEZpZWxkcyBmcm9tICcvc3JjL3ZpZXdzL2FwcC9vb2RvL2NvbXBvbmVudHMvcHJvZHVjdF9maWVsZHMnDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiBbJ3Byb2Nlc3NfZGV0YWlsX2lkJywnc3RhcnRfcHJvY2Vzc19pZCcsJ3Byb2Nlc3NpbmdfaWQnLCdhY3Rpb24nLCdpc192aWV3J10sDQogIGNvbXBvbmVudHM6ew0KICAgIFByb2R1Y3RGaWVsZHMNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybV9kYXRhOnsNCiAgICAgICAgaWQ6bnVsbCwNCiAgICAgICAgZGF0ZTpudWxsLA0KICAgICAgICBwcm9kdWN0Om51bGwsDQogICAgICAgIHN0YXR1czonRHJhZnQnLA0KICAgICAgICBzaGlmdDonREFZJywNCiAgICAgICAgd29ya2VyczpbXSwNCiAgICAgICAgd2FnZV93b3JrZXJzOltdLA0KICAgICAgICB3b3JrX3R5cGU6J3dhZ2VzJywNCiAgICAgICAgb3ZlcnRpbWVfaG91cnNlX3N0MToyLA0KICAgICAgICBtYWNoaW5lczpbXSwNCiAgICAgICAgc3RhcnRfcHJvY2Vzc19kZXRhaWw6e3Byb2Nlc3NfcHJvZHVjdHNfbGlzdDpbXSxtYWluX3Byb2Nlc3NfZGV0YWlsOnt9LGZpcmV3b29kX2RldGFpbHM6e30sZHJ5ZXJfZGV0YWlsczp7fSwgYXR0cmlidXQ6bnVsbCwgYXR0cmlidXRlX2RldGFpbDp7fX0sDQogICAgICAgIG90aGVyX2xvdHM6W10sDQogICAgICAgIGxvdDpudWxsLA0KICAgICAgICBpc19vcmdhbmljOmZhbHNlLA0KICAgICAgICBwcm9jZXNzX291dHB1dHM6W10sDQogICAgICAgIGJhcnJlbF9zdG9ja3M6W10sDQogICAgICAgIG5leHRfcHJvY2VzczpudWxsLA0KICAgICAgICBjb25zdW1hYmxlX2l0ZW1zX2xpc3Q6W10sDQogICAgICAgIHVubG9hZGluZzp7DQogICAgICAgICAgd29ya2VyczpbXSwNCiAgICAgICAgICB3YWdlX3dvcmtlcnM6W10sDQogICAgICAgICAgd29ya190eXBlOid3YWdlcycsDQogICAgICAgICAgb3ZlcnRpbWVfaG91cnNlX3N0MToyLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIHByb2Nlc3NfZGV0YWlsOntvdXRwdXRzOltdLGNvbnN1bWFibGVfaXRlbXNfbGlzdDpbXSxpbnB1dHM6W119LA0KICAgICAgcGFja2luZ19tYXRlcmlhbHM6W10sDQogICAgICBpbmRlbnRfcGFja2luZ3M6W10sDQogICAgICBiYXJyZWxfaWQ6bnVsbCwNCiAgICAgIGlkOm51bGwsDQogICAgICBwcm9kdWN0X25hbWUgOiAnJywNCiAgICAgIHRvdGFsX3dlaWdodDowLA0KICAgICAgdG90YWxfb3V0cHV0OjAsDQogICAgICB3b3JrZXJzOltdLA0KICAgICAgbmV4dF9wcm9jZXNzZXM6W10sDQogICAgICBzdG9ja19wYXJhbWV0ZXJzOltdLA0KICAgICAgaXNfc3RhcnQ6ZmFsc2UsDQogICAgICBmaWx0ZXJfbWF0ZXJpYWw6e3NwZWNpZmljYXRpb25zOltdfSwNCiAgICAgIG1hdGVyaWFsczpbXSwNCiAgICAgIHNwZWNpZmljYXRpb25zOltdLA0KICAgICAgYm9pbGVyczpbXSwNCiAgICAgIHBhY2tpbmdfbm90ZTonJywNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZm9ybV9kYXRhLmRhdGUgPSB0aGlzLmN1cnJlbnREYXRlKCkNCiAgICBpZih0aGlzLnByb2Nlc3NpbmdfaWQpew0KICAgICAgdGhpcy5nZXRQcm9jZXNzKCkNCiAgICB9ZWxzZXsNCiAgICAgIHRoaXMuZ2V0UHJvY2Vzc0RldGFpbHMoKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFByb2Nlc3MoKSB7DQogICAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7DQogICAgICBoZWFkZXJzLmFwcGVuZCgiQXV0aG9yaXphdGlvbiIsICJUb2tlbiAiK3RoaXMuJHJvb3QudG9rZW4pOw0KICAgICAgZmV0Y2godGhpcy5hcGlfdXJsKycvcHJvZHVjdGlvbi9wcm9jZXNzaW5nLycrdGhpcy5wcm9jZXNzaW5nX2lkKycvJywgew0KICAgICAgICAgIG1ldGhvZCA6ICdnZXQnLA0KICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLmZvcm1fZGF0YSA9IGpzb25EYXRhDQogICAgICAgIHRoaXMuZ2V0UGFja2luZ01hdGVyaWFscygpDQogICAgICAgIGlmKHRoaXMuYWN0aW9uPT0naW5kZW50X3BhY2tpbmcnKXsNCiAgICAgICAgICB0aGlzLmdldEluZGVudHMoKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZ2V0UHJvY2Vzc0RldGFpbHMoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldFByb2Nlc3NEZXRhaWxzKCkgew0KICAgICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpOw0KICAgICAgaGVhZGVycy5hcHBlbmQoIkF1dGhvcml6YXRpb24iLCAiVG9rZW4gIit0aGlzLiRyb290LnRva2VuKTsNCiAgICAgIGZldGNoKHRoaXMuYXBpX3VybCsnL3Byb2R1Y3Rpb24vcHJvY2Vzc19kZXRhaWxzLycrdGhpcy5wcm9jZXNzX2RldGFpbF9pZCsnLycsIHsNCiAgICAgICAgICBtZXRob2QgOiAnZ2V0JywNCiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLA0KICAgICAgfSkNCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgIH0pDQogICAgICAudGhlbigoanNvbkRhdGEpID0+IHsNCiAgICAgICAgdGhpcy5wcm9jZXNzX2RldGFpbCA9IGpzb25EYXRhDQogICAgICAgIHRoaXMuZm9ybV9kYXRhLm1hY2hpbmVzID0ganNvbkRhdGEubWFjaGluZXMNCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzDQogICAgICAgIGlmKCF0aGlzLmZvcm1fZGF0YS5jb250cmFjdF9sYWJvdXJfY2hhcmdlKXsNCiAgICAgICAgICB0aGlzLmZvcm1fZGF0YS5jb250cmFjdF9sYWJvdXJfY2hhcmdlID0ganNvbkRhdGEucHJvZHVjdGlvbl9wcm9jZXNzX2RldGFpbC5sYWJvdXJfY2hhcmdlDQogICAgICAgIH0NCiAgICAgICAgaWYodGhpcy5mb3JtX2RhdGEucHJvY2Vzc19vdXRwdXRzLmxlbmd0aDw9MCl7DQogICAgICAgICAgdGhpcy5nZXRQYXJhbWV0ZXJzKCkNCiAgICAgICAgfQ0KICAgICAgICAvLyBpZih0aGlzLmZvcm1fZGF0YS5wcm9jZXNzX291dHB1dHMubGVuZ3RoPjAgJiYgdGhpcy5mb3JtX2RhdGEuZGlyZWN0X3BhY2tpbmdfaWRzLmxlbmd0aDw9MCAmJiB0aGlzLmFjdGlvbj09J2RpcmVjdF9wYWNraW5nJyl7DQogICAgICAgIC8vICAgdmFyIHNlbGYgPSB0aGlzDQogICAgICAgIC8vICAgdGhpcy5mb3JtX2RhdGEucHJvY2Vzc19vdXRwdXRzLmZvckVhY2goZnVuY3Rpb24odmFsLGtleSl7DQogICAgICAgIC8vICAgICBzZWxmLnBhY2tpbmdfbWF0ZXJpYWxzLnB1c2guYXBwbHkoc2VsZi5wYWNraW5nX21hdGVyaWFscyxzZWxmLmZvcm1fZGF0YS5wcm9jZXNzX291dHB1dHNba2V5XS5wYWNraW5nX21hdGVyaWFscykNCiAgICAgICAgLy8gICAgIHNlbGYuZm9ybV9kYXRhLnByb2Nlc3Nfb3V0cHV0c1trZXldLnBhY2tpbmdfbWF0ZXJpYWxzID0gc2VsZi5wYWNraW5nX21hdGVyaWFscw0KICAgICAgICAvLyAgIH0pDQogICAgICAgIC8vICAgdGhpcy5zZXRQYWNraW5nTWF0ZXJpYWxGaWx0ZXIoKQ0KICAgICAgICAvLyB9DQogICAgICAgIGlmKHRoaXMuZm9ybV9kYXRhLmNvbnN1bWFibGVfaXRlbXNfbGlzdC5sZW5ndGg8PTApew0KICAgICAgICAgIHRoaXMuZm9ybV9kYXRhLmNvbnN1bWFibGVfaXRlbXNfbGlzdCA9IGpzb25EYXRhLmNvbnN1bWFibGVfaXRlbXNfbGlzdA0KICAgICAgICB9DQogICAgICAgIGlmKGpzb25EYXRhLmhhdmVfYmFycmVsICYmIHRoaXMuZm9ybV9kYXRhLmJhcnJlbF9zdG9ja3MubGVuZ3RoPD0wKXsNCiAgICAgICAgICB0aGlzLmdldEJhcnJlbHMoKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZ2V0U3RhcnRQcm9jZXNzKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRTdGFydFByb2Nlc3MoKSB7DQogICAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7DQogICAgICBoZWFkZXJzLmFwcGVuZCgiQXV0aG9yaXphdGlvbiIsICJUb2tlbiAiK3RoaXMuJHJvb3QudG9rZW4pOw0KICAgICAgZmV0Y2godGhpcy5hcGlfdXJsKycvcHJvZHVjdGlvbi9zdGFydF9wcm9jZXNzLycrdGhpcy5zdGFydF9wcm9jZXNzX2lkKycvJywgew0KICAgICAgICAgIG1ldGhvZCA6ICdnZXQnLA0KICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLmZvcm1fZGF0YS5zdGFydF9wcm9jZXNzX2RldGFpbCA9IGpzb25EYXRhDQogICAgICAgIHZhciBsYXN0X3Byb2Nlc3NfaWQgPSBudWxsIA0KICAgICAgICBqc29uRGF0YS5wcm9jZXNzZXMuZm9yRWFjaChmdW5jdGlvbih2YWwsa2V5KXsNCiAgICAgICAgICBsYXN0X3Byb2Nlc3NfaWQgPSB2YWwuaWQNCiAgICAgICAgfSkNCiAgICAgICAgdmFyIGxvdHMgPSBbXTsNCiAgICAgICAgdmFyIGxvdCA9IG51bGw7DQogICAgICAgIHZhciB0b3RhbCA9IDA7DQogICAgICAgIHZhciBpc19vcmdhbmljID0gdHJ1ZQ0KICAgICAgICBqc29uRGF0YS5wcm9jZXNzX3Byb2R1Y3RzLmZvckVhY2goZnVuY3Rpb24odmFsLGtleSl7DQogICAgICAgICAgaWYoIXZhbC5pc19vcmdhbmljKXsNCiAgICAgICAgICAgIGlzX29yZ2FuaWMgPSBmYWxzZQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihrZXk9PTApbG90PXZhbC5sb3QNCiAgICAgICAgICBsb3RzLnB1c2godmFsLmxvdCkNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy50b3RhbF93ZWlnaHQgPSBqc29uRGF0YS50b3RhbF93ZWlnaHQNCiAgICAgICAgdGhpcy5mb3JtX2RhdGEubG90ID0gbG90DQogICAgICAgIHRoaXMuZm9ybV9kYXRhLm90aGVyX2xvdHMgPSBsb3RzDQogICAgICAgIHRoaXMuZm9ybV9kYXRhLmlzX29yZ2FuaWMgPSBpc19vcmdhbmljDQogICAgICAgIGlmKHRoaXMuZm9ybV9kYXRhLnByb2Nlc3Nfb3V0cHV0cy5sZW5ndGg+MCl7DQogICAgICAgICAgdGhpcy5jYWxjdWxhdGVRdHkoKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuaXNfc3RhcnQgPSB0cnVlDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0QmFycmVscygpIHsNCiAgICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsNCiAgICAgIGhlYWRlcnMuYXBwZW5kKCJBdXRob3JpemF0aW9uIiwgIlRva2VuICIrdGhpcy4kcm9vdC50b2tlbik7DQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9wcm9kdWN0L2JhcnJlbC8/cHJvZHVjdD0nK3RoaXMuZm9ybV9kYXRhLnByb2R1Y3QsIHsNCiAgICAgICAgICBtZXRob2QgOiAnZ2V0JywNCiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLA0KICAgICAgfSkNCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgIH0pDQogICAgICAudGhlbigoanNvbkRhdGEpID0+IHsNCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzDQogICAgICAgIGpzb25EYXRhLmZvckVhY2goZnVuY3Rpb24odmFsLGtleSl7DQogICAgICAgICAganNvbkRhdGFba2V5XVsncXVhbnRpdHknXSA9IDANCiAgICAgICAgICBqc29uRGF0YVtrZXldWydxdWFudGl0eV9wZXJzZW50YWdlJ10gPSAwDQogICAgICAgICAganNvbkRhdGFba2V5XVsnY29uc3VtYWJsZV9pdGVtc19saXN0J10gPSBzZWxmLmZvcm1fZGF0YS5jb25zdW1hYmxlX2l0ZW1zX2xpc3QNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5mb3JtX2RhdGEuYmFycmVsX3N0b2NrcyA9IGpzb25EYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0UGFyYW1ldGVycygpIHsNCiAgICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsNCiAgICAgIGhlYWRlcnMuYXBwZW5kKCJBdXRob3JpemF0aW9uIiwgIlRva2VuICIrdGhpcy4kcm9vdC50b2tlbik7DQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9wcm9kdWN0L3BhcmFtZXRlcnMvP291dHB1dHM9Jyt0aGlzLnByb2Nlc3NfZGV0YWlsLm91dHB1dHMrJyZzdGFydF9wcm9jZXNzPScrdGhpcy5zdGFydF9wcm9jZXNzX2lkLCB7DQogICAgICAgICAgbWV0aG9kIDogJ2dldCcsDQogICAgICAgICAgaGVhZGVyczogaGVhZGVycywNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICB9KQ0KICAgICAgLnRoZW4oKGpzb25EYXRhKSA9PiB7DQogICAgICAgIGpzb25EYXRhLmZvckVhY2goZnVuY3Rpb24odmFsLGtleSl7DQogICAgICAgICAganNvbkRhdGFba2V5XS5wYXJhbWV0ZXIgPSB2YWwuaWQNCiAgICAgICAgICBqc29uRGF0YVtrZXldLnBhcmFtZXRlcl9kZXRhaWwgPSB2YWwNCiAgICAgICAgICBqc29uRGF0YVtrZXldLnF1YW50aXR5ID0gMA0KICAgICAgICAgIGpzb25EYXRhW2tleV0ucXVhbnRpdHlfcGVyc2VudGFnZSA9ICcwJScNCiAgICAgICAgICBqc29uRGF0YVtrZXldWydkaXJlY3RfcGFja2luZ19pZHMnXSA9IFtdDQogICAgICAgICAganNvbkRhdGFba2V5XVsnaW5kZW50X3BhY2tpbmdfaWRzJ10gPSBbXQ0KICAgICAgICAgIGpzb25EYXRhW2tleV1bJ3BhY2tpbmdfaWRzJ10gPSBbXQ0KICAgICAgICAgIGpzb25EYXRhW2tleV1bJ3BhY2tpbmdfbWF0ZXJpYWxzJ10gPSBbXQ0KICAgICAgICAgIGpzb25EYXRhW2tleV1bJ2luZGVudF9pZHMnXSA9IFtdDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZm9ybV9kYXRhLnByb2Nlc3Nfb3V0cHV0cyA9IGpzb25EYXRhDQogICAgICAgIHRoaXMuc2V0UGFja2luZ01hdGVyaWFsRmlsdGVyKCkNCiAgICAgICAgdGhpcy5jYWxjdWxhdGVRdHkoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNhbGN1bGF0ZVF0eSgpew0KICAgICAgdmFyIHNlbGY9dGhpczsNCiAgICAgIHZhciB0b3RhbCA9IDA7DQogICAgICB0aGlzLmZvcm1fZGF0YS5wcm9jZXNzX291dHB1dHMuZm9yRWFjaChmdW5jdGlvbih2YWwsa2V5KXsNCiAgICAgICAgaWYodmFsLnBhcmFtZXRlcl90eXBlPT0nc2VtaV9maW5pc2hlZF9wcm9kdWN0JyB8fCB2YWwucGFyYW1ldGVyX3R5cGU9PSdmdWxsX2ZpbmlzaGVkX3Byb2R1Y3QnIHx8IHZhbC5wYXJhbWV0ZXJfdHlwZT09J21haW5fcHJvZHVjdCcpew0KICAgICAgICAgIHRvdGFsID0gdG90YWwrcGFyc2VGbG9hdCh2YWwucXVhbnRpdHkpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLnRvdGFsX3dlaWdodCA9IHRvdGFsK3RoaXMudG90YWxfd2VpZ2h0DQogICAgICB0aGlzLnRvdGFsX291dHB1dCA9IHRvdGFsDQogICAgfSwNCiAgICBjYWxjdWxhdGlvbihwYXJhbWV0ZXIsYmFycmVsPXtpZDpudWxsfSl7DQogICAgICB2YXIgc2VsZj10aGlzOw0KICAgICAgdmFyIHRvdGFsID0gMDsNCiAgICAgIHZhciBwcm9jZXNzX291dHB1dHMgPSB0aGlzLmZvcm1fZGF0YS5wcm9jZXNzX291dHB1dHMNCiAgICAgIHRoaXMuZm9ybV9kYXRhLnByb2Nlc3Nfb3V0cHV0cyA9IFtdDQogICAgICBwcm9jZXNzX291dHB1dHMuZm9yRWFjaChmdW5jdGlvbih2YWwsa2V5KXsNCiAgICAgICAgaWYoc2VsZi5wcm9jZXNzX2RldGFpbC5oYXZlX2JhcnJlbCAmJiBiYXJyZWwuaWQpew0KICAgICAgICAgIHZhciB0b3RhbF9icl9xdHkgPSAwIA0KICAgICAgICAgIHNlbGYuZm9ybV9kYXRhLmJhcnJlbF9zdG9ja3MuZm9yRWFjaChmdW5jdGlvbihicil7DQogICAgICAgICAgICBpZihici5pZCE9YmFycmVsLmlkKXsNCiAgICAgICAgICAgICAgdG90YWxfYnJfcXR5ID0gdG90YWxfYnJfcXR5K3BhcnNlRmxvYXQoYnIucXVhbnRpdHkpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICB2YWwucXVhbnRpdHkgPSBwYXJzZUZsb2F0KGJhcnJlbC5xdWFudGl0eSkrdG90YWxfYnJfcXR5DQogICAgICAgICAgYmFycmVsLnF1YW50aXR5X3BlcnNlbnRhZ2UgPSBzZWxmLkNhbGN1bGF0ZVBlcnNlbnRhZ2UoYmFycmVsLnF1YW50aXR5LGJhcnJlbC5tYXhfcXVhbnRpdHksJ0JhcnJlbCBpcyBmdWxsJykNCiAgICAgICAgfQ0KICAgICAgICBpZih2YWwucXVhbnRpdHkpew0KICAgICAgICAgIGlmKHNlbGYudG90YWxfd2VpZ2h0IT0wKXsNCiAgICAgICAgICAgIHZhciBwZXJzZW50YWdlID0gKHZhbC5xdWFudGl0eS9zZWxmLnRvdGFsX3dlaWdodCkqMTAwDQogICAgICAgICAgICBwZXJzZW50YWdlID0gcGVyc2VudGFnZS50b0ZpeGVkKDIpDQogICAgICAgICAgICBwcm9jZXNzX291dHB1dHNba2V5XS5xdWFudGl0eV9wZXJzZW50YWdlID0gcGVyc2VudGFnZSsnJScNCiAgICAgICAgICB9DQogICAgICAgICAgaWYodmFsLnBhcmFtZXRlcl90eXBlPT0nc2VtaV9maW5pc2hlZF9wcm9kdWN0JyB8fCB2YWwucGFyYW1ldGVyX3R5cGU9PSdmdWxsX2ZpbmlzaGVkX3Byb2R1Y3QnIHx8IHZhbC5wYXJhbWV0ZXJfdHlwZT09J21haW5fcHJvZHVjdCcpew0KICAgICAgICAgICAgdG90YWwgPSB0b3RhbCtwYXJzZUZsb2F0KHZhbC5xdWFudGl0eSkNCiAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgcHJvY2Vzc19vdXRwdXRzW2tleV0ucXVhbnRpdHlfcGVyc2VudGFnZSA9ICcwJScNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuZm9ybV9kYXRhLnByb2Nlc3Nfb3V0cHV0cyA9IHByb2Nlc3Nfb3V0cHV0cw0KICAgICAgdGhpcy50b3RhbF9vdXRwdXQgPSB0b3RhbA0KICAgIH0sDQogICAgQ2FsY3VsYXRlUGVyc2VudGFnZSh2YWx1ZSx0b3RhbF93ZWlnaHQsIG1lc3NhZ2U9J091dHB1dCBpcyBvdmVyJyl7DQogICAgICBpZih2YWx1ZSl7DQogICAgICAgIGlmKHRoaXMudG90YWxfd2VpZ2h0IT0wKXsNCiAgICAgICAgICB2YXIgcGVyc2VudGFnZSA9ICh2YWx1ZS90b3RhbF93ZWlnaHQpKjEwMA0KICAgICAgICAgIHBlcnNlbnRhZ2UgPSBwZXJzZW50YWdlLnRvRml4ZWQoMikNCiAgICAgICAgICBpZihwZXJzZW50YWdlPjEwMCl7DQogICAgICAgICAgICB0aGlzLnNob3dBbGVydChtZXNzYWdlLCdyZWQnKQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gcGVyc2VudGFnZSsnJScNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICcwJScNCiAgICB9LA0KICAgIGRhdGFGb3JtKCkgew0KICAgICAgaWYodGhpcy5hY3Rpb24gPT0gJ2NvbnN1bWFibGVzJyl7DQogICAgICAgIHRoaXMuY29uc3VtYWJsZVN0b2NrQ3JlYXRlKCkNCiAgICAgIH1lbHNlIGlmKHRoaXMuYWN0aW9uID09ICdvdXRwdXQnIHx8IHRoaXMuYWN0aW9uID09ICdkaXJlY3RfcGFja2luZycgfHwgdGhpcy5hY3Rpb24gPT0gJ2luZGVudF9wYWNraW5nJ3x8IHRoaXMuYWN0aW9uID09ICdiYXJyZWwnKXsNCiAgICAgICAgdGhpcy5jcmVhdGVPdXRwdXQoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgY29uc3VtYWJsZVN0b2NrQ3JlYXRlKCkgew0KICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10pDQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ3Byb2Nlc3NfZGV0YWlsJyx0aGlzLnByb2Nlc3NfZGV0YWlsLmlkKQ0KICAgICAgZm9ybWRhdGEuYXBwZW5kKCdzdGFydF9wcm9jZXNzJyx0aGlzLnN0YXJ0X3Byb2Nlc3NfaWQpDQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ3Byb2Nlc3MnLHRoaXMuZm9ybV9kYXRhLmlkKQ0KICAgICAgaWYodGhpcy5sb2NrX2J0bil7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5sb2NrX2J0biA9IHRydWUNCiAgICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsNCiAgICAgIGhlYWRlcnMuYXBwZW5kKCJBdXRob3JpemF0aW9uIiwgIlRva2VuICIrdGhpcy4kcm9vdC50b2tlbik7DQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9wcm9kdWN0aW9uL2NvbnN1bWFibGVfc3RvY2tfY3JlYXRlLycsIHsNCiAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsDQogICAgICAgICAgYm9keSA6IGZvcm1kYXRhLA0KICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLmxvY2tfYnRuID0gZmFsc2UNCiAgICAgICAgaWYoanNvbkRhdGEuc3VjY2Vzcyl7DQogICAgICAgICAgaWYoanNvbkRhdGEub3V0X29mX3N0b2NrKXsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCdPdXQgb2Ygc3RvY2shJywncmVkJykNCiAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpDQogICAgICAgICAgICB0aGlzLnNob3dBbGVydCgnU2F2ZWQgU3VjY2Vzc2Z1bGx5IScpDQogICAgICAgICAgfQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLnNob3dBbGVydChqc29uRGF0YS5tZXNzYWdlLCdyZWQnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0SW5kZW50cygpIHsNCiAgICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsNCiAgICAgIGhlYWRlcnMuYXBwZW5kKCJBdXRob3JpemF0aW9uIiwgIlRva2VuICIrdGhpcy4kcm9vdC50b2tlbik7DQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9wcm9kdWN0L2luZGVudC8nLCB7DQogICAgICAgICAgbWV0aG9kIDogJ2dldCcsDQogICAgICAgICAgaGVhZGVyczogaGVhZGVycywNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICB9KQ0KICAgICAgLnRoZW4oKGpzb25EYXRhKSA9PiB7DQogICAgICAgIHRoaXMuaW5kZW50X3BhY2tpbmdzID0ganNvbkRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRQYWNraW5nTWF0ZXJpYWxzKCl7DQogICAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7DQogICAgICBoZWFkZXJzLmFwcGVuZCgiQXV0aG9yaXphdGlvbiIsICJUb2tlbiAiK3RoaXMuJHJvb3QudG9rZW4pOw0KICAgICAgZmV0Y2godGhpcy5hcGlfdXJsKycvcHJvZHVjdC9wYWNraW5nX21hdGVyaWFsX3N0b2NrLz93YXJlaG91c2U9Jyt0aGlzLmZvcm1fZGF0YS5zdGFydF9wcm9jZXNzX2RldGFpbC5tYWluX3Byb2Nlc3NfZGV0YWlsLndhcmVob3VzZSsnJmluX3N0b2NrPXRydWUnLCB7DQogICAgICAgICAgbWV0aG9kIDogJ2dldCcsDQogICAgICAgICAgaGVhZGVyczogaGVhZGVycywNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICB9KQ0KICAgICAgLnRoZW4oKGpzb25EYXRhKSA9PiB7DQogICAgICAgIHZhciBwYWNraW5nX3R5cGUgPSB0aGlzLmFjdGlvbg0KICAgICAgICBqc29uRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCxrZXkpew0KICAgICAgICAgIGpzb25EYXRhW2tleV0uaXNfYWRkZWQgPSBmYWxzZQ0KICAgICAgICAgIGpzb25EYXRhW2tleV0ucGFja2luZ190eXBlID0gcGFja2luZ190eXBlDQogICAgICAgICAganNvbkRhdGFba2V5XS5xdHlzID0gW3twYWNraW5nX3F1YW50aXR5OjAsIG51bWJlcl9vZl9iYWdzOjB9XQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnBhY2tpbmdfbWF0ZXJpYWxzID0ganNvbkRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICB0b3RhbFBhY2tNZXRRdHkocGFja2luZ19tYXRlcmlhbCx0eXBlPSJwaWVjZSIpew0KICAgICAgdmFyIHRvdGFsX2JhZ3M9MA0KICAgICAgdmFyIHRvdGFsPTANCiAgICAgIHBhY2tpbmdfbWF0ZXJpYWwucXR5cy5mb3JFYWNoKGZ1bmN0aW9uKHF0eSl7DQogICAgICAgIHRvdGFsX2JhZ3MgPSB0b3RhbF9iYWdzK3BhcnNlSW50KHF0eS5udW1iZXJfb2ZfYmFncykNCiAgICAgICAgdG90YWwgPSB0b3RhbCsocGFyc2VGbG9hdChxdHkucGFja2luZ19xdWFudGl0eSkqcGFyc2VJbnQocXR5Lm51bWJlcl9vZl9iYWdzKSkNCiAgICAgIH0pDQogICAgICBpZih0eXBlPT0ncGllY2UnKXsNCiAgICAgICAgcmV0dXJuIHRvdGFsX2JhZ3MNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYodHlwZT09J3dlaWdodCcpew0KICAgICAgICByZXR1cm4gdG90YWwudG9GaXhlZCgyKQ0KICAgICAgfWVsc2V7DQogICAgICAgIHJldHVybiAwDQogICAgICB9DQoNCiAgICB9LA0KICAgIHRvdGFsUGFja1F0eShwYXJhbWV0ZXIsdHlwZT0icGllY2UiKXsNCiAgICAgIHZhciB0b3RhbF9tZXRzPTANCiAgICAgIHZhciB0b3RhbF9iYWdzPTANCiAgICAgIHZhciB0b3RhbD0wDQogICAgICB2YXIgdG90YWxfcXR5PTANCiAgICAgIHZhciB1bml0ID0nJw0KICAgICAgdmFyIHNlbGY9dGhpcw0KICAgICAgcGFyYW1ldGVyLnBhY2tpbmdfbWF0ZXJpYWxzLmZvckVhY2goZnVuY3Rpb24ocGFja2luZ19tYXRlcmlhbCl7DQogICAgICAgIGlmKHBhY2tpbmdfbWF0ZXJpYWwuaXNfYWRkZWQpew0KICAgICAgICAgIHZhciB0b3RhbF9iYWdzMj0wDQogICAgICAgICAgdmFyIHRvdGFsMj0wDQogICAgICAgICAgdW5pdCA9IHBhY2tpbmdfbWF0ZXJpYWwubWF0ZXJpYWxfZGV0YWlsLnVuaXQNCiAgICAgICAgICBwYWNraW5nX21hdGVyaWFsLnF0eXMuZm9yRWFjaChmdW5jdGlvbihxdHkpew0KICAgICAgICAgICAgdG90YWxfYmFnczIgPSB0b3RhbF9iYWdzMitwYXJzZUludChxdHkubnVtYmVyX29mX2JhZ3MpDQogICAgICAgICAgICB0b3RhbDIgPSB0b3RhbDIrKHBhcnNlRmxvYXQocXR5LnBhY2tpbmdfcXVhbnRpdHkpKnBhcnNlSW50KHF0eS5udW1iZXJfb2ZfYmFncykpDQogICAgICAgICAgfSkNCiAgICAgICAgICBpZihwYWNraW5nX21hdGVyaWFsLnBhY2tpbmdfdHlwZT09c2VsZi5hY3Rpb24pew0KICAgICAgICAgICAgdG90YWxfbWV0cysrDQogICAgICAgICAgICB0b3RhbF9iYWdzID0gdG90YWxfYmFncyt0b3RhbF9iYWdzMg0KICAgICAgICAgICAgdG90YWwgPSB0b3RhbCt0b3RhbDINCiAgICAgICAgICB9DQogICAgICAgICAgdG90YWxfcXR5ID0gdG90YWxfcXR5K3RvdGFsMg0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcGFyYW1ldGVyLnF1YW50aXR5ID0gdG90YWxfcXR5DQogICAgICB2YXIgc2VsZj10aGlzOw0KICAgICAgdmFyIHRvdGFsX3F0eSA9IDA7DQogICAgICB2YXIgcHJvY2Vzc19vdXRwdXRzID0gdGhpcy5mb3JtX2RhdGEucHJvY2Vzc19vdXRwdXRzDQogICAgICBwcm9jZXNzX291dHB1dHMuZm9yRWFjaChmdW5jdGlvbih2YWwsa2V5KXsNCiAgICAgICAgaWYodmFsLnF1YW50aXR5KXsNCiAgICAgICAgICBpZihzZWxmLnRvdGFsX3dlaWdodCE9MCl7DQogICAgICAgICAgICB2YXIgcGVyc2VudGFnZSA9ICh2YWwucXVhbnRpdHkvc2VsZi50b3RhbF93ZWlnaHQpKjEwMA0KICAgICAgICAgICAgcGVyc2VudGFnZSA9IHBlcnNlbnRhZ2UudG9GaXhlZCgyKQ0KICAgICAgICAgICAgcHJvY2Vzc19vdXRwdXRzW2tleV0ucXVhbnRpdHlfcGVyc2VudGFnZSA9IHBlcnNlbnRhZ2UrJyUnDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKHZhbC5wYXJhbWV0ZXJfdHlwZT09J3NlbWlfZmluaXNoZWRfcHJvZHVjdCcgfHwgdmFsLnBhcmFtZXRlcl90eXBlPT0nZnVsbF9maW5pc2hlZF9wcm9kdWN0JyB8fCB2YWwucGFyYW1ldGVyX3R5cGU9PSdtYWluX3Byb2R1Y3QnKXsNCiAgICAgICAgICAgIHRvdGFsX3F0eSA9IHRvdGFsX3F0eStwYXJzZUZsb2F0KHZhbC5xdWFudGl0eSkNCiAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgcHJvY2Vzc19vdXRwdXRzW2tleV0ucXVhbnRpdHlfcGVyc2VudGFnZSA9ICcwJScNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMudG90YWxfb3V0cHV0ID0gdG90YWxfcXR5DQogICAgICBpZih0eXBlPT0nbWF0ZXJpYWxzJyl7DQogICAgICAgIHJldHVybiB0b3RhbF9tZXRzDQogICAgICB9DQogICAgICBlbHNlIGlmKHR5cGU9PSdwaWVjZScpew0KICAgICAgICByZXR1cm4gdG90YWxfYmFncw0KICAgICAgfQ0KICAgICAgZWxzZSBpZih0eXBlPT0nd2VpZ2h0Jyl7DQogICAgICAgIHJldHVybiB0b3RhbC50b0ZpeGVkKDIpK3VuaXQNCiAgICAgIH1lbHNlew0KICAgICAgICByZXR1cm4gMA0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0UGFja2luZ01hdGVyaWFsRmlsdGVyKCl7DQogICAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7DQogICAgICBoZWFkZXJzLmFwcGVuZCgiQXV0aG9yaXphdGlvbiIsICJUb2tlbiAiK3RoaXMuJHJvb3QudG9rZW4pOw0KICAgICAgZmV0Y2godGhpcy5hcGlfdXJsKycvcHJvZHVjdC9tYXRlcmlhbHMvJywgew0KICAgICAgICAgIG1ldGhvZCA6ICdnZXQnLA0KICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLm1hdGVyaWFscyA9IGpzb25EYXRhDQogICAgICB9KQ0KDQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9wcm9kdWN0L3NwZWNpZmljYXRpb25zLycsIHsNCiAgICAgICAgICBtZXRob2QgOiAnZ2V0JywNCiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLA0KICAgICAgfSkNCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgIH0pDQogICAgICAudGhlbigoanNvbkRhdGEpID0+IHsNCiAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucyA9IGpzb25EYXRhDQogICAgICAgIHZhciBzcGVjaWZpY2F0aW9uX3ZhbHVlcyA9IFtdOw0KICAgICAgICB0aGlzLnNwZWNpZmljYXRpb25zLmZvckVhY2goZnVuY3Rpb24odmFsLGtleSl7DQogICAgICAgICAgaWYodmFsLnNwZWNpZmljYXRpb25fZm9yPT0nUGFja2luZyBNYXRlcmlhbCcpew0KICAgICAgICAgICAgc3BlY2lmaWNhdGlvbl92YWx1ZXMucHVzaCh7aWQ6dmFsLmlkLCBuYW1lOnZhbC5uYW1lICx2YWx1ZTonJywgaXNfdmFsdWVzOnZhbC5pc192YWx1ZXMsIHZhbHVlczp2YWwudmFsdWVzLG1hdGVyaWFsX2lkczp2YWwubWF0ZXJpYWxfaWRzfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZmlsdGVyX21hdGVyaWFsID0ge21hdGVyaWFsOidhbGwnLCByZXF1ZXN0ZWRfcXVhbnRpdHk6MCwgcHJpY2U6MCxtYXhfcXVhbnRpdHk6MCxzdG9ja19xdWFudGl0eTowLCBwcmludF9pbmRlbnQ6e2lkOm51bGx9LCBzcGVjaWZpY2F0aW9uczpzcGVjaWZpY2F0aW9uX3ZhbHVlcywgbWF0ZXJpYWxfZGV0YWlsOntpZDonYWxsJyxzcGVjaWZpY2F0aW9uczpbXX19DQogICAgICB9KQ0KICAgIH0sDQogICAgY2hlY2tNZXRGaWx0ZXIocGFja2luZ19tYXRlcmlhbCl7DQogICAgICB2YXIgZmlsdGVyPWZhbHNlDQogICAgICBpZihwYWNraW5nX21hdGVyaWFsLm1hdGVyaWFsPT10aGlzLmZpbHRlcl9tYXRlcmlhbC5tYXRlcmlhbCB8fCB0aGlzLmZpbHRlcl9tYXRlcmlhbC5tYXRlcmlhbD09J2FsbCcpDQogICAgICB7DQogICAgICAgIGZpbHRlcj10cnVlDQogICAgICB9DQogICAgICBmb3IodmFyIHNrPTA7c2s8dGhpcy5maWx0ZXJfbWF0ZXJpYWwuc3BlY2lmaWNhdGlvbnMubGVuZ3RoO3NrKyspew0KICAgICAgICB2YXIgc3BlY2lmaWNhdGlvbj10aGlzLmZpbHRlcl9tYXRlcmlhbC5zcGVjaWZpY2F0aW9uc1tza10NCiAgICAgICAgaWYoc3BlY2lmaWNhdGlvbi5tYXRlcmlhbF9pZHMuaW5jbHVkZXModGhpcy5maWx0ZXJfbWF0ZXJpYWwubWF0ZXJpYWwpKXsNCiAgICAgICAgICBpZihzcGVjaWZpY2F0aW9uLnZhbHVlKXsNCiAgICAgICAgICAgIGlmKHBhY2tpbmdfbWF0ZXJpYWwuc3BlY2lmaWNhdGlvbnNbc2tdLnZhbHVlcz09bnVsbCl7DQogICAgICAgICAgICAgIGlmKChwYWNraW5nX21hdGVyaWFsLnNwZWNpZmljYXRpb25zW3NrXS52YWx1ZT09J29uJyAmJiAhc3BlY2lmaWNhdGlvbi52YWx1ZSkgfHwgcGFja2luZ19tYXRlcmlhbC5zcGVjaWZpY2F0aW9uc1tza10udmFsdWU9PSdvZmYnICYmIHNwZWNpZmljYXRpb24udmFsdWUpew0KICAgICAgICAgICAgICAgIGZpbHRlcj1mYWxzZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZSBpZihwYWNraW5nX21hdGVyaWFsLnNwZWNpZmljYXRpb25zW3NrXS52YWx1ZSE9c3BlY2lmaWNhdGlvbi52YWx1ZSl7DQogICAgICAgICAgICAgIGZpbHRlcj1mYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZmlsdGVyDQogICAgfSwNCiAgICBjcmVhdGVPdXRwdXQoKSB7DQogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEodGhpcy4kcmVmc1snZGF0YUZvcm0nXSkNCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgncHJvY2Vzc19kZXRhaWwnLHRoaXMucHJvY2Vzc19kZXRhaWwuaWQpDQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ3N0YXJ0X3Byb2Nlc3MnLHRoaXMuc3RhcnRfcHJvY2Vzc19pZCkNCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgncHJvY2VzcycsdGhpcy5mb3JtX2RhdGEuaWQpDQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ3BhY2tpbmdfdHlwZScsdGhpcy5hY3Rpb24pDQogICAgICBpZih0aGlzLmxvY2tfYnRuKXsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICB0aGlzLmxvY2tfYnRuID0gdHJ1ZQ0KICAgICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpOw0KICAgICAgaGVhZGVycy5hcHBlbmQoIkF1dGhvcml6YXRpb24iLCAiVG9rZW4gIit0aGlzLiRyb290LnRva2VuKTsNCiAgICAgIGZldGNoKHRoaXMuYXBpX3VybCsnL3Byb2R1Y3Rpb24vcHJvY2Vzc19vdXRwdXRzLycsIHsNCiAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsDQogICAgICAgICAgYm9keSA6IGZvcm1kYXRhLA0KICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLmxvY2tfYnRuID0gZmFsc2UNCiAgICAgICAgaWYoanNvbkRhdGEuc3VjY2Vzcyl7DQogICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCkNCiAgICAgICAgICB0aGlzLnNob3dBbGVydCgnU2F2ZWQgU3VjY2Vzc2Z1bGx5IScpDQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCdTb21ldGhpbmcgV3JvbmchJywncmVkJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNsb3NlUG9wdXAoKXsNCiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlUG9wdXAnLCB0cnVlKQ0KICAgIH0sDQogICAgYWRkTWF0ZXJpYWwocGFyYW1ldGVyLHBhY2tpbmdfbWF0ZXJpYWwpew0KICAgICAgcGFja2luZ19tYXRlcmlhbC5pc19hZGRlZCA9IHRydWUNCiAgICAgIHZhciBwbSA9IEpTT04uc3RyaW5naWZ5KHBhY2tpbmdfbWF0ZXJpYWwpDQogICAgICBwYXJhbWV0ZXIucGFja2luZ19tYXRlcmlhbHMucHVzaChKU09OLnBhcnNlKHBtKSkNCiAgICAgIHBhcmFtZXRlci5kaXJlY3RfcGFja2luZ19pZHMucHVzaChwYWNraW5nX21hdGVyaWFsLmlkKQ0KICAgICAgcGFyYW1ldGVyLnBhY2tpbmdfaWRzLnB1c2gocGFja2luZ19tYXRlcmlhbC5pZCkNCiAgICB9LA0KICAgIHJlbW92ZU1hdGVyaWFsKHBhcmFtZXRlcixwYWNraW5nX21hdGVyaWFsKXsNCiAgICAgIHBhY2tpbmdfbWF0ZXJpYWwuaXNfYWRkZWQgPSBmYWxzZQ0KICAgICAgdmFyIGluZGV4ID0gcGFyYW1ldGVyLnBhY2tpbmdfaWRzLmluZGV4T2YocGFja2luZ19tYXRlcmlhbC5pZCkNCiAgICAgIHZhciBpbmRleDIgPSBwYXJhbWV0ZXIuZGlyZWN0X3BhY2tpbmdfaWRzLmluZGV4T2YocGFja2luZ19tYXRlcmlhbC5pZCkNCiAgICAgIHBhcmFtZXRlci5wYWNraW5nX21hdGVyaWFscy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgcGFyYW1ldGVyLnBhY2tpbmdfaWRzLnNwbGljZShpbmRleCwgMSk7DQogICAgICBwYXJhbWV0ZXIuZGlyZWN0X3BhY2tpbmdfaWRzLnNwbGljZShpbmRleDIsIDEpOw0KICAgIH0sDQogICAgc2VsZWN0SW5kZW50KHBhcmFtZXRlcixpbmRlbnQpew0KICAgICAgaW5kZW50LmlzX2FkZGVkID0gdHJ1ZQ0KICAgICAgcGFyYW1ldGVyLmluZGVudF9pZHMucHVzaChpbmRlbnQuaWQpDQogICAgICBmb3IodmFyIHA9MDtwPGluZGVudC52YWx1ZXMubGVuZ3RoO3ArKyl7DQogICAgICAgIHZhciBwYWNrID0gdGhpcy5jaGVja01hdGVyaWFsU3RvY2soaW5kZW50LnZhbHVlc1twXSkNCiAgICAgICAgaWYocGFjay5pZCl7DQogICAgICAgICAgaWYocGFjay5wYWNraW5nX3R5cGU9PSdpbmRlbnRfcGFja2luZycpew0KICAgICAgICAgICAgdGhpcy5wYWNraW5nX21hdGVyaWFscy5mb3JFYWNoKGZ1bmN0aW9uKHZhbCxrZXkpew0KICAgICAgICAgICAgICBpZihwYWNrLmlkPT12YWwuaWQpew0KICAgICAgICAgICAgICAgIHZhbFsnaXNfYWRkZWQnXSA9IHRydWUNCiAgICAgICAgICAgICAgICB2YWxbJ2luZGVudCddID0gaW5kZW50LmlkDQogICAgICAgICAgICAgICAgcGFyYW1ldGVyLnBhY2tpbmdfbWF0ZXJpYWxzLnB1c2godmFsKQ0KICAgICAgICAgICAgICAgIHBhcmFtZXRlci5wYWNraW5nX2lkcy5wdXNoKHZhbC5pZCkNCiAgICAgICAgICAgICAgICBwYXJhbWV0ZXIuaW5kZW50X3BhY2tpbmdfaWRzLnB1c2godmFsLmlkKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2cocGFyYW1ldGVyLnBhY2tpbmdfbWF0ZXJpYWxzKQ0KICAgIH0sDQogICAgcmVtb3ZlSW5kZW50KHBhcmFtZXRlcixpbmRlbnQpew0KICAgICAgaW5kZW50LmlzX2FkZGVkID0gZmFsc2UNCiAgICAgIHRoaXMucGFja2luZ19ub3RlID0gJycNCiAgICAgIHBhcmFtZXRlci5wYWNraW5nX21hdGVyaWFscy5mb3JFYWNoKGZ1bmN0aW9uKG1hdGVyaWFsLHBtaSl7DQogICAgICAgIGlmKG1hdGVyaWFsLmluZGVudD09aW5kZW50LmlkICYmIG1hdGVyaWFsLnBhY2tpbmdfdHlwZT09J2luZGVudF9wYWNraW5nJyl7DQogICAgICAgICAgcGFyYW1ldGVyLnBhY2tpbmdfbWF0ZXJpYWxzLnNwbGljZShwbWksIDEpOw0KICAgICAgICAgIHBhcmFtZXRlci5wYWNraW5nX2lkcy5zcGxpY2UocG1pLCAxKTsNCiAgICAgICAgICBwYXJhbWV0ZXIuaW5kZW50X3BhY2tpbmdfaWRzLnNwbGljZShwYXJhbWV0ZXIuaW5kZW50X3BhY2tpbmdfaWRzLmluZGV4T2YobWF0ZXJpYWwuaWQpLCAxKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHBhcmFtZXRlci5pbmRlbnRfaWRzLnNwbGljZShwYXJhbWV0ZXIuaW5kZW50X2lkcy5pbmRleE9mKGluZGVudC5pZCksIDEpDQogICAgfSwNCiAgICBjaGVja01hdGVyaWFsU3RvY2sobWF0ZXJpYWwpew0KICAgICAgdmFyIGF2YWlfbWF0ZXJpYWwgPSB7aWQ6bnVsbH0NCiAgICAgIHZhciBwYWNraW5nX21hdGVyaWFscyA9IHRoaXMucGFja2luZ19tYXRlcmlhbHMNCiAgICAgIHBhY2tpbmdfbWF0ZXJpYWxzLmZvckVhY2goZnVuY3Rpb24ocDEsa2V5KXsNCiAgICAgICAgdmFyIGlzX3BhY2sgPSB0cnVlDQogICAgICAgIGlmKG1hdGVyaWFsLm1hdGVyaWFsPT1wMS5tYXRlcmlhbCl7DQogICAgICAgICAgcDEuc3BlY2lmaWNhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihzMil7DQogICAgICAgICAgICB2YXIgaXNfc3BlY3MgPSB0cnVlDQogICAgICAgICAgICBpZihwMS5tYXRlcmlhbF9kZXRhaWwuc3BlY2lmaWNhdGlvbnMuaW5jbHVkZXMoczIuaWQpKXsNCiAgICAgICAgICAgICAgdmFyIHNwZWMgPSB0cnVlDQogICAgICAgICAgICAgIG1hdGVyaWFsLnNwZWNpZmljYXRpb25zLmZvckVhY2goZnVuY3Rpb24oczEpew0KICAgICAgICAgICAgICAgIGlmKHMxLm1hdGVyaWFsX2lkcy5pbmNsdWRlcyhtYXRlcmlhbC5tYXRlcmlhbCkpew0KICAgICAgICAgICAgICAgICAgaWYoczIuaWQ9PXMxLmlkKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoczIudmFsdWU9PXMxLnZhbHVlIHx8IChzMS52YWx1ZXM9PW51bGwgJiYgczIudmFsdWU9PSdvbicgJiYgczEudmFsdWUpKXsNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgc3BlYyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIGlmKCFzcGVjKXsNCiAgICAgICAgICAgICAgICBpc19zcGVjcyA9IGZhbHNlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCFpc19zcGVjcyl7DQogICAgICAgICAgICAgIGlzX3BhY2sgPSBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH1lbHNlew0KICAgICAgICAgIGlzX3BhY2sgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICAgIGlmKGlzX3BhY2spew0KICAgICAgICAgIGF2YWlfbWF0ZXJpYWwgPSBwMQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGF2YWlfbWF0ZXJpYWwNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["processing-packing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAslBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"processing-packing.vue","sourceRoot":"src/views/app/oodo/production/process","sourcesContent":["<template>\r\n  <div class=\"main-content create-main\">\r\n    <form ref=\"dataForm\" @submit.prevent=\"dataForm()\" v-if=\"is_start\">\r\n      <div class=\"d-flex mb-2 align-items-center  justify-content-between\">\r\n        <slot name=\"header\">\r\n          <h5 class=\"mb-0\"><span class=\"text-success\">{{process_detail.name}}</span> / {{slugToWord(action=='indent_packing'?'final packing':action=='direct_packing'?'packing':action)}}</h5>\r\n        </slot>\r\n        <div class=\"d-flex\">\r\n          <div class=\"d-flex\">\r\n            <b-button variant=\"success\" type=\"button\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"dataForm()\" v-if=\"!is_view\">Save\r\n            </b-button>\r\n          </div>\r\n          <b-button variant=\"danger\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"closePopup()\"\r\n            >Discard\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n      <div class=\" my-3 border-top\"></div>\r\n      <fieldset :disabled=\"is_view\">\r\n        <b-row class=\"main-scroll\">\r\n          <b-col lg=\"12\" xl=\"12\" class=\"my-3\" v-if=\"action=='consumables'\">\r\n            <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12\">\r\n                  <div class=\"user-info pt-2 mb-5\">\r\n\r\n                    <div class=\"o_thread_search_input mt-3\">\r\n                      <b> Consumable Details </b>\r\n                    </div>\r\n                    <div v-for=\"consumable_item in form_data.consumable_items_list\">\r\n                      <div v-if=\"consumable_item.is_lot_wise\">\r\n                        <div class=\"o_thread_search_input\" v-for=\"consumable in consumable_item.lots\" v-if=\"consumable.warehouse==process_detail.warehouse\">\r\n                          <span style=\"width:120px;\"> {{consumable_item.name}} ({{consumable_item.unit}}) : </span>\r\n                          <button class=\"btn btn-white append_btn_left\" type=\"button\">Lot: {{consumable.id}}</button>\r\n                          <input placeholder=\"Quantity\" type=\"number\" min=\"0\" class=\"ui-autocomplete-input append_btn_input_right\" autocomplete=\"off\" :name=\"'consumable_qty'+consumable_item.id+'lot'+consumable.id\" :max=\"consumable.available_quantity\">\r\n                          <button class=\"btn btn-white append_btn_right\" type=\"button\">{{consumable_item.unit}}</button>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"o_thread_search_input\" v-else>\r\n                        <span style=\"width:120px;\"> {{consumable_item.name}} ({{consumable_item.unit}}) : </span>\r\n                        <button class=\"btn btn-white append_btn_left\" type=\"button\" v-if=\"consumable_item.is_lot\">Lot: {{consumable_item.consumable}}</button>\r\n                        <input placeholder=\"Quantity\" type=\"number\" min=\"0\" class=\"ui-autocomplete-input append_btn_input_right\" autocomplete=\"off\" v-model=\"consumable_item.quantity\" :name=\"'consumable_qty'+consumable_item.id\" :max=\"consumable_item.is_free?'':consumable_item.available_quantity\">\r\n                        <button class=\"btn btn-white append_btn_right\" type=\"button\">{{consumable_item.unit}}</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </b-card>\r\n          </b-col>\r\n          <b-col lg=\"12\" xl=\"12\" class=\"my-3\" v-if=\"action=='barrel'\">\r\n            <div class=\"card-scroll\">\r\n              <table class=\"table\">\r\n                <thead class=\"output-rows\">\r\n                  <tr>\r\n                    <th class=\"text-info\">Output</th>\r\n                    <th class=\"text-info\">Lot</th>\r\n                    <th class=\"text-success\">Quantity(KG)</th>\r\n                    <th class=\"text-primary\">Percentage(%)</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"output-rows\" v-for=\"(parameter,key) in form_data.process_outputs\" v-if=\"parameter.parameter_detail.status\">\r\n                  <tr>\r\n                    <td class=\"text-info\">\r\n                      <b>{{parameter.parameter_detail.name}} <sup v-if=\"form_data.is_organic\"><span class=\"badge badge-success\">ORG</span></sup> </b>\r\n                    </td>\r\n                    <td class=\"\">\r\n                      <b>#Lot/{{form_data.lot}} </b>\r\n                    </td>\r\n                    <td class=\"text-success\">\r\n                      <span>{{parameter.quantity.toFixed(2)}}KG</span>\r\n                      <input :placeholder=\"parameter.name\" type=\"hidden\" step=\"0.1\" class=\"ui-autocomplete-input ops\" autocomplete=\"off\" v-model=\"parameter.quantity\" :name=\"'quantity'+parameter.parameter\" min=\"0\">\r\n                    </td>\r\n                    <td class=\"text-primary\">\r\n                      <span>{{parameter.quantity_persentage}}</span>\r\n                      <input :placeholder=\"parameter.name\" type=\"hidden\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"parameter.quantity_persentage\" :name=\"'quantity_persentage'+parameter.parameter\" min=\"0\" readonly>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan=\"4\">\r\n                      <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n                        <div class=\"row mt-2\" v-for=\"barrel in form_data.barrel_stocks\" v-show=\"barrel_id==barrel.id\">\r\n                          <div class=\"col-md-4 pl-0\">\r\n                            <div class=\"pb-4 px-4\">\r\n                              <div class=\"barrel_out\" style=\"height:220px\">\r\n                                <div class=\"barrel_in\" :style=\"'height:'+((100-((100/barrel.max_quantity)*barrel.quantity))-(100/barrel.max_quantity)*barrel.available_quantity)+'%'\">\r\n                                  <div class=\"details text-center\">\r\n                                    <h4>{{barrel.code}}</h4>\r\n                                    <span class=\"text-info text-14\">{{barrel.quantity}}KG/{{barrel.available_quantity}}KG/{{barrel.max_quantity}}KG</span>\r\n                                    <div style=\"font-size:15px;font-weight:600;\">{{barrel.quantity_persentage}}</div>\r\n                                  </div>\r\n                                </div>\r\n                                <div class=\"barrel_pepper\" :style=\"'height:'+((100/barrel.max_quantity)*barrel.quantity)+'%'\">\r\n                                </div>\r\n                                <div class=\"px-2 pt-1 text-center text-secondary\" v-for=\"(product,pkey) in barrel.products\">\r\n                                  <small><span v-if=\"pkey!=0\">, </span><span v-else><b>#Lot/{{product.lot}}</b></span> {{product.product}}</small>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"text-center p-2\">\r\n                                <b>{{barrel.name}}</b>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"col-md-8 pl-0\">\r\n                            <b class=\"h5 px-2 border-bottom text-success font-weight-600\">{{barrel.code}} {{barrel.name}}</b>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> Filling Quantity: </span>\r\n                              <button class=\"btn btn-white append_btn_left\" type=\"button\">{{barrel.code}}</button>\r\n                              <input :placeholder=\"parameter.name\" :type=\"'number'\" step=\"0.1\" class=\"ui-autocomplete-input append_btn_input_right ops w-100\" autocomplete=\"off\" v-model=\"barrel.quantity\" @input=\"calculation(parameter,barrel)\" :name=\"'quantity'+barrel.id+'barrel'+parameter.parameter\" min=\"0\">\r\n                              <button class=\"btn btn-white append_btn_right\" type=\"button\">KG</button>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input py-0\">\r\n                              <span style=\"width:120px;\"> </span>\r\n                              <div class=\"text-right text-primary w-100 pr-3\">{{barrel.quantity_persentage}}</div>\r\n                              <input type=\"hidden\" v-model=\"barrel.quantity_persentage\" :name=\"'quantity_persentage'+barrel.id+'barrel'+parameter.parameter\">\r\n                              <input type=\"hidden\" :name=\"'barrel'+barrel.id\" v-model=\"barrel.id\">\r\n                            </div>\r\n                            <div class=\"mb-5\">\r\n                              <div class=\"o_thread_search_input\">\r\n                                <b> Consumable Details</b>\r\n                              </div>\r\n                              <div v-for=\"consumable_item in barrel.consumable_items_list\">\r\n                                <div v-if=\"consumable_item.is_lot_wise\">\r\n                                  <div class=\"o_thread_search_input\" v-for=\"consumable in consumable_item.lots\" v-if=\"consumable.warehouse==process_detail.warehouse\">\r\n                                    <span style=\"width:120px;\"> {{consumable_item.name}} ({{consumable_item.unit}}) : </span>\r\n                                    <button class=\"btn btn-white append_btn_left\" type=\"button\">Lot: {{consumable.id}}</button>\r\n                                    <input placeholder=\"Quantity\" type=\"number\" min=\"0\" class=\"ui-autocomplete-input append_btn_input_right\" autocomplete=\"off\" :name=\"'consumable_qty'+consumable_item.id+'lot'+consumable.id\" :max=\"consumable.available_quantity\">\r\n                                    <button class=\"btn btn-white append_btn_right\" type=\"button\">{{consumable_item.unit}}</button>\r\n                                  </div>\r\n                                </div>\r\n                                <div class=\"o_thread_search_input\" v-else>\r\n                                  <span style=\"width:120px;\"> {{consumable_item.name}} ({{consumable_item.unit}}) : </span>\r\n                                  <button class=\"btn btn-white append_btn_left\" type=\"button\" v-if=\"consumable_item.is_lot\">Lot: {{consumable_item.consumable}}</button>\r\n                                  <input placeholder=\"Quantity\" type=\"number\" min=\"0\" class=\"ui-autocomplete-input append_btn_input_right\" autocomplete=\"off\" v-model=\"consumable_item.quantity\" :name=\"'consumable_qty'+consumable_item.id\" :max=\"consumable_item.is_free?'':consumable_item.available_quantity\">\r\n                                  <button class=\"btn btn-white append_btn_right\" type=\"button\">{{consumable_item.unit}}</button>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"row pb-3 \">\r\n                          <div class=\"col-md-12 px-2 mb-3\"><b> Select a Barrel </b></div>\r\n                          <div class=\"col-md-1 px-2\" v-for=\"barrel in form_data.barrel_stocks\" @click=\"barrel_id=barrel.id\" v-if=\"barrel.available_quantity!=barrel.max_quantity\">\r\n                            <div class=\"barrel_out\" :class=\"barrel_id==barrel.id?'selected':''\" style=\"height:50px\">\r\n                              <div class=\"barrel_in\" :style=\"'height:'+((100-((100/barrel.max_quantity)*barrel.quantity))-(100/barrel.max_quantity)*barrel.available_quantity)+'%'\">\r\n                                <div class=\"details text-center\">\r\n                                  <div>{{barrel.code}}</div>\r\n                                  <small v-for=\"(product,pkey) in barrel.products\" v-if=\"pkey==0\"><b>#Lot/{{product.lot}}</b></small>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"barrel_pepper\" :style=\"'height:'+((100/barrel.max_quantity)*barrel.quantity)+'%'\">\r\n                              </div>\r\n                            </div>\r\n                            <div class=\"text-center text-danger\"><small>Free: <b>{{barrel.max_quantity-barrel.available_quantity}}KG</b></small></div>\r\n                          </div>\r\n                        </div>\r\n                      </b-card>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                <tfoot class=\"output-rows\">\r\n                  <tr>\r\n                    <th class=\"text-right\" colspan=\"2\">Total Output : </th>\r\n                    <td><b class=\"text-success h5\">{{total_output.toFixed(2)}}KG</b>/ <span class=\"text-info\">{{total_weight.toFixed(2)}}KG</span></td>\r\n                    <td class=\"text-primary\">{{CalculatePersentage(total_output,total_weight)}}</td>\r\n                  </tr>\r\n                  <tr v-show=\"process_detail.id!=1\">\r\n                    <th class=\"text-right\" colspan=\"2\">{{process_detail.have_husk?'Husk':process_detail.name+' Loss'}} : </th>\r\n                    <td class=\"text-danger\">{{(total_weight-total_output).toFixed(2)}}Kg</td>\r\n                    <td class=\"text-danger\">{{CalculatePersentage(total_weight-total_output,total_weight)}}</td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </div>\r\n          </b-col>\r\n          <b-col lg=\"12\" xl=\"12\" class=\"my-3\" v-if=\"action=='output' || action=='direct_packing'\">\r\n            <div class=\"card-scroll\">\r\n              <table class=\"table\">\r\n                <thead class=\"output-rows\">\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th class=\"text-info\">Output</th>\r\n                    <th class=\"text-success\">Quantity(KG)</th>\r\n                    <th class=\"text-primary\">Percentage(%)</th>\r\n                    <th class=\"text-danger\" v-if=\"process_detail.direct_packing\">Packing</th>\r\n                    <th v-else></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"output-rows\" v-for=\"(parameter,key) in form_data.process_outputs\" v-if=\"parameter.parameter_detail.status\">\r\n                  <tr>\r\n                    <td>{{key+1}})</td>\r\n                    <td class=\"text-info\">\r\n                      <b>{{parameter.parameter_detail.name}} <sup v-if=\"form_data.is_organic\"><span class=\"badge badge-success\">ORG</span></sup></b>\r\n                    </td>\r\n                    <td class=\"text-success\">\r\n                      <span v-if=\"process_detail.direct_packing\">{{parameter.quantity.toFixed(2)}}KG</span>\r\n                      <input :placeholder=\"parameter.name\" :type=\"process_detail.direct_packing?'hidden':'number'\" step=\"0.1\" class=\"ui-autocomplete-input ops\" autocomplete=\"off\" v-model=\"parameter.quantity\" @input=\"calculation(parameter)\" :name=\"'quantity'+parameter.parameter\" min=\"0\">\r\n                    </td>\r\n                    <td class=\"text-primary\">\r\n                      <span>{{parameter.quantity_persentage}}</span>\r\n                      <input :placeholder=\"parameter.name\" type=\"hidden\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"parameter.quantity_persentage\" :name=\"'quantity_persentage'+parameter.parameter\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td v-if=\"process_detail.direct_packing\">\r\n                      <button type=\"button\" class=\"btn btn-sm py-1 px-2 btn-primary\" @click=\"$bvModal.show('packing-form'+parameter.parameter)\" v-if=\"parameter.direct_packing_ids.length>0\">\r\n                        Select Materials ({{parameter.direct_packing_ids.length}})\r\n                      </button>\r\n                      <button type=\"button\" class=\"btn btn-sm py-1 px-2 btn-warning\" @click=\"$bvModal.show('packing-form'+parameter.parameter)\" v-else>\r\n                        Select Materials\r\n                      </button>\r\n                    </td>\r\n                    <td v-else></td>\r\n                  </tr>\r\n                  <tr class=\"p-0\">\r\n                    <td class=\"p-0\" colspan=\"5\">\r\n                      <div class=\"py-0 px-3\" v-if=\"parameter.direct_packing_ids.length>0\">\r\n                        <table class=\"w-100\">\r\n                          <tr>\r\n                            <th class=\"border-top-0\">#</th>\r\n                            <th class=\"border-top-0\">Material</th>\r\n                            <th class=\"border-top-0\">Specs</th>\r\n                            <th class=\"border-top-0\">Lot</th>\r\n                            <th class=\"border-top-0\">Status</th>\r\n                            <th class=\"border-top-0\">Packing material taken (number)</th>\r\n                            <th class=\"border-top-0\">Product weight (KG/Bag)</th>\r\n                          </tr>\r\n                          <tr v-for=\"(packing_material,mkey) in parameter.packing_materials\" v-if=\"packing_material.packing_type=='direct_packing'\">\r\n                            <td>{{mkey+1}})</td>\r\n                            <td>\r\n                              {{packing_material.material_detail.name}}\r\n                              <input type=\"hidden\" :name=\"'is_added'+packing_material.id+'parameter'+parameter.parameter\" :value=\"'yes'\">\r\n                            </td>\r\n                            <td>\r\n                              <small v-for=\"specification in packing_material.specifications\" v-if=\"specification.material_ids.includes(packing_material.material)\">\r\n                                <b class=\"text-primary\"> {{specification.name}}</b>:{{specification.value}}, \r\n                              </small>\r\n                            </td>\r\n                            <td>#Lot{{packing_material.lot}}</td>\r\n                            <td><b class=\"text-primary\">{{packing_material.status}}</b></td>\r\n                            <td style=\"width:50%\" colspan=\"2\">\r\n                              <div class=\"d-flex\" v-for=\"(qty,qtkey) in packing_material.qtys\">\r\n                                <input type=\"number\" class=\"ui-autocomplete-input w-100\" v-model=\"qty.number_of_bags\" :name=\"'number_of_bags'+packing_material.id+'parameter'+parameter.parameter+'qtkey'+qtkey\" :max=\"packing_material.quantity\">\r\n                                <input type=\"number\" class=\"ui-autocomplete-input w-100\" v-model=\"qty.packing_quantity\" :name=\"'packing_quantity'+packing_material.id+'parameter'+parameter.parameter+'qtkey'+qtkey\" step=\"0.1\">\r\n                                <div class=\"border pt-1 px-1\">{{packing_material.material_detail.unit}}</div>\r\n                              </div>\r\n                              <div class=\"d-flex\">\r\n                                <span class=\"pl-1\" style=\"width:45%\">\r\n                                  <b>{{totalPackMetQty(packing_material,'piece')}}</b>piece\r\n                                </span>\r\n                                <span class=\"pl-2\" style=\"width:35%\"><b>{{totalPackMetQty(packing_material,'weight')}}{{packing_material.material_detail.unit}}</b>\r\n                                </span>\r\n                                <div class=\"text-right\" style=\"width:20%\">\r\n                                  <button type=\"button\" class=\"btn btn-danger btn-sm mt-1 mr-1 px-2 py-1\" @click=\"packing_material.qtys.splice((packing_material.qtys.length-1),1)\" v-if=\"packing_material.qtys.length>1\">-</button>\r\n                                  <button type=\"button\" class=\"btn btn-primary btn-sm mt-1 px-2 py-1\" @click=\"packing_material.qtys.push({packing_quantity:0, number_of_bags:0})\" style=\"margin-right:1px\">+</button>\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        </table>\r\n                        <div class=\"pb-3\" v-show=\"false\">\r\n                          <div class=\"text-right text-info\">\r\n                            <span class=\"mx-2\">Total:</span>\r\n                            <span class=\"mx-2\">Materials: <b>({{totalPackQty(parameter,'materials')}})</b></span>\r\n                            <span class=\"mx-2\">Bags: <b>({{totalPackQty(parameter,'piece')}})</b></span>\r\n                            <span class=\"mx-2\">Weight: <b>({{totalPackQty(parameter,'weight')}})</b></span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"packing-form\">\r\n                        <b-modal :id=\"'packing-form'+parameter.parameter\" hide-header  hide-footer :no-close-on-backdrop=\"true\">\r\n                          <div>\r\n                            <div class=\"d-flex mb-2 align-items-center  justify-content-between\">\r\n                              <slot name=\"header\">\r\n                                 <h5 class=\"mb-0\">Select Packing Materials/<span class=\"text-success\">{{parameter.parameter_detail.name}} <sup v-if=\"form_data.is_organic\"><span class=\"badge badge-success\">ORG</span></sup></span></h5>\r\n                              </slot>\r\n                              <div class=\"d-flex\">\r\n                                <b-button type=\"button\" :variant=\"parameter.direct_packing_ids.length>0?'success':'danger'\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"totalPackQty(parameter);$bvModal.hide('packing-form'+parameter.parameter)\">{{parameter.direct_packing_ids.length>0?'Select':'Close'}}</b-button>\r\n                              </div>\r\n                            </div>\r\n                            <div class=\" my-3 border-top\"></div>\r\n                          </div>\r\n                          <b-row class=\"main-scroll\">\r\n                            <b-col lg=\"4\" xl=\"4\" class=\"pr-0\">\r\n                              <b-card header-bg-variant=\"transparent\" class=\"mt-2\">\r\n                                <h5>Filter</h5>\r\n                                <div v-if=\"filter_material.material\">\r\n                                  <div class=\"o_thread_search_input px-0\">\r\n                                    <select class=\"ui-autocomplete-input w-100 ml-0\" v-model=\"filter_material.material_detail\" @change=\"filter_material.material=filter_material.material_detail.id\">\r\n                                      <option :value=\"{id:'all',specifications:[]}\">Select Material</option>\r\n                                      <option v-for=\"material in materials\" :value=\"material\">{{material.name}}</option>\r\n                                    </select>\r\n                                  </div>\r\n                                  <div class=\"px-0 mt-1\" v-for=\"(specification,key2) in filter_material.specifications\" v-if=\"specification.material_ids.includes(filter_material.material)\">\r\n                                    <span>{{specification.name}}</span>\r\n                                    <div>\r\n                                      <select class=\"ui-autocomplete-input w-100 ml-0\" v-model=\"specification.value\" v-if=\"specification.values\">\r\n                                        <option v-for=\"value in specification.values\" :value=\"value.value\">{{value.value}}</option>\r\n                                      </select>\r\n                                      <div v-else><input type=\"checkbox\" v-model=\"specification.value\" :id=\"'checkmet'\"> <label :for=\"'checkmet'\"> YES</label></div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </b-card>\r\n                            </b-col>\r\n                            <b-col lg=\"8\" xl=\"8\" class=\"\">\r\n                              <b-card header-bg-variant=\"transparent\" class=\"mt-2\">\r\n                                <h5>Packing Materials</h5>\r\n                                <div class=\"user-info\">\r\n                                  <table class=\"table\">\r\n                                    <tr>\r\n                                      <th>Material</th>\r\n                                      <th>Specs</th>\r\n                                      <th>Lot</th>\r\n                                      <th>Status</th>\r\n                                      <th>Action</th>\r\n                                    </tr>\r\n                                    <tr v-for=\"material in packing_materials\" v-if=\"checkMetFilter(material) && material.packing_type=='direct_packing'\">\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">{{material.material_detail.name}}</td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">\r\n                                        <small v-for=\"specification in material.specifications\" v-if=\"specification.material_ids.includes(material.material)\">\r\n                                          <b class=\"text-primary\"> {{specification.name}}</b>:{{specification.value}}, \r\n                                        </small>\r\n                                      </td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">#Lot{{material.lot}}</td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\"><b class=\"text-primary\">{{material.status}}</b></td>\r\n                                      <td>\r\n                                        <button type=\"button\" class=\"btn btn-danger btn-sm px-3 py-1 ml-4\" @click=\"removeMaterial(parameter,material)\" v-if=\"parameter.direct_packing_ids.includes(material.id)\">Remove</button>\r\n                                        <button type=\"button\" class=\"btn btn-primary btn-sm px-3 py-1 ml-4\" @click=\"addMaterial(parameter,material)\" v-else>Add</button>\r\n                                      </td>\r\n                                    </tr>\r\n                                  </table>\r\n                                </div>\r\n                              </b-card>\r\n                            </b-col>\r\n                          </b-row>\r\n                        </b-modal>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                <tfoot class=\"output-rows\">\r\n                  <tr v-if=\"process_detail.id==1\" v-show=\"false\">\r\n                    <td></td>\r\n                    <td>\r\n                      {{slugToWord('robesta_fresh_pulping_output')}}\r\n                    </td>\r\n                    <td>\r\n                      <input :placeholder=\"slugToWord('robesta_fresh_pulping_output')\" type=\"number\" step=\"0.1\" class=\"ui-autocomplete-input ops\" autocomplete=\"off\" :value=\"total_weight-total_output\" :name=\"'quantity'+pulping_output_id\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td>\r\n                      <input :placeholder=\"slugToWord('percentage')\" type=\"text\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" :value=\"CalculatePersentage(total_weight-total_output,total_weight)\" :name=\"'quantity_persentage'+pulping_output_id\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td></td>\r\n                  </tr>\r\n                  <tr v-show=\"process_detail.id!=1\">\r\n                    <th></th>\r\n                    <th class=\"text-right\">Total Output : </th>\r\n                    <td><b class=\"text-success h5\">{{total_output.toFixed(2)}}KG</b>/ <span class=\"text-info\">{{total_weight.toFixed(2)}}KG</span></td>\r\n                    <td class=\"text-primary\">{{CalculatePersentage(total_output,total_weight)}}</td>\r\n                    <td></td>\r\n                  </tr>\r\n                  <tr v-show=\"process_detail.id!=1\">\r\n                    <th></th>\r\n                    <th class=\"text-right\">{{process_detail.have_husk?'Husk':process_detail.name+' Loss'}} : </th>\r\n                    <td class=\"text-danger\">{{(total_weight-total_output).toFixed(2)}}Kg</td>\r\n                    <td class=\"text-danger\">{{CalculatePersentage(total_weight-total_output,total_weight)}}</td>\r\n                    <td></td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n              <hr>\r\n            </div>\r\n          </b-col>\r\n          <b-col lg=\"12\" xl=\"12\" class=\"my-3\" v-if=\"action=='indent_packing'\">\r\n            <div class=\"card-scroll\">\r\n              <table class=\"table\">\r\n                <thead class=\"output-rows\">\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th class=\"text-info\">Output</th>\r\n                    <th class=\"text-success\">Quantity(KG)</th>\r\n                    <th class=\"text-primary\">Percentage(%)</th>\r\n                    <th class=\"text-danger\" v-if=\"process_detail.indent_packing\">Packing</th>\r\n                    <th v-else></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"output-rows\" v-for=\"(parameter,key) in form_data.process_outputs\" v-if=\"parameter.parameter_detail.status\">\r\n                  <tr>\r\n                    <td>{{key+1}})</td>\r\n                    <td class=\"text-info\">\r\n                      <b>{{parameter.parameter_detail.name}} <sup v-if=\"form_data.is_organic\"><span class=\"badge badge-success\">ORG</span></sup></b>\r\n                    </td>\r\n                    <td class=\"text-success\">\r\n                      <span>{{parameter.quantity.toFixed(2)}}KG</span>\r\n                      <input :placeholder=\"parameter.name\" type=\"hidden\" step=\"0.1\" class=\"ui-autocomplete-input ops\" autocomplete=\"off\" v-model=\"parameter.quantity\" @input=\"calculation(parameter)\" :name=\"'quantity'+parameter.parameter\" min=\"0\">\r\n                    </td>\r\n                    <td class=\"text-primary\">\r\n                      <span>{{parameter.quantity_persentage}}</span>\r\n                      <input :placeholder=\"parameter.name\" type=\"hidden\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"parameter.quantity_persentage\" :name=\"'quantity_persentage'+parameter.parameter\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td v-if=\"process_detail.indent_packing\">\r\n                      <button type=\"button\" class=\"btn btn-sm py-1 px-2 btn-primary\" @click=\"$bvModal.show('packing-form'+parameter.parameter)\" v-if=\"parameter.indent_packing_ids.length>0\">\r\n                        Select Indent ({{parameter.indent_packing_ids.length}})\r\n                      </button>\r\n                      <button type=\"button\" class=\"btn btn-sm py-1 px-2 btn-warning\" @click=\"$bvModal.show('packing-form'+parameter.parameter)\" v-else>\r\n                        Select Indent\r\n                      </button>\r\n                    </td>\r\n                    <td v-else></td>\r\n                  </tr>\r\n                  <tr class=\"p-0\">\r\n                    <td class=\"p-0\" colspan=\"5\">\r\n                      <div class=\"py-0 px-3\" v-if=\"parameter.indent_packing_ids.length>0\">\r\n                        <table class=\"w-100\">\r\n                          <tr>\r\n                            <th class=\"border-top-0\">#</th>\r\n                            <th class=\"border-top-0\">Material</th>\r\n                            <th class=\"border-top-0\">Specs</th>\r\n                            <th class=\"border-top-0\">Lot</th>\r\n                            <th class=\"border-top-0\">Status</th>\r\n                            <th class=\"border-top-0\">Packing material taken (number)</th>\r\n                            <th class=\"border-top-0\">Product weight (KG/Bag)</th>\r\n                          </tr>\r\n                          <tr v-for=\"(packing_material,mkey) in packing_materials\" v-if=\"packing_material.packing_type=='indent_packing' && parameter.indent_packing_ids.includes(packing_material.id)\">\r\n                            <td>{{mkey+1}})</td>\r\n                            <td>\r\n                              {{packing_material.material_detail.name}}\r\n                              <input type=\"hidden\" :name=\"'is_added'+packing_material.id+'parameter'+parameter.parameter\" :value=\"'yes'\">\r\n                            </td>\r\n                            <td>\r\n                              <small v-for=\"specification in packing_material.specifications\" v-if=\"specification.material_ids.includes(packing_material.material)\">\r\n                                <b class=\"text-primary\"> {{specification.name}}</b>:{{specification.value}}, \r\n                              </small>\r\n                            </td>\r\n                            <td>#Lot{{packing_material.lot}}</td>\r\n                            <td><b class=\"text-primary\">{{packing_material.status}}</b></td>\r\n                            <td style=\"width:50%\" colspan=\"2\">\r\n                              <div class=\"d-flex\" v-for=\"(qty,qtkey) in packing_material.qtys\">\r\n                                <input type=\"number\" class=\"ui-autocomplete-input w-100\" v-model=\"qty.number_of_bags\" :name=\"'number_of_bags'+packing_material.id+'parameter'+parameter.parameter+'qtkey'+qtkey\" :max=\"packing_material.quantity\">\r\n                                <input type=\"number\" class=\"ui-autocomplete-input w-100\" v-model=\"qty.packing_quantity\" :name=\"'packing_quantity'+packing_material.id+'parameter'+parameter.parameter+'qtkey'+qtkey\" step=\"0.1\">\r\n                                <div class=\"border pt-1 px-1\">{{packing_material.material_detail.unit}}</div>\r\n                              </div>\r\n                              <div class=\"d-flex\">\r\n                                <span class=\"pl-1\" style=\"width:45%\">\r\n                                  <b>{{totalPackMetQty(packing_material,'piece')}}</b>piece\r\n                                </span>\r\n                                <span class=\"pl-2\" style=\"width:35%\"><b>{{totalPackMetQty(packing_material,'weight')}}{{packing_material.material_detail.unit}}</b>\r\n                                </span>\r\n                                <div class=\"text-right\" style=\"width:20%\">\r\n                                  <button type=\"button\" class=\"btn btn-danger btn-sm mt-1 mr-1 px-2 py-1\" @click=\"packing_material.qtys.splice((packing_material.qtys.length-1),1)\" v-if=\"packing_material.qtys.length>1\">-</button>\r\n                                  <button type=\"button\" class=\"btn btn-primary btn-sm mt-1 px-2 py-1\" @click=\"packing_material.qtys.push({packing_quantity:0, number_of_bags:0})\" style=\"margin-right:1px\">+</button>\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        </table>\r\n                        <div class=\"pb-3\" v-show=\"false\">\r\n                          <div class=\"text-right text-info\">\r\n                            <span class=\"mx-2\">Total:</span>\r\n                            <span class=\"mx-2\">Materials: <b>({{totalPackQty(parameter,'materials')}})</b></span>\r\n                            <span class=\"mx-2\">Bags: <b>({{totalPackQty(parameter,'piece')}})</b></span>\r\n                            <span class=\"mx-2\">Weight: <b>({{totalPackQty(parameter,'weight')}})</b></span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"packing-form\">\r\n                        <b-modal :id=\"'packing-form'+parameter.parameter\" hide-header  hide-footer :no-close-on-backdrop=\"true\">\r\n                          <div>\r\n                            <div class=\"d-flex mb-2 align-items-center  justify-content-between\">\r\n                              <slot name=\"header\">\r\n                                 <h5 class=\"mb-0\">Select Packing Materials/<span class=\"text-success\">{{parameter.parameter_detail.name}} <sup v-if=\"form_data.is_organic\"><span class=\"badge badge-success\">ORG</span></sup></span></h5>\r\n                              </slot>\r\n                              <div class=\"d-flex\">\r\n                                <b-button type=\"button\" :variant=\"parameter.indent_packing_ids.length>0?'success':'danger'\" class=\" px-3 py-1  d-sm-block mx-1\" @click=\"totalPackQty(parameter);$bvModal.hide('packing-form'+parameter.parameter)\">{{parameter.indent_packing_ids.length>0?'Select':'Close'}}</b-button>\r\n                              </div>\r\n                            </div>\r\n                            <div class=\" my-3 border-top\"></div>\r\n                          </div>\r\n\r\n                          <b-row class=\"main-scroll\">\r\n                            <b-col lg=\"6\" xl=\"6\" class=\"pr-0\">\r\n                              <b-card header-bg-variant=\"transparent\" class=\"mt-2\">\r\n                                <h5>Select Indent</h5>\r\n                                <div class=\"user-info\">\r\n                                  <table class=\"table\">\r\n                                    <tr>\r\n                                      <th>Indent</th>\r\n                                      <th>Product</th>\r\n                                      <th>Quantity</th>\r\n                                      <th>Action</th>\r\n                                    </tr>\r\n                                    <tr v-for=\"indent in indent_packings\" v-if=\"indent.parameter==parameter.parameter\">\r\n                                      <td :style=\"indent.is_added?'opacity:1':'opacity:0.5'\">\r\n                                        #{{indent.main_indent}}/Indent\r\n                                      </td>\r\n                                      <td :style=\"indent.is_added?'opacity:1':'opacity:0.5'\">\r\n                                        {{indent.product_detail.category_detail.name}}> {{indent.product_detail.name}}> {{indent.parameter_detail.name}}\r\n                                      </td>\r\n                                      <td :style=\"indent.is_added?'opacity:1':'opacity:0.5'\">{{indent.quantity}}KG</td>\r\n                                      <td>\r\n                                        <button type=\"button\" class=\"btn btn-danger btn-sm px-3 py-1 ml-4\" @click=\"removeIndent(parameter,indent)\" v-if=\"parameter.indent_ids.includes(indent.id)\">Remove</button>\r\n                                        <button type=\"button\" class=\"btn btn-primary btn-sm px-3 py-1 ml-4\" @click=\"selectIndent(parameter,indent)\" v-else>Select</button>\r\n                                      </td>\r\n                                    </tr>\r\n                                  </table>\r\n                                </div>\r\n                              </b-card>\r\n                            </b-col>\r\n                            <b-col lg=\"6\" xl=\"6\" class=\"\">\r\n                              <b-card header-bg-variant=\"transparent\" class=\"mt-2\">\r\n                                <h5>Packing Materials</h5>\r\n                                <div class=\"user-info\">\r\n                                  <div class=\"alert alert-info p-2\" v-if=\"packing_note\">\r\n                                    <div>Packing note</div>\r\n                                    <pre v-html=\"packing_note\" class=\"m-0\"></pre>\r\n                                  </div>\r\n                                  <table class=\"table\">\r\n                                    <tr>\r\n                                      <th>Material</th>\r\n                                      <th>Specs</th>\r\n                                      <th>Lot</th>\r\n                                      <th>Status</th>\r\n                                      <th>Action</th>\r\n                                    </tr>\r\n                                    <tr v-for=\"material in packing_materials\" v-if=\"material.packing_type=='indent_packing' && parameter.indent_packing_ids.includes(material.id)\">\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">{{material.material_detail.name}}</td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">\r\n                                        <small v-for=\"specification in material.specifications\" v-if=\"specification.material_ids.includes(material.material)\">\r\n                                          <b class=\"text-primary\"> {{specification.name}}</b>:{{specification.value}}, \r\n                                        </small>\r\n                                      </td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\">#Lot{{material.lot}}</td>\r\n                                      <td :style=\"material.is_added?'opacity:1':'opacity:0.5'\"><b class=\"text-primary\">{{material.status}}</b></td>\r\n                                      <td>\r\n                                        <button type=\"button\" class=\"btn btn-danger btn-sm px-3 py-1 ml-4\" @click=\"removeMaterial(parameter,material)\" v-if=\"parameter.indent_packing_ids.includes(material.id)\">Remove</button>\r\n                                        <button type=\"button\" class=\"btn btn-primary btn-sm px-3 py-1 ml-4\" @click=\"addMaterial(parameter,material)\" v-else>Add</button>\r\n                                      </td>\r\n                                    </tr>\r\n                                  </table>\r\n                                </div>\r\n                              </b-card>\r\n                            </b-col>\r\n                          </b-row>\r\n                        </b-modal>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                <tfoot class=\"output-rows\">\r\n                  <tr v-if=\"process_detail.id==1\" v-show=\"false\">\r\n                    <td></td>\r\n                    <td>\r\n                      {{slugToWord('robesta_fresh_pulping_output')}}\r\n                    </td>\r\n                    <td>\r\n                      <input :placeholder=\"slugToWord('robesta_fresh_pulping_output')\" type=\"number\" step=\"0.1\" class=\"ui-autocomplete-input ops\" autocomplete=\"off\" :value=\"total_weight-total_output\" :name=\"'quantity'+pulping_output_id\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td>\r\n                      <input :placeholder=\"slugToWord('percentage')\" type=\"text\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" :value=\"CalculatePersentage(total_weight-total_output,total_weight)\" :name=\"'quantity_persentage'+pulping_output_id\" min=\"0\" readonly>\r\n                    </td>\r\n                    <td></td>\r\n                  </tr>\r\n                  <tr v-show=\"process_detail.id!=1\">\r\n                    <th></th>\r\n                    <th class=\"text-right\">Total Output : </th>\r\n                    <td><b class=\"text-success h5\">{{total_output.toFixed(2)}}KG</b>/ <span class=\"text-info\">{{total_weight.toFixed(2)}}KG</span></td>\r\n                    <td class=\"text-primary\">{{CalculatePersentage(total_output,total_weight)}}</td>\r\n                    <td></td>\r\n                  </tr>\r\n                  <tr v-show=\"process_detail.id!=1\">\r\n                    <th></th>\r\n                    <th class=\"text-right\">{{process_detail.have_husk?'Husk':process_detail.name+' Loss'}} : </th>\r\n                    <td class=\"text-danger\">{{(total_weight-total_output).toFixed(2)}}Kg</td>\r\n                    <td class=\"text-danger\">{{CalculatePersentage(total_weight-total_output,total_weight)}}</td>\r\n                    <td></td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n              <hr>\r\n            </div>\r\n          </b-col>\r\n        </b-row>\r\n      </fieldset>\r\n    </form>\r\n    <div style=\"height:84vh\" v-else>\r\n      <div>\r\n        <div class=\"loader_logo\">\r\n          <img src=\"/img/logo.png\" class=\"\" alt=\"logo\">\r\n        </div>\r\n\r\n        <div class=\"loading\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport ProductFields from '/src/views/app/oodo/components/product_fields'\r\nexport default {\r\n  props: ['process_detail_id','start_process_id','processing_id','action','is_view'],\r\n  components:{\r\n    ProductFields\r\n  },\r\n  data() {\r\n    return {\r\n      form_data:{\r\n        id:null,\r\n        date:null,\r\n        product:null,\r\n        status:'Draft',\r\n        shift:'DAY',\r\n        workers:[],\r\n        wage_workers:[],\r\n        work_type:'wages',\r\n        overtime_hourse_st1:2,\r\n        machines:[],\r\n        start_process_detail:{process_products_list:[],main_process_detail:{},firewood_details:{},dryer_details:{}, attribut:null, attribute_detail:{}},\r\n        other_lots:[],\r\n        lot:null,\r\n        is_organic:false,\r\n        process_outputs:[],\r\n        barrel_stocks:[],\r\n        next_process:null,\r\n        consumable_items_list:[],\r\n        unloading:{\r\n          workers:[],\r\n          wage_workers:[],\r\n          work_type:'wages',\r\n          overtime_hourse_st1:2,\r\n        },\r\n      },\r\n      process_detail:{outputs:[],consumable_items_list:[],inputs:[]},\r\n      packing_materials:[],\r\n      indent_packings:[],\r\n      barrel_id:null,\r\n      id:null,\r\n      product_name : '',\r\n      total_weight:0,\r\n      total_output:0,\r\n      workers:[],\r\n      next_processes:[],\r\n      stock_parameters:[],\r\n      is_start:false,\r\n      filter_material:{specifications:[]},\r\n      materials:[],\r\n      specifications:[],\r\n      boilers:[],\r\n      packing_note:'',\r\n    };\r\n  },\r\n  mounted() {\r\n    this.form_data.date = this.currentDate()\r\n    if(this.processing_id){\r\n      this.getProcess()\r\n    }else{\r\n      this.getProcessDetails()\r\n    }\r\n  },\r\n  methods: {\r\n    getProcess() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/production/processing/'+this.processing_id+'/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.form_data = jsonData\r\n        this.getPackingMaterials()\r\n        if(this.action=='indent_packing'){\r\n          this.getIndents()\r\n        }\r\n        this.getProcessDetails()\r\n      })\r\n    },\r\n    getProcessDetails() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/production/process_details/'+this.process_detail_id+'/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.process_detail = jsonData\r\n        this.form_data.machines = jsonData.machines\r\n        var self = this\r\n        if(!this.form_data.contract_labour_charge){\r\n          this.form_data.contract_labour_charge = jsonData.production_process_detail.labour_charge\r\n        }\r\n        if(this.form_data.process_outputs.length<=0){\r\n          this.getParameters()\r\n        }\r\n        // if(this.form_data.process_outputs.length>0 && this.form_data.direct_packing_ids.length<=0 && this.action=='direct_packing'){\r\n        //   var self = this\r\n        //   this.form_data.process_outputs.forEach(function(val,key){\r\n        //     self.packing_materials.push.apply(self.packing_materials,self.form_data.process_outputs[key].packing_materials)\r\n        //     self.form_data.process_outputs[key].packing_materials = self.packing_materials\r\n        //   })\r\n        //   this.setPackingMaterialFilter()\r\n        // }\r\n        if(this.form_data.consumable_items_list.length<=0){\r\n          this.form_data.consumable_items_list = jsonData.consumable_items_list\r\n        }\r\n        if(jsonData.have_barrel && this.form_data.barrel_stocks.length<=0){\r\n          this.getBarrels()\r\n        }\r\n        this.getStartProcess()\r\n      })\r\n    },\r\n    getStartProcess() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/production/start_process/'+this.start_process_id+'/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.form_data.start_process_detail = jsonData\r\n        var last_process_id = null \r\n        jsonData.processes.forEach(function(val,key){\r\n          last_process_id = val.id\r\n        })\r\n        var lots = [];\r\n        var lot = null;\r\n        var total = 0;\r\n        var is_organic = true\r\n        jsonData.process_products.forEach(function(val,key){\r\n          if(!val.is_organic){\r\n            is_organic = false\r\n          }\r\n          if(key==0)lot=val.lot\r\n          lots.push(val.lot)\r\n        })\r\n        this.total_weight = jsonData.total_weight\r\n        this.form_data.lot = lot\r\n        this.form_data.other_lots = lots\r\n        this.form_data.is_organic = is_organic\r\n        if(this.form_data.process_outputs.length>0){\r\n          this.calculateQty()\r\n        }\r\n        this.is_start = true\r\n      })\r\n    },\r\n    getBarrels() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/barrel/?product='+this.form_data.product, {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        var self = this\r\n        jsonData.forEach(function(val,key){\r\n          jsonData[key]['quantity'] = 0\r\n          jsonData[key]['quantity_persentage'] = 0\r\n          jsonData[key]['consumable_items_list'] = self.form_data.consumable_items_list\r\n        })\r\n        this.form_data.barrel_stocks = jsonData\r\n      })\r\n    },\r\n    getParameters() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/parameters/?outputs='+this.process_detail.outputs+'&start_process='+this.start_process_id, {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        jsonData.forEach(function(val,key){\r\n          jsonData[key].parameter = val.id\r\n          jsonData[key].parameter_detail = val\r\n          jsonData[key].quantity = 0\r\n          jsonData[key].quantity_persentage = '0%'\r\n          jsonData[key]['direct_packing_ids'] = []\r\n          jsonData[key]['indent_packing_ids'] = []\r\n          jsonData[key]['packing_ids'] = []\r\n          jsonData[key]['packing_materials'] = []\r\n          jsonData[key]['indent_ids'] = []\r\n        })\r\n        this.form_data.process_outputs = jsonData\r\n        this.setPackingMaterialFilter()\r\n        this.calculateQty()\r\n      })\r\n    },\r\n    calculateQty(){\r\n      var self=this;\r\n      var total = 0;\r\n      this.form_data.process_outputs.forEach(function(val,key){\r\n        if(val.parameter_type=='semi_finished_product' || val.parameter_type=='full_finished_product' || val.parameter_type=='main_product'){\r\n          total = total+parseFloat(val.quantity)\r\n        }\r\n      })\r\n      this.total_weight = total+this.total_weight\r\n      this.total_output = total\r\n    },\r\n    calculation(parameter,barrel={id:null}){\r\n      var self=this;\r\n      var total = 0;\r\n      var process_outputs = this.form_data.process_outputs\r\n      this.form_data.process_outputs = []\r\n      process_outputs.forEach(function(val,key){\r\n        if(self.process_detail.have_barrel && barrel.id){\r\n          var total_br_qty = 0 \r\n          self.form_data.barrel_stocks.forEach(function(br){\r\n            if(br.id!=barrel.id){\r\n              total_br_qty = total_br_qty+parseFloat(br.quantity)\r\n            }\r\n          })\r\n          val.quantity = parseFloat(barrel.quantity)+total_br_qty\r\n          barrel.quantity_persentage = self.CalculatePersentage(barrel.quantity,barrel.max_quantity,'Barrel is full')\r\n        }\r\n        if(val.quantity){\r\n          if(self.total_weight!=0){\r\n            var persentage = (val.quantity/self.total_weight)*100\r\n            persentage = persentage.toFixed(2)\r\n            process_outputs[key].quantity_persentage = persentage+'%'\r\n          }\r\n          if(val.parameter_type=='semi_finished_product' || val.parameter_type=='full_finished_product' || val.parameter_type=='main_product'){\r\n            total = total+parseFloat(val.quantity)\r\n          }\r\n        }else{\r\n            process_outputs[key].quantity_persentage = '0%'\r\n        }\r\n      })\r\n      this.form_data.process_outputs = process_outputs\r\n      this.total_output = total\r\n    },\r\n    CalculatePersentage(value,total_weight, message='Output is over'){\r\n      if(value){\r\n        if(this.total_weight!=0){\r\n          var persentage = (value/total_weight)*100\r\n          persentage = persentage.toFixed(2)\r\n          if(persentage>100){\r\n            this.showAlert(message,'red')\r\n          }\r\n          return persentage+'%'\r\n        }\r\n      }\r\n      return '0%'\r\n    },\r\n    dataForm() {\r\n      if(this.action == 'consumables'){\r\n        this.consumableStockCreate()\r\n      }else if(this.action == 'output' || this.action == 'direct_packing' || this.action == 'indent_packing'|| this.action == 'barrel'){\r\n        this.createOutput()\r\n      }\r\n    },\r\n    consumableStockCreate() {\r\n      var formdata = new FormData(this.$refs['dataForm'])\r\n      formdata.append('process_detail',this.process_detail.id)\r\n      formdata.append('start_process',this.start_process_id)\r\n      formdata.append('process',this.form_data.id)\r\n      if(this.lock_btn){\r\n        return false\r\n      }\r\n      this.lock_btn = true\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/production/consumable_stock_create/', {\r\n          method : 'POST',\r\n          body : formdata,\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.lock_btn = false\r\n        if(jsonData.success){\r\n          if(jsonData.out_of_stock){\r\n            this.showAlert('Out of stock!','red')\r\n          }else{\r\n            this.closePopup()\r\n            this.showAlert('Saved Successfully!')\r\n          }\r\n        }else{\r\n          this.showAlert(jsonData.message,'red')\r\n        }\r\n      })\r\n    },\r\n    getIndents() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/indent/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.indent_packings = jsonData\r\n      })\r\n    },\r\n    getPackingMaterials(){\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/packing_material_stock/?warehouse='+this.form_data.start_process_detail.main_process_detail.warehouse+'&in_stock=true', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        var packing_type = this.action\r\n        jsonData.forEach(function(val,key){\r\n          jsonData[key].is_added = false\r\n          jsonData[key].packing_type = packing_type\r\n          jsonData[key].qtys = [{packing_quantity:0, number_of_bags:0}]\r\n        })\r\n        this.packing_materials = jsonData\r\n      })\r\n    },\r\n    totalPackMetQty(packing_material,type=\"piece\"){\r\n      var total_bags=0\r\n      var total=0\r\n      packing_material.qtys.forEach(function(qty){\r\n        total_bags = total_bags+parseInt(qty.number_of_bags)\r\n        total = total+(parseFloat(qty.packing_quantity)*parseInt(qty.number_of_bags))\r\n      })\r\n      if(type=='piece'){\r\n        return total_bags\r\n      }\r\n      else if(type=='weight'){\r\n        return total.toFixed(2)\r\n      }else{\r\n        return 0\r\n      }\r\n\r\n    },\r\n    totalPackQty(parameter,type=\"piece\"){\r\n      var total_mets=0\r\n      var total_bags=0\r\n      var total=0\r\n      var total_qty=0\r\n      var unit =''\r\n      var self=this\r\n      parameter.packing_materials.forEach(function(packing_material){\r\n        if(packing_material.is_added){\r\n          var total_bags2=0\r\n          var total2=0\r\n          unit = packing_material.material_detail.unit\r\n          packing_material.qtys.forEach(function(qty){\r\n            total_bags2 = total_bags2+parseInt(qty.number_of_bags)\r\n            total2 = total2+(parseFloat(qty.packing_quantity)*parseInt(qty.number_of_bags))\r\n          })\r\n          if(packing_material.packing_type==self.action){\r\n            total_mets++\r\n            total_bags = total_bags+total_bags2\r\n            total = total+total2\r\n          }\r\n          total_qty = total_qty+total2\r\n        }\r\n      })\r\n      parameter.quantity = total_qty\r\n      var self=this;\r\n      var total_qty = 0;\r\n      var process_outputs = this.form_data.process_outputs\r\n      process_outputs.forEach(function(val,key){\r\n        if(val.quantity){\r\n          if(self.total_weight!=0){\r\n            var persentage = (val.quantity/self.total_weight)*100\r\n            persentage = persentage.toFixed(2)\r\n            process_outputs[key].quantity_persentage = persentage+'%'\r\n          }\r\n          if(val.parameter_type=='semi_finished_product' || val.parameter_type=='full_finished_product' || val.parameter_type=='main_product'){\r\n            total_qty = total_qty+parseFloat(val.quantity)\r\n          }\r\n        }else{\r\n            process_outputs[key].quantity_persentage = '0%'\r\n        }\r\n      })\r\n      this.total_output = total_qty\r\n      if(type=='materials'){\r\n        return total_mets\r\n      }\r\n      else if(type=='piece'){\r\n        return total_bags\r\n      }\r\n      else if(type=='weight'){\r\n        return total.toFixed(2)+unit\r\n      }else{\r\n        return 0\r\n      }\r\n    },\r\n    setPackingMaterialFilter(){\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/product/materials/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.materials = jsonData\r\n      })\r\n\r\n      fetch(this.api_url+'/product/specifications/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.specifications = jsonData\r\n        var specification_values = [];\r\n        this.specifications.forEach(function(val,key){\r\n          if(val.specification_for=='Packing Material'){\r\n            specification_values.push({id:val.id, name:val.name ,value:'', is_values:val.is_values, values:val.values,material_ids:val.material_ids})\r\n          }\r\n        })\r\n        this.filter_material = {material:'all', requested_quantity:0, price:0,max_quantity:0,stock_quantity:0, print_indent:{id:null}, specifications:specification_values, material_detail:{id:'all',specifications:[]}}\r\n      })\r\n    },\r\n    checkMetFilter(packing_material){\r\n      var filter=false\r\n      if(packing_material.material==this.filter_material.material || this.filter_material.material=='all')\r\n      {\r\n        filter=true\r\n      }\r\n      for(var sk=0;sk<this.filter_material.specifications.length;sk++){\r\n        var specification=this.filter_material.specifications[sk]\r\n        if(specification.material_ids.includes(this.filter_material.material)){\r\n          if(specification.value){\r\n            if(packing_material.specifications[sk].values==null){\r\n              if((packing_material.specifications[sk].value=='on' && !specification.value) || packing_material.specifications[sk].value=='off' && specification.value){\r\n                filter=false\r\n              }\r\n            }else if(packing_material.specifications[sk].value!=specification.value){\r\n              filter=false\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return filter\r\n    },\r\n    createOutput() {\r\n      var formdata = new FormData(this.$refs['dataForm'])\r\n      formdata.append('process_detail',this.process_detail.id)\r\n      formdata.append('start_process',this.start_process_id)\r\n      formdata.append('process',this.form_data.id)\r\n      formdata.append('packing_type',this.action)\r\n      if(this.lock_btn){\r\n        return false\r\n      }\r\n      this.lock_btn = true\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/production/process_outputs/', {\r\n          method : 'POST',\r\n          body : formdata,\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.lock_btn = false\r\n        if(jsonData.success){\r\n          this.closePopup()\r\n          this.showAlert('Saved Successfully!')\r\n        }else{\r\n          this.showAlert('Something Wrong!','red')\r\n        }\r\n      })\r\n    },\r\n    closePopup(){\r\n      this.$emit('closePopup', true)\r\n    },\r\n    addMaterial(parameter,packing_material){\r\n      packing_material.is_added = true\r\n      var pm = JSON.stringify(packing_material)\r\n      parameter.packing_materials.push(JSON.parse(pm))\r\n      parameter.direct_packing_ids.push(packing_material.id)\r\n      parameter.packing_ids.push(packing_material.id)\r\n    },\r\n    removeMaterial(parameter,packing_material){\r\n      packing_material.is_added = false\r\n      var index = parameter.packing_ids.indexOf(packing_material.id)\r\n      var index2 = parameter.direct_packing_ids.indexOf(packing_material.id)\r\n      parameter.packing_materials.splice(index, 1);\r\n      parameter.packing_ids.splice(index, 1);\r\n      parameter.direct_packing_ids.splice(index2, 1);\r\n    },\r\n    selectIndent(parameter,indent){\r\n      indent.is_added = true\r\n      parameter.indent_ids.push(indent.id)\r\n      for(var p=0;p<indent.values.length;p++){\r\n        var pack = this.checkMaterialStock(indent.values[p])\r\n        if(pack.id){\r\n          if(pack.packing_type=='indent_packing'){\r\n            this.packing_materials.forEach(function(val,key){\r\n              if(pack.id==val.id){\r\n                val['is_added'] = true\r\n                val['indent'] = indent.id\r\n                parameter.packing_materials.push(val)\r\n                parameter.packing_ids.push(val.id)\r\n                parameter.indent_packing_ids.push(val.id)\r\n              }\r\n            })\r\n          }\r\n        }\r\n      }\r\n      console.log(parameter.packing_materials)\r\n    },\r\n    removeIndent(parameter,indent){\r\n      indent.is_added = false\r\n      this.packing_note = ''\r\n      parameter.packing_materials.forEach(function(material,pmi){\r\n        if(material.indent==indent.id && material.packing_type=='indent_packing'){\r\n          parameter.packing_materials.splice(pmi, 1);\r\n          parameter.packing_ids.splice(pmi, 1);\r\n          parameter.indent_packing_ids.splice(parameter.indent_packing_ids.indexOf(material.id), 1);\r\n        }\r\n      })\r\n      parameter.indent_ids.splice(parameter.indent_ids.indexOf(indent.id), 1)\r\n    },\r\n    checkMaterialStock(material){\r\n      var avai_material = {id:null}\r\n      var packing_materials = this.packing_materials\r\n      packing_materials.forEach(function(p1,key){\r\n        var is_pack = true\r\n        if(material.material==p1.material){\r\n          p1.specifications.forEach(function(s2){\r\n            var is_specs = true\r\n            if(p1.material_detail.specifications.includes(s2.id)){\r\n              var spec = true\r\n              material.specifications.forEach(function(s1){\r\n                if(s1.material_ids.includes(material.material)){\r\n                  if(s2.id==s1.id){\r\n                    if(s2.value==s1.value || (s1.values==null && s2.value=='on' && s1.value)){\r\n                    }else{\r\n                      spec = false\r\n                    }\r\n                  }\r\n                }\r\n              })\r\n              if(!spec){\r\n                is_specs = false\r\n              }\r\n            }\r\n            if(!is_specs){\r\n              is_pack = false\r\n            }\r\n          })\r\n        }else{\r\n          is_pack = false\r\n        }\r\n        if(is_pack){\r\n          avai_material = p1\r\n        }\r\n      })\r\n      return avai_material\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style >\r\n\r\n@import '../../styles/style.css';\r\n\r\n</style>\r\n"]}]}