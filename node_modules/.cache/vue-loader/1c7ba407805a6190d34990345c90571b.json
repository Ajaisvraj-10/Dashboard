{"remainingRequest":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/muhammed/Documents/vue_projects/backend/biowin aeo/src/views/app/pages/otp-login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/src/views/app/pages/otp-login.vue","mtime":1678305386436},{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/muhammed/Documents/vue_projects/backend/biowin aeo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBtZXRhSW5mbzogewogICAgdGl0bGU6ICJIb21lIgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRfY29kZTonKzkxJywKICAgICAgc2VjdGlvbjoncGhvbmUnLAogICAgICBwaG9uZTonJywKICAgICAgb3RwOicnLAogICAgICBjdXJyZW50X290cDonJywKICAgIH07CiAgfSwKICBtb3VudGVkKCl7CgogIH0sCiAgbWV0aG9kcyA6IHsKICAgIHNlbmRPVFAoKSB7CiAgICAgIGlmKHRoaXMucGhvbmUubGVuZ3RoIT0xMCl7CiAgICAgICAgdGhpcy5zaG93QWxlcnQoJ0VudGVyIDEwIGRpZ2l0IG51bWJlciEnKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgncGhvbmUnLHRoaXMucGhvbmUpCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnZGV2aWNlX3R5cGUnLCdhZW8nKQogICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9lbXBsb3llZS9zZW5kX290cC8nLCB7CiAgICAgICAgICBtZXRob2QgOiAncG9zdCcsCiAgICAgICAgICBib2R5IDogZm9ybWRhdGEKICAgICAgfSkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpCiAgICAgIH0pCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gewogICAgICAgIGlmKGpzb25EYXRhLnN1Y2Nlc3MpewogICAgICAgICAgdGhpcy5zZWN0aW9uID0gJ29wdCcKICAgICAgICAgIHRoaXMuY3VycmVudF9vdHAgPSBqc29uRGF0YS5kZXZpY2VfY29kZQogICAgICAgICAgdGhpcy4kcm9vdC51c2VyX3R5cGUgPSBqc29uRGF0YS51c2VyX3R5cGUKICAgICAgICAgIC8vIGFsZXJ0KGpzb25EYXRhLm90cCkKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHAxJykuZm9jdXMoKQogICAgICAgICAgdGhpcy5zaG93QWxlcnQoanNvbkRhdGEubWVzc2FnZSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KGpzb25EYXRhLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNldE90cChwb3NpdGlvbil7CiAgICAgIHZhciB2YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHAnK3Bvc2l0aW9uKS52YWx1ZQogICAgICBpZih2YWx1ZSl7CiAgICAgICAgaWYocG9zaXRpb249PTQpewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZlcmlmeV9idG4nKS5mb2N1cygpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwJysocG9zaXRpb24rMSkpLmZvY3VzKCkKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5vdHAgPSAnJwogICAgICBmb3IodmFyIG89MTtvPD00O28rKyl7CiAgICAgICAgdGhpcy5vdHAgPSB0aGlzLm90cCtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwJytvKS52YWx1ZQogICAgICB9CiAgICB9LAogICAgdmVyaWZ5T1RQKCkgewogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ290cCcsdGhpcy5vdHApCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgncGhvbmUnLHRoaXMucGhvbmUpCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnZGV2aWNlX2NvZGUnLHRoaXMuY3VycmVudF9vdHApCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgndXNlcl90eXBlJyx0aGlzLiRyb290LnVzZXJfdHlwZSkKICAgICAgZmV0Y2godGhpcy5hcGlfdXJsKycvZW1wbG95ZWUvdmVyaWZ5X290cC8nLCB7CiAgICAgICAgICBtZXRob2QgOiAncG9zdCcsCiAgICAgICAgICBib2R5IDogZm9ybWRhdGEKICAgICAgfSkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpCiAgICAgIH0pCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gewogICAgICAgIHZhciB1c2VyX2RhdGEgPSBqc29uRGF0YS5kYXRhCiAgICAgICAgaWYoanNvbkRhdGEuc3VjY2VzcyAmJiB1c2VyX2RhdGEuYWNjZXNzKXsKICAgICAgICAgIGlmKHVzZXJfZGF0YS51c2VyX2RldGFpbHMuaXNfYWVvKXsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJbmZvIiwgSlNPTi5zdHJpbmdpZnkodXNlcl9kYXRhKSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpbnNwZWN0b3JJbmZvIiwgSlNPTi5zdHJpbmdpZnkoanNvbkRhdGEuaW5zcGVjdG9yKSk7CiAgICAgICAgICAgIHRoaXMuJHJvb3QudG9rZW4gPSB1c2VyX2RhdGEuYWNjZXNzCiAgICAgICAgICAgIGlmKHRoaXMuJHJvb3QudG9rZW49PScnKXsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySW5mbyIpOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nOwogICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoJ05vIEFFTyBvZmZpY2VyIGZvdW5kIHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzJykKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJJbmZvIik7CiAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLnNob3dBbGVydChqc29uRGF0YS5tZXNzYWdlKQogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJJbmZvIik7CiAgICAgICAgfQogICAgICB9KQoKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["otp-login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"otp-login.vue","sourceRoot":"src/views/app/pages","sourcesContent":["\r\n<template>\r\n  <div class=\"main-content \">\r\n    <main style=\"display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n    height: 100vh;\r\n    background: linear-gradient(2deg, #e2f2ffc7, #ffffff00);\">\r\n    <div class=\"body-bio2 p-5 w-100\">\r\n         \r\n            <div class=\"logo  py-5 text-center\">\r\n             \r\n              <img src=\"/images/logo4.png\" class=\"mb-5 py-3\" style=\"width:160px;\" />\r\n                <div class=\"my-4pt-3\" v-if=\"section=='phone'\">\r\n                  <div class=\"title\">\r\n                      \r\n                      <p class=\"info\">Please Enter Your 10 Digit Phone Number</p>\r\n                      \r\n                  </div>\r\n\r\n                  <b-input-group>\r\n                    <b-form-input type=\"number\" placeholder=\"Phone Number\" v-model=\"phone\"></b-form-input>\r\n                  </b-input-group>\r\n\r\n                  <div class=\" my-4\">\r\n                    <button class=\"btn btn-secondary btn-lg btn-block text-18 font-weight-500  \" @click=\"phone?sendOTP():''\">Send OTP</button>\r\n                  </div>\r\n                </div>\r\n                <div class=\"my-4pt-3\"  v-else>\r\n  \r\n                    <div class=\"title \">\r\n                      \r\n                      <p class=\"info text-center\">An otp has been sent to {{phone}}</p>\r\n                      \r\n                    </div>\r\n                    <div class=\"otp-input-fields\">\r\n                      <input type=\"number\" class=\"otp__digit otp__field__1\" id=\"otp1\" @keydown=\"$event.target.value.length>0?$event.target.value='':''\" @keyup=\"setOtp(1)\">\r\n                      <input type=\"number\" class=\"otp__digit otp__field__2\" id=\"otp2\" @keydown=\"$event.target.value.length>0?$event.target.value='':''\" @keyup=\"setOtp(2)\">\r\n                      <input type=\"number\" class=\"otp__digit otp__field__3\" id=\"otp3\" @keydown=\"$event.target.value.length>0?$event.target.value='':''\" @keyup=\"setOtp(3)\">\r\n                      <input type=\"number\" class=\"otp__digit otp__field__4\" id=\"otp4\" @keydown=\"$event.target.value.length>0?$event.target.value='':''\" @keyup=\"setOtp(4)\">\r\n                    </div>\r\n                  <div class=\"text-center my-4\">\r\n                    <input type=\"hidden\"  v-model=\"otp\" >\r\n                    <button class=\"btn btn-secondary btn-lg btn-block text-18 font-weight-500\" id=\"verify_btn\" @click=\"otp?verifyOTP():''\">Verify OTP</button>\r\n                    <div class=\"my-2 text-success\" @click=\"section='phone'\">change phone</div>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n    </div>\r\n  </main>\r\n\r\n\r\n\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    metaInfo: {\r\n      title: \"Home\"\r\n    },\r\n    data() {\r\n      return {\r\n        current_code:'+91',\r\n        section:'phone',\r\n        phone:'',\r\n        otp:'',\r\n        current_otp:'',\r\n      };\r\n    },\r\n    mounted(){\r\n\r\n    },\r\n    methods : {\r\n      sendOTP() {\r\n        if(this.phone.length!=10){\r\n          this.showAlert('Enter 10 digit number!')\r\n          return false\r\n        }\r\n        var formdata = new FormData()\r\n        formdata.append('phone',this.phone)\r\n        formdata.append('device_type','aeo')\r\n        fetch(this.api_url+'/employee/send_otp/', {\r\n            method : 'post',\r\n            body : formdata\r\n        })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .then((jsonData) => {\r\n          if(jsonData.success){\r\n            this.section = 'opt'\r\n            this.current_otp = jsonData.device_code\r\n            this.$root.user_type = jsonData.user_type\r\n            // alert(jsonData.otp)\r\n            document.getElementById('otp1').focus()\r\n            this.showAlert(jsonData.message)\r\n          }else{\r\n            this.showAlert(jsonData.message)\r\n          }\r\n        })\r\n      },\r\n      setOtp(position){\r\n        var value = document.getElementById('otp'+position).value\r\n        if(value){\r\n          if(position==4){\r\n            document.getElementById('verify_btn').focus()\r\n          }else{\r\n            document.getElementById('otp'+(position+1)).focus()\r\n          }\r\n        }\r\n        this.otp = ''\r\n        for(var o=1;o<=4;o++){\r\n          this.otp = this.otp+document.getElementById('otp'+o).value\r\n        }\r\n      },\r\n      verifyOTP() {\r\n        var formdata = new FormData()\r\n        formdata.append('otp',this.otp)\r\n        formdata.append('phone',this.phone)\r\n        formdata.append('device_code',this.current_otp)\r\n        formdata.append('user_type',this.$root.user_type)\r\n        fetch(this.api_url+'/employee/verify_otp/', {\r\n            method : 'post',\r\n            body : formdata\r\n        })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .then((jsonData) => {\r\n          var user_data = jsonData.data\r\n          if(jsonData.success && user_data.access){\r\n            if(user_data.user_details.is_aeo){\r\n              localStorage.setItem(\"userInfo\", JSON.stringify(user_data));\r\n              localStorage.setItem(\"inspectorInfo\", JSON.stringify(jsonData.inspector));\r\n              this.$root.token = user_data.access\r\n              if(this.$root.token==''){\r\n                  localStorage.removeItem(\"userInfo\");\r\n              }else{\r\n                  var self = this\r\n                  setTimeout(function(){\r\n                      window.location.href = '/';\r\n                  },500);\r\n              }\r\n            }else{\r\n              this.showAlert('No AEO officer found with the given credentials')\r\n              localStorage.removeItem(\"userInfo\");\r\n            }\r\n          }else{\r\n            this.showAlert(jsonData.message)\r\n            localStorage.removeItem(\"userInfo\");\r\n          }\r\n        })\r\n\r\n      },\r\n    }\r\n  };\r\n</script>\r\n<style scoped>\r\n\r\n@import './style/style.css';\r\n.input-group-append{\r\n  padding: 0 15px!important;\r\n} \r\n.input-group-text, .input-group .form-control{\r\n  height:50px;\r\n}\r\n.input-group>.custom-file, .input-group>.custom-select, .input-group>.form-control{\r\n  position: relative;\r\n  -webkit-box-flex: 1;\r\n  -ms-flex: 1 1 auto;\r\n  flex: 1 1 auto;\r\n  width: 1%;\r\n  margin-bottom: 0;\r\n}\r\n\r\n\r\n.form-control {\r\n    border: initial;\r\n    outline: initial !important;\r\n    background: #eaf6ff29;\r\n   \r\n}\r\n::placeholder{\r\n  color:#383838;\r\n}\r\n.form-control:focus {\r\n \r\n    box-shadow: 0 0 0 0.2rem rgb(33 150 243 / 20%);\r\n}\r\n\r\n\r\n\r\n.title {\r\n \r\n  margin: auto;\r\n  text-align: center;\r\n  font-family: \"Poppins\", sans-serif;\r\n}\r\n.title h3 {\r\n  font-weight: bold;\r\n}\r\n.title p {\r\n  font-size: 12px;\r\n  color: #4caf50;\r\n  text-align:left;\r\n  margin-bottom: 7px;\r\n}\r\n.title p.msg {\r\n  color: initial;\r\n  text-align: initial;\r\n  font-weight: bold;\r\n}\r\n\r\n.otp-input-fields {\r\n  margin: auto;\r\n  background-color: transparent;\r\n  \r\n  max-width: 400px;\r\n  width: auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  \r\n}\r\n.otp-input-fields input {\r\n  height: 40px;\r\n  width: 40px;\r\n  background-color: transparent;\r\n  border-radius: 4px;\r\n  border: 1px solid #2f8f1f;\r\n  text-align: center;\r\n  outline: none;\r\n  font-size: 16px;\r\n  /* Firefox */\r\n}\r\n.otp-input-fields input::-webkit-outer-spin-button, .otp-input-fields input::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n.otp-input-fields input[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n.otp-input-fields input:focus {\r\n  border-width: 2px;\r\n  border-color: #287a1a;\r\n  font-size: 20px;\r\n}\r\n\r\n.result {\r\n  max-width: 400px;\r\n  margin: auto;\r\n  padding: 24px;\r\n  text-align: center;\r\n}\r\n.result p {\r\n  font-size: 24px;\r\n  font-family: \"Antonio\", sans-serif;\r\n  opacity: 1;\r\n  transition: color 0.5s ease;\r\n}\r\n.result p._ok {\r\n  color: green;\r\n}\r\n.result p._notok {\r\n  color: red;\r\n  border-radius: 3px;\r\n}\r\n.btn-secondary {\r\n  \r\n    height:50px;\r\n}\r\n\r\n\r\n</style>\r\n"]}]}