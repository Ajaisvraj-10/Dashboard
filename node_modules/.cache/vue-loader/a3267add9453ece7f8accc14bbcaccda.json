{"remainingRequest":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\src\\views\\app\\m1\\qr-login.vue?vue&type=style&index=0&id=dcf40c20&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\src\\views\\app\\m1\\qr-login.vue","mtime":1694766816982},{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\css-loader\\dist\\cjs.js","mtime":1691816385830},{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1691816392152},{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\postcss-loader\\src\\index.js","mtime":1691816389712},{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1691816385086},{"path":"C:\\Users\\HP\\OneDrive\\Desktop\\Videopages\\videopages-frontent\\node_modules\\vue-loader\\lib\\index.js","mtime":1691816392152}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgJy9tMS9zdHlsZS9zdHlsZS5jc3MnOwpAaW1wb3J0ICcvbTEvc3R5bGUvbG9hZC1zdHlsZS5jc3MnOwoKCg=="},{"version":3,"sources":["qr-login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA","file":"qr-login.vue","sourceRoot":"src/views/app/m1","sourcesContent":["\r\n<template>\r\n  <div class=\"main-content capcee-login\">\r\n    \r\n    <div class=\"site-wrapper\"> \r\n        <div class=\"flex-align w-100 p-3 \">\r\n          <img src=\"/all-images/logo.png\" style=\"max-width:120px;max-height:60px;\">\r\n          <router-link :to=\"edit?'':{name:'home'}\">\r\n            <img src=\"/all-images/close.png\" style=\"width:20px;opacity:.5;\">\r\n          </router-link>\r\n        </div>\r\n        <div class=\"login-am\" v-if=\"crnt_tab=='login'\">\r\n            <div id=\"signInBorder\" class=\"signin-2\">\r\n              <div class=\"text-left mb-4\">\r\n                <h5 class=\" login-head\">\r\n                  Login Account\r\n                </h5>\r\n                <h6 class=\"text-white\">Welcome back. Good to see you again!</h6>\r\n                <!--<h4 class=\" text-18 mb-4\" style=\"line-height:20px;\" @click=\"selectContent(blocks[1])\" :class=\"blocks[1].is_edit?'selected_content':''\" :id=\"'blocks_'+blocks[1].id\" v-show=\"blocks[1].status\">\r\n                  {{blocks[1].value}}\r\n                </h4>-->\r\n              </div>\r\n              \r\n              <!--<div class=\"google-login\">\r\n                <div class=\"google-login-child\">\r\n                   Scan QR Code\r\n                </div>\r\n              </div>-->\r\n              <form ref=\"loginUser\" @submit.prevent=\"loginUser()\">\r\n                <div class=\"text-center scanner border-light\">\r\n                  <qr-code \r\n                    :text=\"base_url+'/sign-in?theme=m1&device_token='+device_token+'&login='+login_code\"\r\n                    size=\"400\"\r\n                    color=\"#1c1c1c\"\r\n                    bg-color=\"#f7f9fa\" \r\n                    error-level=\"L\"\r\n                    style=\"padding: 10px; border: 2px solid lightgray;border-radius:14px;\"\r\n                    >\r\n                  </qr-code>\r\n                  <h6 class=\"mt-2 text-white\">Scan qr code and your account</h6>\r\n                </div>\r\n                <div class=\"mt-2\">\r\n                  <button type=\"button\" class=\"btn btn-light foucs-btn w-100\" style=\"opacity: .8;font-weight:600;min-height:40px;color:#000;\">{{login_code}}</button>\r\n                </div>\r\n              </form>\r\n             \r\n\r\n            \r\n\r\n            </div>\r\n        </div>\r\n    \r\n    </div>\r\n\r\n    \r\n    \r\n    \r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: ['edit','blocks','current_block'],\r\n  components:{\r\n    \r\n  },\r\n  data() {\r\n    return {\r\n      start:false,\r\n      current_page:{},\r\n      menu_click:false,\r\n      crnt_tab:\"login\",\r\n      device_token:'',\r\n      login_code : '',\r\n      error_count:0,\r\n    };\r\n  },\r\n  mounted(){\r\n    if(this.edit){\r\n      this.start = true\r\n    }else{\r\n        this.edit=false\r\n        this.blocks = [{},{},{}]\r\n        this.getPage()\r\n    }\r\n    \r\n    if(localStorage.getItem(\"device_token\")){\r\n      if(localStorage.getItem(\"device_token\").length>0){\r\n        this.device_token = localStorage.getItem(\"device_token\")\r\n      }\r\n    }\r\n    if(this.device_token==''){\r\n      this.device_token = this.generateToken()\r\n      localStorage.setItem(\"device_token\", this.device_token)\r\n    }\r\n    this.setLoginCode()\r\n  },\r\n  methods: {\r\n    generateToken() {\r\n      var token = Math.random().toString(36).slice(2);\r\n      return token\r\n    },\r\n    setLoginCode() {\r\n      var formdata = new FormData()\r\n      formdata.append('device_token',this.device_token)\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Bearer \"+this.$root.admin_token);\r\n      fetch(this.api_url+'/users/tv_login/', {\r\n          method : 'post',\r\n          headers: headers,\r\n          body : formdata\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        if(jsonData.success){\r\n          this.login_code = jsonData.code\r\n          this.checkLogin2()\r\n        }else{\r\n          this.showAlert('Something Wrong!','red')\r\n        }\r\n      })\r\n    },\r\n    checkLogin2() {\r\n      var formdata = new FormData()\r\n      formdata.append('device_token',this.device_token)\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Bearer \"+this.$root.admin_token);\r\n      fetch(this.api_url+'/users/tv_login/', {\r\n          method : 'put',\r\n          headers: headers,\r\n          body : formdata\r\n      })\r\n      .then((response) => {\r\n          if(response.status!=200 && this.error_count<5){\r\n            var self = this\r\n            setTimeout(function(){\r\n              self.error_count++\r\n              self.checkLogin2()\r\n            },2000)\r\n          }else{\r\n            return response.json()\r\n          }\r\n      })\r\n      .then((jsonData) => {\r\n        if(jsonData.success){\r\n          this.error_count = 0\r\n          if(jsonData.is_logged){\r\n            var userdata = jsonData.user\r\n            if(userdata.access){\r\n              localStorage.setItem(\"userInfo\", JSON.stringify(userdata));\r\n              this.$root.token = userdata.access\r\n              if(this.$root.token==''){\r\n                  localStorage.removeItem(\"userInfo\");\r\n              }else{\r\n                window.location.href = '/';\r\n              }\r\n            }else{\r\n              this.showAlert('Something Wrong!','red')\r\n              localStorage.removeItem(\"userInfo\");\r\n            }\r\n          }else{\r\n            var self = this\r\n            setTimeout(function(){\r\n              self.checkLogin2()\r\n            },5000)\r\n          }\r\n        }else{\r\n          this.showAlert('Something Wrong!','red')\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        alert(error)\r\n        var self = this\r\n        setTimeout(function(){\r\n          self.checkLogin2()\r\n        },2000)\r\n      });\r\n\r\n    },\r\n    getPage() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Bearer \"+this.$root.admin_token);\r\n      fetch(this.api_url+'/content/pages_contents/?theme='+theme_name+'&page=/sign-in', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.current_page = jsonData\r\n        this.blocks = jsonData.blocks\r\n        this.start = true\r\n      })\r\n    },\r\n    selectContent(block){\r\n        if(this.edit){\r\n            this.blocks.forEach(function(blk){\r\n                blk.is_edit = false\r\n            })\r\n            block.is_edit=true\r\n            this.$emit('selectedContent', block)\r\n        }\r\n    },\r\n  }\r\n\r\n};\r\n</script>\r\n<style scoped>\r\n  \r\n  @import '/m1/style/style.css';\r\n  @import '/m1/style/load-style.css';\r\n\r\n\r\n</style>\r\n<style>\r\n\r\n.login-logo{\r\n    width:150px!important;\r\n}\r\n\r\n.capcee-login .site-wrapper {\r\n     background: #0f171e!important;\r\n       height:100vh;\r\n       overflow:auto;\r\n     \r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items:center;\r\n}\r\n\r\n\r\n#signInBorder{\r\n \r\n  margin: 0 auto;\r\n \r\n  width: 380px;\r\n  min-height: calc(100vh - 80px);\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n\r\n}\r\n\r\n.capcee-login h6{\r\n  \r\n    font-size:13px;\r\n    color:black;\r\n\r\n\r\n}\r\n.capcee-login a{\r\n    font-weight:600;\r\n    font-size:12px;\r\n\r\n    \r\n}\r\n.capcee-login h2 {\r\n   color: rgb(134, 134, 134);\r\n   font-weight: normal;\r\n   letter-spacing: 1px;\r\n   font-size: 11.5px;\r\n   width: 340px;\r\n   text-align: center;\r\n   border-top: 1px solid rgba(0, 0, 0, 0.1);\r\n   border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n   line-height: 0.1em;\r\n   margin: 10px 0 20px;\r\n   margin-bottom: 5px;\r\n}\r\n\r\n.capcee-login h2 span {\r\n    background:#fff;\r\n    padding:0 10px;\r\n}\r\n\r\n\r\n.back-btn{\r\n\r\n  width:20px!important;\r\n  opacity:.6;\r\n\r\n}\r\n.login-head{\r\n  margin-bottom:10px;\r\n  font-weight:500;\r\n  font-size:24px;\r\n}\r\n\r\n.\r\n@media (max-width: 990px) {\r\n  .videofy-signin-logo{\r\n    width: 100%;\r\n  }\r\n}\r\n@media (max-width: 520px) {\r\n\r\n  .back-btn{\r\n  \r\n\r\n  width:15px!important;\r\n}\r\n.login-head{\r\n \r\n  font-size:20px;\r\n}\r\n}\r\n\r\n@media (max-width: 420px) {\r\n  #signInBorder {\r\n \r\n    width: 360px;\r\n  }\r\n   .capcee-login input {\r\n \r\n    width: 360px;\r\n    font-size:16px;\r\n  }\r\n    #capcee {\r\n \r\n    width: 360px;\r\n  }\r\n  .login-opt{\r\n  font-size:11px!important;\r\n  }\r\n  .login-opt span{\r\n  font-size:11px!important;\r\n  }\r\n  .login-opt a{\r\n  font-size:11px!important;\r\n  }\r\n}\r\n@media (max-width: 380px) {\r\n  #signInBorder {\r\n \r\n    width: 330px;\r\n  }\r\n   .capcee-login input {\r\n    height:40px;\r\n    width: 330px;\r\n  }\r\n    #capcee {\r\n \r\n    width: 330px;\r\n  }\r\n}\r\n.scanner img{\r\n  border-radius:8px;\r\n}\r\n</style>\r\n"]}]}