{"remainingRequest":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\fpo\\inspection-form.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\vue_projects\\biowin\\src\\views\\app\\oodo\\fpo\\inspection-form.vue","mtime":1676397720396},{"path":"E:\\vue_projects\\biowin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KDQpAaW1wb3J0ICcuLi9zdHlsZXMvc3R5bGUuY3NzJzsNCg0KLmJ0bi1vdXRsaW5lLXN1Y2Nlc3M6bm90KDpkaXNhYmxlZCk6bm90KC5kaXNhYmxlZCkuYWN0aXZlOm50aC1jaGlsZCgyKXsNCiAgDQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMGQwZDsNCiAgICBib3JkZXItY29sb3I6ICNmZjBkMGQ7DQp9DQoueWVzX29yX25vX2J0biBsYWJlbC5idG4uYnRuLW91dGxpbmUtc3VjY2VzczpudGgtY2hpbGQoMikgew0KICANCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZmYwZDBkOw0KfQ0KDQo="},{"version":3,"sources":["inspection-form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA80BA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"inspection-form.vue","sourceRoot":"src/views/app/oodo/fpo","sourcesContent":["<template>\r\n  <div class=\"main-content create-main\">\r\n    <form ref=\"dataForm\" @submit.prevent=\"dataForm()\">\r\n      <div>\r\n         <div class=\"d-flex mb-2 align-items-center  justify-content-between\">\r\n              <slot name=\"header\">\r\n                 <h5 class=\"mb-0\"><span class=\"text-success\">Inspection</span> / {{slugToWord(action)}}</h5>\r\n                    \r\n              </slot>\r\n              <div class=\"d-flex\">\r\n                <b-button variant=\"success\" type=\"submit\" class=\" px-3 py-1  d-sm-block mx-1\"\r\n                  v-if=\"action!='view'\">{{tab_key==4?'Save & Finish':'Save & Next'}}\r\n                </b-button>\r\n                 <b-button variant=\"primary\" type=\"button\" class=\" px-3 py-1  d-sm-block mx-1\"\r\n                  @click=\"action='edit'\" v-if=\"action=='view'\">Edit\r\n                </b-button>\r\n                <b-button variant=\"primary\" type=\"button\" class=\" px-3 py-1  d-sm-block mx-1\"\r\n                  @click=\"action='view'\" v-else>View\r\n                </b-button>\r\n                <router-link to=\"/app/fpo/inspections\">\r\n                  <b-button variant=\"danger\" class=\" px-3 py-1  d-sm-block mx-1\"\r\n                    >Discard\r\n                  </b-button>\r\n                </router-link>\r\n              </div>\r\n             \r\n          </div>\r\n          <div class=\" my-3 border-top\"></div>\r\n      </div>\r\n      <!-- <div class=\"wrapper\"> -->\r\n      <b-tabs card v-model=\"tab_key\">\r\n        <b-tab title=\"Inspection\" :active=\"tab_key==0\">\r\n          <b-row class=\"inspection-scroll pt-1\">\r\n            <b-col lg=\"6\" xl=\"6\">\r\n              <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n                <div class=\"row\">\r\n                  <div class=\"o_thread_composer  \">\r\n                     <div class=\"o_composer_container my-2 row mx-0\">\r\n                        <div class=\" col-md-12\">\r\n                          <div class=\"user-info pt-2\">\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> AEO: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"aeo\" :disabled=\"action=='view'\" v-model=\"form_data.aeo\" @change=\"form_data.type=1;change_select('type')\">\r\n                                  <option v-for=\"aeo in aeos\" :value=\"aeo.id\">{{aeo.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> FPO: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"type\" :disabled=\"action=='view'\" v-model=\"form_data.type\" @change=\"change_select('type')\">\r\n                                  <option v-for=\"type in types\" :value=\"type.id\">{{type.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> ICS: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"ics\" :disabled=\"action=='view'\" v-model=\"form_data.ics\" @change=\"change_select('ics')\">\r\n                                  <option v-for=\"ics in icss\" :value=\"ics.id\">{{ics.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> VFC: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"vfc\" :disabled=\"action=='view'\" v-model=\"form_data.vfc\" @change=\"change_select('vfc')\">\r\n                                  <option v-for=\"vfc in vfcs\" :value=\"vfc.id\">{{vfc.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> Inspector: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"internal_inspector\" :disabled=\"action=='view'\" v-model=\"form_data.internal_inspector\" @change=\"change_select('inspector')\">\r\n                                <option v-for=\"inspector in inspectors\" :value=\"inspector.id\">{{inspector.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\">Inspector Phone: </span>\r\n                              <input placeholder=\"Phone\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.inspector_detail.phone\" readonly>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n                </div>\r\n                <hr>\r\n              </b-card>\r\n            </b-col>\r\n            <b-col lg=\"6\" xl=\"6\">\r\n              <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n                <div class=\"row\">\r\n                  <div class=\"o_thread_composer  \">\r\n                     <div class=\"o_composer_container my-2 row mx-0\">\r\n                        <div class=\" col-md-12\">\r\n                          <div class=\"user-info pt-2\">\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\"> Farmer: </span>\r\n                              <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"farmer\" :disabled=\"action=='view'\" v-model=\"form_data.farmer\" @change=\"change_select('farmer')\">\r\n                                  <option v-for=\"farmer in farmers\" :value=\"farmer.id\">{{farmer.name}}</option>\r\n                              </select>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\">Farmer Code: </span>\r\n                              <input placeholder=\"Farmer Code\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.farmer_detail.farmer_code\" readonly>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\">Status: </span>\r\n                              <input placeholder=\"Status\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.farmer_detail.status\" readonly>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\">Year: </span>\r\n                              <input type=\"text\" name=\"year\" v-model=\"form_data.year\" class=\"ui-autocomplete-input\" autocomplete=\"off\" readonly>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\" v-if=\"form_data.date_of_previous_inspection\">\r\n                              <span style=\"width:120px;\">Date of Previous Inspection: </span>\r\n                              <input placeholder=\"Phone\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.date_of_previous_inspection\" name=\"date_of_previous_inspection\" readonly>\r\n                            </div>\r\n                            <div class=\"o_thread_search_input\">\r\n                              <span style=\"width:120px;\">Date of Inspection: </span>\r\n                              <input placeholder=\"Phone\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.date_of_inspection\" name=\"date_of_inspection\" readonly>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n                </div>\r\n                <hr>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </b-tab>\r\n        <b-tab title=\"Land Details\" :disabled=\"!id\">\r\n          <b-row class=\"inspection-scroll pt-1\" v-if=\"tab_key==1\">\r\n            <b-col lg=\"12\" xl=\"12\">\r\n              <b-card  header-bg-variant=\"transparent\">\r\n                <div>\r\n                  <div class=\"ul-contact-detail__timeline\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-md-1 px-2\"></div>\r\n                      <div class=\" col-md-8\">\r\n                        <div class=\"user-info pt-2\">\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Survey Number: </span>\r\n                            <input placeholder=\"Survey Number\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.survey_number\" name=\"survey_number\" required :readonly=\"action=='view'\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Organic Area (ha): </span>\r\n                            <input placeholder=\"Organic Area\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.organic_area\" name=\"organic_area\" required :readonly=\"action=='view'\" @input=\"totalLands()\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Conventional Land Area(ha): </span>\r\n                            <input placeholder=\"Conventional Land Area\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.conventional_land_area\" name=\"conventional_land_area\" required :readonly=\"action=='view'\" @input=\"totalLands()\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Wet Land(ha): </span>\r\n                            <input placeholder=\"Wet Land\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.wet_land\" name=\"wet_land\" required :readonly=\"action=='view'\" @input=\"totalLands()\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Other Land(ha): </span>\r\n                            <input placeholder=\"Other Land\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.other_land\" name=\"other_land\" required :readonly=\"action=='view'\" @input=\"totalLands()\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Total Farming Area(ha): </span>\r\n                            <input placeholder=\"Total Farming Area\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.lands.total_farming_area\" name=\"total_farming_area\" required :readonly=\"action=='view'\">\r\n                          </div>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">File: </span>\r\n                            <p v-if=\"action=='view'\"> <a href=\"form_data.lands.file\" v-if=\"form_data.lands.file\">View File</a><span class=\"text-danger\" v-else>No file</span></p>\r\n                            <input type=\"file\" class=\"ui-autocomplete-input\" v-else>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <hr>\r\n                  </div>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </b-tab>\r\n        <b-tab title=\"Plant&Crops Details\" :disabled=\"!id\">\r\n          <b-row class=\"inspection-scroll pt-1\" v-if=\"tab_key==2\">\r\n            <b-col lg=\"12\" xl=\"12\">\r\n              <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n                <div>\r\n                  <div class=\"ul-contact-detail__timeline\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-md-1 px-2\">\r\n\r\n                      </div>\r\n                      <div class=\" col-md-10\">\r\n                        <!-- <div class=\"user-info pt-2\">\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Plant Year: </span>\r\n                            <input type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.plants.year\" readonly>\r\n                          </div>\r\n                        </div> -->\r\n                        <div class=\"user-info pt-5\" v-for=\"category in categories\">\r\n                          <b class=\"text-bold\" v-if=\"category.plants.length>0\">{{category.name}}</b>\r\n                          <div class=\"row px-3\" v-for=\"(plant,key) in category.plants\" v-if=\"plant.number || action!='view'\">\r\n                            <div class=\"o_thread_search_input col-md-5\">\r\n                              <div class=\"\" v-if=\"plant.plant_unit=='Area'\" style=\"width:150px;\">\r\n                                <span>{{plant.name}} {{plant.plant_unit}}: </span>\r\n                                <div class=\"pl-0\" style=\"zoom:0.7\">\r\n                                  <b-form-group class=\"yes_or_no_btn\">\r\n                                    <b-form-radio-group\r\n                                      v-model=\"plant.land_unit\"\r\n                                      :options=\"['Hectare','Acre']\"\r\n                                      button-variant=\"outline-secondary\"\r\n                                      :name=\"'land_unit'+plant.id\"\r\n                                      buttons\r\n                                    ></b-form-radio-group>\r\n                                  </b-form-group>\r\n                                </div>\r\n                              </div>\r\n                              <div v-else style=\"width:150px;\">\r\n                                <span style=\"width:150px;\">{{plant.name}} {{plant.plant_unit}}: </span>\r\n                                <input type=\"hidden\" :name=\"'land_unit'+plant.id\" value=\"Number\">\r\n                              </div>\r\n                              <input :placeholder=\"plant.approximate?'Approx: '+plant.approximate:'Enter a number'\" type=\"number\" step=\"0.1\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"plant.number\" :name=\"'number'+plant.id\" @input=\"calculateEstimation(plant)\" :readonly=\"action=='view'\"> \r\n                            </div>\r\n                            <div class=\"o_thread_search_input\" v-for=\"(product,key2) in plant.products\" :class=\"key2==0?'col-md-4':'col-md-3'\">\r\n                              <span style=\"width:90px;\" v-if=\"key2==0\">Estimate Qty: </span>\r\n                              <button class=\"btn btn-white append_btn_left\" type=\"button\">{{product.product_type_detail.name}}</button>\r\n                              <input :placeholder=\"plant['approximate'+product.product_type+plant.id]?'Approximate :'+plant['approximate'+product.product_type+plant.id]:''\" type=\"number\" step=\"0.1\" class=\"ui-autocomplete-input append_btn_input_left append_btn_input_right\" v-model=\"plant['estimate'+product.product_type+plant.id]\" autocomplete=\"off\" @keyup=\"checkMax(plant,product.product_type)\" :name=\"'estimate'+product.product_type+plant.id\" :readonly=\"action=='view'\" min=\"0\">\r\n                              <button class=\"btn btn-white append_btn_right\" type=\"button\">KG</button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <hr>\r\n                  </div>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </b-tab>\r\n        <b-tab title=\"Question/Answes\" :disabled=\"!id\">\r\n          <b-row class=\"inspection-scroll pt-1\" v-if=\"tab_key==3\">\r\n            <b-col lg=\"12\" xl=\"12\" v-for=\"(q_category,index) in q_categories\" :id=\"'questionAnswers'+q_category.id\" v-if=\"index==current_key || action=='view'\">\r\n              <b-card  header-bg-variant=\"transparent\" class=\"card-scroll mb-2\">\r\n                <h5 class=\"text-center\">{{q_category.name}}</h5>\r\n                <div class=\"ul-contact-detail__timeline\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-1 px-2\">\r\n                      <input type=\"hidden\" v-model=\"q_category.id\" :id=\"'q_cat_id'+current_key\">\r\n                    </div>\r\n                    <div class=\" col-md-10\">\r\n                      <div class=\"my-3\" v-for=\"question in q_category.questions\">\r\n                        <h5 class=\" pt-2\"><b>Q :</b> {{question.name}}</h5>\r\n                        <div v-if=\"question.field=='Boolean'\">\r\n                          <button v-if=\"action=='view'\" class=\"btn py-1\" :class=\"question.answers.answer=='YES'?'btn-success':'btn-danger'\">{{question.answers.answer}}</button>\r\n                          <b-form-group class=\"yes_or_no_btn\" v-else>\r\n                            <b-form-radio-group\r\n                              v-model=\"question.answers.answer\"\r\n                              :options=\"['YES','NO']\"\r\n                              button-variant=\"outline-success\"\r\n                              :name=\"'answer'+question.id\"\r\n                              buttons\r\n                            ></b-form-radio-group>\r\n                          </b-form-group>\r\n                          <input type=\"hidden\" v-model=\"question.answers.answer\" :class=\"'check_field_'+q_category.id\" required>\r\n                        </div>\r\n                        <div v-else-if=\"question.field=='Textarea'\">\r\n                          <textarea class=\"form-control2 form-control\" placeholder=\"Answer\" :name=\"'answer'+question.id\" v-model=\"question.answers.answer\" :readonly=\"action=='view'\"></textarea>\r\n                        </div>\r\n                        <div v-else-if=\"question.field=='File'\">\r\n                           <div class=\"prepend-1\">\r\n                             <b-input-group>\r\n                                <input type=\"file\" class=\"form-control\" :name=\"'answer'+question.id\" :disabled=\"action=='view'\"/>\r\n                                <template #append>\r\n                                 Browse\r\n                                </template>\r\n                              </b-input-group>\r\n                            </div>\r\n                        </div>\r\n                        <div v-if=\"question.remark\">\r\n                          <h5 class=\"py-2\">{{question.remark}}</h5>\r\n                          <input type=\"text\" class=\"ui-autocomplete-input w-50 px-2\" autocomplete=\"off\" placeholder=\"Remark\" v-model=\"question.answers.remark\" :name=\"'remark'+question.id\" :readonly=\"action=='view'\" style=\"height:40px\">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </b-tab>\r\n        <b-tab title=\"Digital Sign\" :disabled=\"!id\">\r\n          <b-row class=\"inspection-scroll pt-1\" v-if=\"tab_key==4\">\r\n            <b-col lg=\"12\" xl=\"12\">\r\n              <b-card  header-bg-variant=\"transparent\" class=\"card-scroll\">\r\n                <div class=\"ul-contact-detail__timeline\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-1 px-2\">\r\n\r\n                    </div>\r\n                    <div class=\" col-md-10\">\r\n                      <div class=\"my-3 \">\r\n                        <div class=\"mb-4\">\r\n                          <b-form-group class=\"yes_or_no_btn\">\r\n                            <b-form-radio-group\r\n                              v-model=\"form_data.verifyer\"\r\n                              :options=\"['Farmer','Other']\"\r\n                              button-variant=\"outline-info\"\r\n                              name=\"verifyer\"\r\n                              buttons\r\n                            ></b-form-radio-group>\r\n                          </b-form-group>\r\n                        </div>\r\n                        <div class=\"o_thread_search_input\" v-if=\"form_data.verifyer=='Farmer'\">\r\n                          <span style=\"width:120px;\">Farmer: </span>\r\n                          <input placeholder=\"Name\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.farmer_detail.name\" name=\"verifyer_name\" required :readonly=\"action=='view'\">\r\n                        </div>\r\n                        <div v-else>\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\">Name: </span>\r\n                            <input placeholder=\"Name\" type=\"text\" class=\"ui-autocomplete-input\" autocomplete=\"off\" v-model=\"form_data.verifyer_name\" name=\"verifyer_name\" required :readonly=\"action=='view'\">\r\n                          </div>\r\n\r\n                          <div class=\"o_thread_search_input\">\r\n                            <span style=\"width:120px;\"> Realtion: </span>\r\n                            <select class=\"ui-autocomplete-input w-100 mx-1\" name=\"relationship\" :disabled=\"action=='view'\" v-model=\"form_data.relationship\">\r\n                              <option v-for=\"relationsh in ['Wife','Husband','Son','Daughter','Parent','Other Family Member']\" :value=\"relationsh\">{{relationsh}}</option>\r\n                            </select>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"o_thread_search_input mt-4\">\r\n                          <span style=\"width:120px;\"> Photo: </span>\r\n                          <p v-if=\"form_data.photo\">\r\n                            <img :src=\"form_data.photo\" width=\"150\" height=\"auto\" class=\"rounded\" style=\"object-fit:cover;\">\r\n                          </p>\r\n                        </div>\r\n                        <div class=\"o_thread_search_input\" v-if=\"action!='view'\">\r\n                          <span style=\"width:120px;\"> </span>\r\n                          <label class=\"w-100\">\r\n                           <div class=\"prepend-1 camera-input\" >\r\n                             <b-input-group style=\"flex-direction: column;\">\r\n                                <input  type=\"file\" class=\"form-control text-center w-100\" placeholder=\"Browse\" name=\"photo\" required />\r\n                                <template #append>\r\n                                 Upload Photo\r\n                                </template>\r\n                              </b-input-group>\r\n                            </div>\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </b-tab>\r\n      </b-tabs>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport LocationFields from '/src/views/app/oodo/components/location_fields'\r\nexport default {\r\n  metaInfo: {\r\n    title: \"FPO - ICS\"\r\n  },\r\n  components:{\r\n    LocationFields\r\n  },\r\n  data() {\r\n    return {\r\n      form_data:{\r\n        id:null,\r\n        year:this.this_year,\r\n        type:null,\r\n        ics:null,\r\n        vfc:null,\r\n        farmer:null,\r\n        farmer_detail:{status:'',farmer_code:'',lands:{created_on:null}},\r\n        internal_inspector:null,\r\n        inspector_detail:{phone:''},\r\n        date_of_inspection:'',\r\n        lands:{total_farming_area:0, year:this.this_year},\r\n        plants:{year:this.this_year}\r\n      },\r\n      types:[],\r\n      icss:[],\r\n      vfcs:[],\r\n      farmers:[],\r\n      inspectors:[],\r\n      categories:[],\r\n      q_categories:[],\r\n      current_key:0,\r\n      current_photo:'',\r\n      aeos:[],\r\n      id:this.$route.params.id,\r\n      action:'view',\r\n      not_start:true,\r\n      tab_key:0,\r\n      active_btn:true,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$root.current_section = 'fpo'\r\n    this.action = this.$route.params.action\r\n    this.form_data.date_of_inspection = this.currentDate()\r\n    this.getInspector()\r\n    this.getFamrerTypes()\r\n    this.getAeos()\r\n    if(this.id){\r\n      this.getInspection()\r\n    }else{\r\n      this.getPlants()\r\n    }\r\n  },\r\n  methods: {\r\n    getAeos() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/employee/aeo/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.aeos = jsonData\r\n      })\r\n    },\r\n    getFamrerTypes() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/fpo/get_farmer_by_vfc/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.types = jsonData\r\n        this.not_start = false\r\n        this.change_select('type')\r\n        if(this.id){\r\n          var self = this\r\n          setTimeout(function(){\r\n            self.change_select('ics')\r\n            self.change_select('vfc')\r\n            self.change_select('farmer')\r\n            self.change_select('inspector')\r\n          },500)\r\n        }\r\n      })\r\n    },\r\n    getFarmers() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/fpo/get_farmer_by_vfc/?vfc='+this.form_data.vfc, {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.farmers = jsonData\r\n        this.not_start = false\r\n      })\r\n    },\r\n    getFarmer() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/fpo/farmers/'+this.form_data.farmer+'/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        if(!jsonData.status){\r\n          jsonData.status = 'NEW'\r\n        }\r\n        this.form_data.farmer_detail = jsonData\r\n        this.form_data.type = jsonData.fpo\r\n        this.form_data.ics = jsonData.ics\r\n        this.form_data.vfc = jsonData.vfc\r\n        var self = this\r\n        setTimeout(function(){\r\n          self.change_select('type')\r\n          self.change_select('ics')\r\n          self.change_select('vfc')\r\n          self.change_select('farmer')\r\n        },500)\r\n      })\r\n    },\r\n    getInspector() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/fpo/internal_inspector/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.inspectors = jsonData\r\n      })\r\n    },\r\n    dataForm() {\r\n      if(this.tab_key==0 || this.tab_key==4){\r\n        this.inspectionFormdata()\r\n      }else if(this.tab_key==1){\r\n        this.landFormdata()\r\n      }else if(this.tab_key==2){\r\n        this.plantFormdata()\r\n      }else if(this.tab_key==3){\r\n        this.addAnswers()\r\n      }\r\n    },\r\n    inspectionFormdata(method='POST') {\r\n      if(!this.form_data.internal_inspector){\r\n        this.showAlert('Please select an inspector!')\r\n        return false\r\n      }\r\n      var param = ''\r\n      if(this.id){\r\n        param = this.id+'/'\r\n        method = 'PUT'\r\n      }\r\n      if(this.lock_btn){\r\n        return false\r\n      }\r\n      this.lock_btn = true\r\n      this.not_start=true\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      var formdata = new FormData(this.$refs['dataForm']);\r\n      fetch(this.api_url+'/fpo/inspection/'+param, {\r\n          method : method,\r\n          headers: headers,\r\n          body: formdata\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.lock_btn = false\r\n        if(jsonData.id>0){\r\n          this.form_data = jsonData\r\n          this.id = jsonData.id\r\n          var self = this\r\n          this.getQuestions()\r\n          setTimeout(function(){\r\n            self.tab_key++\r\n          },400)\r\n          this.showAlert('Saved Successfully!')\r\n        }else{\r\n          this.showAlert('Something Wrong!')\r\n        }\r\n      })\r\n    },\r\n    getInspection() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/fpo/inspection/'+this.id+'/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.form_data = jsonData\r\n        this.getPlants()\r\n        this.getQuestions()\r\n      })\r\n    },\r\n    totalLands(){\r\n      var total = 0\r\n      if(this.form_data.lands.organic_area)total = total+parseFloat(this.form_data.lands.organic_area);\r\n      if(this.form_data.lands.conventional_land_area)total = total+parseFloat(this.form_data.lands.conventional_land_area);\r\n      if(this.form_data.lands.wet_land)total = total+parseFloat(this.form_data.lands.wet_land);\r\n      if(this.form_data.lands.other_land)total = total+parseFloat(this.form_data.lands.other_land);\r\n      this.form_data.lands.total_farming_area = total\r\n    },\r\n    landFormdata(method='POST') {\r\n      var param = ''\r\n      if(this.form_data.lands.id){\r\n        method = 'PUT'\r\n        param = this.form_data.lands.id+'/'\r\n      }\r\n      var formdata = new FormData(this.$refs['dataForm'])\r\n      formdata.append(\"farmer\",this.form_data.farmer)\r\n      formdata.append(\"inspection\",this.form_data.id)\r\n      if(this.lock_btn){\r\n        return false\r\n      }\r\n      this.lock_btn = true\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/land_details/'+param, {\r\n          method : method,\r\n          body : formdata,\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.lock_btn = false\r\n        if(jsonData.id>0){\r\n          this.tab_key++\r\n          this.showAlert('Saved Successfully!')\r\n        }else{\r\n          this.showAlert('Something Wrong!')\r\n        }\r\n      })\r\n    },\r\n    plantFormdata(method='POST') {\r\n      var param = ''\r\n      if(this.form_data.plants.id){\r\n        method = 'PUT'\r\n        param = this.form_data.plants.id+'/'\r\n      }\r\n      var formdata = new FormData(this.$refs['dataForm'])\r\n      formdata.append(\"farmer\",this.form_data.farmer)\r\n      formdata.append(\"inspection\",this.form_data.id)\r\n      if(this.lock_btn){\r\n        return false\r\n      }\r\n      this.lock_btn = true\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/plants/'+param, {\r\n          method : method,\r\n          body : formdata,\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.lock_btn = false\r\n        if(jsonData.id>0){\r\n          this.tab_key++\r\n          this.showAlert('Saved Successfully!')\r\n        }else{\r\n          this.showAlert('Something Wrong!')\r\n        }\r\n      })\r\n    },\r\n    getPlants() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token);\r\n      fetch(this.api_url+'/fpo/plant_categories/', {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        var self = this\r\n        jsonData.forEach(function(category,key1){\r\n          category.plants.forEach(function(plant,key2){\r\n            jsonData[key1].plants[key2]['number'] = ''\r\n            plant.products.forEach(function(product,key3){\r\n              jsonData[key1].plants[key2]['estimate'+product.product_type+plant.id] = ''\r\n              jsonData[key1].plants[key2]['land_unit'] = 'Number'\r\n              if(plant.plant_unit=='Area'){\r\n                jsonData[key1].plants[key2]['land_unit'] = 'Hectare'\r\n              }\r\n              self.setEstimate(plant,product)\r\n            })\r\n            if(plant.name=='Robusta Plant' && plant.number==''){\r\n              jsonData[key1].plants[key2]['approximate'] = self.form_data.lands.organic_area*1125\r\n              self.calculateEstimation(plant)\r\n            }\r\n          })\r\n        })\r\n        this.categories = jsonData\r\n      })\r\n    },\r\n    calculateEstimation(plant){\r\n      if(plant.number > plant.approximate && plant.approximate){\r\n        plant.number = ''\r\n      }\r\n      plant.products.forEach(function(product,key){\r\n        plant['approximate'+product.product_type+plant.id] = plant.number * product.constant\r\n      })\r\n      this.checkMax(plant)\r\n    },\r\n    checkMax(plant,product_type=null){\r\n      var dry = 0\r\n      var fresh = 0\r\n      var is_input = document.getElementById('check_field_plant'+plant.id)\r\n      if(is_input){\r\n        is_input.style.border = '1px solid #eff0f6'\r\n      }\r\n      plant.products.forEach(function(product,key){\r\n        if(plant.name=='Robusta Plant'){\r\n          if(product.product_type==1){\r\n            fresh = plant['estimate'+product.product_type+plant.id]\r\n          }else if(product.product_type==2){\r\n            dry = plant['estimate'+product.product_type+plant.id]\r\n          }\r\n        }\r\n        if(plant['estimate'+product.product_type+plant.id] > plant['approximate'+product.product_type+plant.id] && plant['approximate'+product.product_type+plant.id]!=0){\r\n          plant['estimate'+product.product_type+plant.id] = ''\r\n        }\r\n        if(!plant.number){\r\n          plant['estimate'+product.product_type+plant.id] = ''\r\n          if(is_input){\r\n            if(is_input.value==''){\r\n              is_input.style.border = '1px red solid'\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if(plant.name=='Robusta Plant' && product_type && product_type==2){\r\n        if(dry){\r\n          fresh = 280/100*dry\r\n          if(plant['estimate2'+plant.id]!=''){\r\n            plant['estimate1'+plant.id] = this.decimalNumber(fresh)\r\n          }else{\r\n            plant['estimate1'+plant.id] = ''\r\n          }\r\n        }else{\r\n          plant['estimate1'+plant.id] = ''\r\n        }\r\n      }\r\n    },\r\n    setEstimate(plant,product){\r\n      if(this.action == 'edit'){\r\n        var plants = this.form_data.plants\r\n        plants.forEach(function(val){\r\n          if(product.id == val.product){\r\n            plant['number'] = val.number\r\n            plant['estimate'+product.product_type+plant.id] = val.estimate\r\n          }\r\n        })\r\n      }\r\n    },\r\n    getQuestions() {\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      fetch(this.api_url+'/employee/add_answers/?inspection='+this.id, {\r\n          method : 'get',\r\n          headers: headers,\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        jsonData.forEach(function(category,key1){\r\n          category.questions.forEach(function(question,key2){\r\n            if(!question.answers){\r\n              jsonData[key1].questions[key2]['answers']['answer'] = ''\r\n              jsonData[key1].questions[key2]['answers']['remark'] = ''\r\n            }\r\n          })\r\n        })\r\n        this.q_categories = jsonData\r\n      })\r\n    },\r\n    addAnswers() {\r\n      var cat_id = document.getElementById('q_cat_id'+this.current_key).value\r\n      var is_input = document.getElementsByClassName('check_field_'+cat_id)\r\n      var not_next = false\r\n      for(var i=0;i<is_input.length;i++){\r\n        is_input[i].style.border = 'none'\r\n        if(is_input[i].value==''){\r\n          // is_input[i].style.border = '1px red solid'\r\n          not_next = true\r\n        }\r\n      }\r\n      if(not_next){\r\n        this.showAlert('Please select an option!')\r\n        return false\r\n      }\r\n      var headers = new Headers();\r\n      headers.append(\"Authorization\", \"Token \"+this.$root.token)\r\n      var formdata = new FormData(this.$refs['dataForm']);\r\n      formdata.append('inspection',this.id)\r\n      formdata.append('category',cat_id)\r\n      this.active_btn = false\r\n      fetch(this.api_url+'/employee/add_answers/', {\r\n          method : 'post',\r\n          headers: headers,\r\n          body: formdata\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        if((this.current_key+1)<this.categories.length){\r\n          this.current_key=this.current_key+1\r\n          this.active_btn = true\r\n          this.showAlert('Saved Successfully!')\r\n        }else{\r\n          this.showAlert('Saved Successfully!')\r\n          this.tab_key++\r\n        }\r\n      })\r\n    },\r\n    change_select(type){\r\n      var value = ''\r\n      var form_data = this.form_data\r\n      var self = this\r\n      if(type=='type'){\r\n        value = form_data.type\r\n        this.types.forEach(function(list){\r\n          if(list.id==value){\r\n            self.icss = list.ics\r\n          }\r\n        })\r\n      }else if(type=='ics'){\r\n        value = form_data.ics\r\n        this.icss.forEach(function(list){\r\n          if(list.id==value){\r\n            self.vfcs = list.vfc\r\n          }\r\n        })\r\n      }else if(type=='vfc'){\r\n        value = form_data.vfc\r\n        this.getFarmers()\r\n      }else if(type=='farmer'){\r\n        value = form_data.farmer\r\n        this.farmers.forEach(function(list){\r\n          if(list.id==value){\r\n            form_data.farmer_detail = list\r\n          }\r\n        })\r\n      }else if(type=='inspector'){\r\n        value = form_data.internal_inspector\r\n        this.inspectors.forEach(function(list){\r\n          if(list.id==value){\r\n            form_data.inspector_detail = list\r\n          }\r\n        })\r\n      }\r\n      this.form_data = form_data\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style >\r\n\r\n@import '../styles/style.css';\r\n\r\n.btn-outline-success:not(:disabled):not(.disabled).active:nth-child(2){\r\n  \r\n    background-color: #ff0d0d;\r\n    border-color: #ff0d0d;\r\n}\r\n.yes_or_no_btn label.btn.btn-outline-success:nth-child(2) {\r\n  \r\n    border: 1px solid #ff0d0d;\r\n}\r\n\r\n</style>\r\n"]}]}