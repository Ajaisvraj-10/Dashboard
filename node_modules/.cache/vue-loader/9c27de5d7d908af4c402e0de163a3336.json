{"remainingRequest":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_projects\\biowin\\src\\views\\app\\pages\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue_projects\\biowin\\src\\views\\app\\pages\\login.vue","mtime":1649330784000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG1ldGFJbmZvOiB7DQogICAgdGl0bGU6ICJMb2dpbiINCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZW1haWw6ICJtZGtjYWxpY3V0NzEyQGdtYWlsLmNvbSIsDQogICAgICBpc19wYWdlOiBmYWxzZSwNCiAgICAgIG5ld3NfbmFtZTonJywNCiAgICAgIGxvZ2luX3N0ZXA6J3JlZ2lzdGVyJywNCiAgICAgIG1lc3NhZ2U6JzxkaXYgY2xhc3M9InRleHQtc2Vjb25kYXJ5IHRleHQtcmlnaHQgcHItMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O29wYWNpdDowLjkiPkVudGVyIGEgbmFtZTwvZGl2PicsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgfSwNCiAgbW91bnRlZCgpew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgZ29vZ2xlTG9naW4oKSB7DQogICAgICB2YXIgZ29vZ2xlVXNlciA9IGF3YWl0IHRoaXMuJGdBdXRoLnNpZ25JbigpOw0KDQogICAgICBjb25zb2xlLmxvZyhnb29nbGVVc2VyKQ0KICAgICAgdmFyIHRva2VuLGlkX3Rva2VuOw0KICAgICAgaWYoZ29vZ2xlVXNlci4kYil7DQogICAgICAgIHRva2VuID0gZ29vZ2xlVXNlci4kYi5hY2Nlc3NfdG9rZW4NCiAgICAgICAgaWRfdG9rZW4gPSBnb29nbGVVc2VyLiRiLmlkX3Rva2VuDQogICAgICB9ZWxzZSBpZihnb29nbGVVc2VyLndjKXsNCiAgICAgICAgdG9rZW4gPSBnb29nbGVVc2VyLndjLmFjY2Vzc190b2tlbg0KICAgICAgICBpZF90b2tlbiA9IGdvb2dsZVVzZXIud2MuaWRfdG9rZW4NCiAgICAgIH1lbHNlew0KICAgICAgICB2YXIgYWNjZXNzID0gZ29vZ2xlVXNlcltPYmplY3Qua2V5cyhnb29nbGVVc2VyKVsxXV0NCiAgICAgICAgdG9rZW4gPSBhY2Nlc3MuYWNjZXNzX3Rva2VuDQogICAgICAgIGlkX3Rva2VuID0gYWNjZXNzLmlkX3Rva2VuDQogICAgICB9DQogICAgICB0aGlzLmdvb2dsZVVzZXJMb2dpbih0b2tlbixpZF90b2tlbikNCiAgICB9LA0KICAgIGdvb2dsZVVzZXJMb2dpbihhY2Nlc3NfdG9rZW4saWRfdG9rZW4pIHsNCiAgICAgIHRoaXMubG9naW5Vc2VyKHsgYWNjZXNzX3Rva2VuOiBhY2Nlc3NfdG9rZW4sIGlkX3Rva2VuOiBpZF90b2tlbiB9KTsNCiAgICB9LA0KICAgIC8vIGZvcm1TdWJtaXQoKSB7DQogICAgLy8gICB0aGlzLmxvZ2luVXNlcih7IGVtYWlsOiB0aGlzLmVtYWlsLCBwYXNzd29yZDogdGhpcy5wYXNzd29yZCB9KTsNCiAgICAvLyB9LA0KICAgIGxvZ2luVXNlcihkYXRhKSB7DQogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKQ0KICAgICAgZm9ybWRhdGEuYXBwZW5kKCdhY2Nlc3NfdG9rZW4nLGRhdGEuYWNjZXNzX3Rva2VuKQ0KICAgICAgZm9ybWRhdGEuYXBwZW5kKCdpZF90b2tlbicsZGF0YS5pZF90b2tlbikNCiAgICAgIGlmKHRoaXMubG9naW5fc3RlcD09J2xvZ2luJyl7DQogICAgICAgIHRoaXMubmV3c19uYW1lID0gJycNCiAgICAgIH0NCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnbmV3c19uYW1lJyx0aGlzLm5ld3NfbmFtZSkNCiAgICAgIGZldGNoKHRoaXMuYXBpX3VybCsnL2FwaS9zaWduaW5XaXRoR29vZ2xlLycsIHsNCiAgICAgICAgICBtZXRob2QgOiAncG9zdCcsDQogICAgICAgICAgYm9keSA6IGZvcm1kYXRhDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgfSkNCiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICB0aGlzLnNob3dBbGVydChqc29uRGF0YS5tZXNzYWdlKQ0KICAgICAgICBpZihqc29uRGF0YS5zdGF0dXMpew0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJbmZvIiwgSlNPTi5zdHJpbmdpZnkoanNvbkRhdGEpKTsNCiAgICAgICAgICAgIHRoaXMuY2hlY2tMb2dpbigpDQogICAgICAgICAgICBpZih0aGlzLiRyb290LnVzZXJJbmZvLm5ld3NfbmFtZT09Jycpew0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySW5mbyIpOw0KICAgICAgICAgICAgICAgIHRoaXMubG9naW5fc3RlcD0ncmVnaXN0ZXInDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7DQogICAgICAgICAgICAgICAgfSw1MDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySW5mbyIpOw0KICAgICAgICAgICAgdGhpcy5sb2dpbl9zdGVwPSdyZWdpc3RlcicNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNoZWNrUGFnZU5hbWUoKSB7DQogICAgICAgIHRoaXMubmV3c19uYW1lID0gdGhpcy5jaGVja0FscGhhTnVtZXJpYyh0aGlzLm5ld3NfbmFtZSkNCiAgICAgICAgdmFyIGlzX29rID0gZmFsc2UNCiAgICAgICAgdGhpcy5pc19wYWdlID0gZmFsc2UNCiAgICAgICAgdGhpcy5tZXNzYWdlID0gJzxkaXYgY2xhc3M9InRleHQtc2Vjb25kYXJ5IHRleHQtcmlnaHQgcHItMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O29wYWNpdDowLjkiPkVudGVyIGEgbmFtZTwvZGl2Pic7DQogICAgICAgIGlmKHRoaXMubmV3c19uYW1lLmxlbmd0aD4yKXsNCiAgICAgICAgICAgIGlzX29rID0gdHJ1ZQ0KICAgICAgICB9DQogICAgICAgIGlmKGlzX29rKXsNCiAgICAgICAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ25ld3NfbmFtZScsdGhpcy5uZXdzX25hbWUpDQogICAgICAgICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9hcGkvY2hlY2tQYWdlTmFtZS8nLCB7DQogICAgICAgICAgICAgICAgbWV0aG9kIDogJ3Bvc3QnLA0KICAgICAgICAgICAgICAgIGJvZHkgOiBmb3JtZGF0YQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbigoanNvbkRhdGEpID0+IHsNCiAgICAgICAgICAgICAgICBpZihqc29uRGF0YS5zdWNjZXNzKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc19wYWdlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnPGRpdiBjbGFzcz0idGV4dC1zdWNjZXNzIHRleHQtcmlnaHQgcHItMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O29wYWNpdDowLjkiPicranNvbkRhdGEubWVzc2FnZSsnPC9kaXY+JzsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc19wYWdlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gJzxkaXYgY2xhc3M9InRleHQtZGFuZ2VyIHRleHQtcmlnaHQgcHItMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O29wYWNpdDowLjkiPicranNvbkRhdGEubWVzc2FnZSsnPC9kaXY+JzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVQYWdlTmFtZSgpIHsNCiAgICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCduZXdzX25hbWUnLHRoaXMubmV3c19uYW1lKQ0KICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ3VzZXJfaWQnLHRoaXMudXNlcklkKQ0KICAgICAgICBmZXRjaCh0aGlzLmFwaV91cmwrJy9hcGkvcmVnaXN0ZXJOZXdzTmFtZS8nLCB7DQogICAgICAgICAgICBtZXRob2QgOiAncG9zdCcsDQogICAgICAgICAgICBib2R5IDogZm9ybWRhdGENCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gew0KICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoanNvbkRhdGEubWVzc2FnZSkNCiAgICAgICAgICAgIGlmKGpzb25EYXRhLnN0YXR1cyl7DQogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC51c2VySW5mby5uZXdzX25hbWUgPSBqc29uRGF0YS5uZXdzX25hbWUNCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlckluZm8iLCBKU09OLnN0cmluZ2lmeSh0aGlzLiRyb290LnVzZXJJbmZvKSk7DQogICAgICAgICAgICAgICAgaWYodGhpcy4kcm9vdC51c2VySW5mby5uZXdzX25hbWU9PScnKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dpbl9zdGVwPSdwYWdlX25hbWUnDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcw0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJzsNCiAgICAgICAgICAgICAgICAgICAgfSw1MDApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views/app/pages","sourcesContent":["<template>\r\n    <div class=\"login-main\">\r\n\r\n        <div class=\"container cont-2\">\r\n            \r\n            <div class=\"header\">\r\n                <h1 class=\"header-title2 text-center  py-2\">\r\n                    The One Link for All Your Links\r\n                </h1>\r\n                <div class=\"header-image2 p-3\">\r\n                    <img src=\"/img/logo.png\" width=\"180\">\r\n                </div>\r\n            </div>\r\n\r\n            <form autocomplete=\"off\">\r\n                <div class=\"mt-5\">\r\n                    <div type=\"button\" class=\"button app-login-button\" @click=\"googleLogin()\">\r\n                        <img src=\"/img/google.png\" width=\"20\" class=\"pr-1\"> Login with Google\r\n                    </div>\r\n                  \r\n                </div>\r\n\r\n            </form>\r\n\r\n            <div class=\"footer\">\r\n                <p class=\"text text-center\">\r\n                    Don't have an account?\r\n                    <a @click=\"login_step='register'\" class=\"text link cursor-pointer\">Register!</a>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  metaInfo: {\r\n    title: \"Login\"\r\n  },\r\n  data() {\r\n    return {\r\n      email: \"mdkcalicut712@gmail.com\",\r\n      is_page: false,\r\n      news_name:'',\r\n      login_step:'register',\r\n      message:'<div class=\"text-secondary text-right pr-2\" style=\"font-size:12px;opacit:0.9\">Enter a name</div>',\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  mounted(){\r\n  },\r\n  methods: {\r\n    async googleLogin() {\r\n      var googleUser = await this.$gAuth.signIn();\r\n\r\n      console.log(googleUser)\r\n      var token,id_token;\r\n      if(googleUser.$b){\r\n        token = googleUser.$b.access_token\r\n        id_token = googleUser.$b.id_token\r\n      }else if(googleUser.wc){\r\n        token = googleUser.wc.access_token\r\n        id_token = googleUser.wc.id_token\r\n      }else{\r\n        var access = googleUser[Object.keys(googleUser)[1]]\r\n        token = access.access_token\r\n        id_token = access.id_token\r\n      }\r\n      this.googleUserLogin(token,id_token)\r\n    },\r\n    googleUserLogin(access_token,id_token) {\r\n      this.loginUser({ access_token: access_token, id_token: id_token });\r\n    },\r\n    // formSubmit() {\r\n    //   this.loginUser({ email: this.email, password: this.password });\r\n    // },\r\n    loginUser(data) {\r\n      var formdata = new FormData()\r\n      formdata.append('access_token',data.access_token)\r\n      formdata.append('id_token',data.id_token)\r\n      if(this.login_step=='login'){\r\n        this.news_name = ''\r\n      }\r\n      formdata.append('news_name',this.news_name)\r\n      fetch(this.api_url+'/api/signinWithGoogle/', {\r\n          method : 'post',\r\n          body : formdata\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.showAlert(jsonData.message)\r\n        if(jsonData.status){\r\n            localStorage.setItem(\"userInfo\", JSON.stringify(jsonData));\r\n            this.checkLogin()\r\n            if(this.$root.userInfo.news_name==''){\r\n                localStorage.removeItem(\"userInfo\");\r\n                this.login_step='register'\r\n            }\r\n            else{\r\n                var self = this\r\n                setTimeout(function(){\r\n                    window.location.href = '/';\r\n                },500);\r\n            }\r\n        }else{\r\n            localStorage.removeItem(\"userInfo\");\r\n            this.login_step='register'\r\n        }\r\n      })\r\n    },\r\n    checkPageName() {\r\n        this.news_name = this.checkAlphaNumeric(this.news_name)\r\n        var is_ok = false\r\n        this.is_page = false\r\n        this.message = '<div class=\"text-secondary text-right pr-2\" style=\"font-size:12px;opacit:0.9\">Enter a name</div>';\r\n        if(this.news_name.length>2){\r\n            is_ok = true\r\n        }\r\n        if(is_ok){\r\n            var formdata = new FormData()\r\n            formdata.append('news_name',this.news_name)\r\n            fetch(this.api_url+'/api/checkPageName/', {\r\n                method : 'post',\r\n                body : formdata\r\n            })\r\n            .then((response) => {\r\n                return response.json()\r\n            })\r\n            .then((jsonData) => {\r\n                if(jsonData.success){\r\n                    this.is_page = true\r\n                    this.message = '<div class=\"text-success text-right pr-2\" style=\"font-size:12px;opacit:0.9\">'+jsonData.message+'</div>';\r\n                }else{\r\n                    this.is_page = false\r\n                    this.message = '<div class=\"text-danger text-right pr-2\" style=\"font-size:12px;opacit:0.9\">'+jsonData.message+'</div>';\r\n                }\r\n            })\r\n        }\r\n    },\r\n    createPageName() {\r\n        var formdata = new FormData()\r\n        formdata.append('news_name',this.news_name)\r\n        formdata.append('user_id',this.userId)\r\n        fetch(this.api_url+'/api/registerNewsName/', {\r\n            method : 'post',\r\n            body : formdata\r\n        })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .then((jsonData) => {\r\n            this.showAlert(jsonData.message)\r\n            if(jsonData.status){\r\n                this.$root.userInfo.news_name = jsonData.news_name\r\n                localStorage.setItem(\"userInfo\", JSON.stringify(this.$root.userInfo));\r\n                if(this.$root.userInfo.news_name==''){\r\n                    this.login_step='page_name'\r\n                }\r\n                else{\r\n                    var self = this\r\n                    setTimeout(function(){\r\n                        window.location.href = '/';\r\n                    },500);\r\n                }\r\n            }\r\n        })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n   @import './styles/style.css';\r\n\r\n</style>\r\n"]}]}