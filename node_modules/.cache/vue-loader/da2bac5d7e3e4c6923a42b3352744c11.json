{"remainingRequest":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_projects\\biowin\\src\\views\\app\\pages\\login.vue?vue&type=style&index=0&id=467b4746&scoped=true&lang=css&","dependencies":[{"path":"E:\\vue_projects\\biowin\\src\\views\\app\\pages\\login.vue","mtime":1649330784000},{"path":"E:\\vue_projects\\biowin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"E:\\vue_projects\\biowin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_projects\\biowin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAnLi9zdHlsZXMvc3R5bGUuY3NzJzsKCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA","file":"login.vue","sourceRoot":"src/views/app/pages","sourcesContent":["<template>\r\n    <div class=\"login-main\">\r\n\r\n        <div class=\"container cont-2\">\r\n            \r\n            <div class=\"header\">\r\n                <h1 class=\"header-title2 text-center  py-2\">\r\n                    The One Link for All Your Links\r\n                </h1>\r\n                <div class=\"header-image2 p-3\">\r\n                    <img src=\"/img/logo.png\" width=\"180\">\r\n                </div>\r\n            </div>\r\n\r\n            <form autocomplete=\"off\">\r\n                <div class=\"mt-5\">\r\n                    <div type=\"button\" class=\"button app-login-button\" @click=\"googleLogin()\">\r\n                        <img src=\"/img/google.png\" width=\"20\" class=\"pr-1\"> Login with Google\r\n                    </div>\r\n                  \r\n                </div>\r\n\r\n            </form>\r\n\r\n            <div class=\"footer\">\r\n                <p class=\"text text-center\">\r\n                    Don't have an account?\r\n                    <a @click=\"login_step='register'\" class=\"text link cursor-pointer\">Register!</a>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  metaInfo: {\r\n    title: \"Login\"\r\n  },\r\n  data() {\r\n    return {\r\n      email: \"mdkcalicut712@gmail.com\",\r\n      is_page: false,\r\n      news_name:'',\r\n      login_step:'register',\r\n      message:'<div class=\"text-secondary text-right pr-2\" style=\"font-size:12px;opacit:0.9\">Enter a name</div>',\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  mounted(){\r\n  },\r\n  methods: {\r\n    async googleLogin() {\r\n      var googleUser = await this.$gAuth.signIn();\r\n\r\n      console.log(googleUser)\r\n      var token,id_token;\r\n      if(googleUser.$b){\r\n        token = googleUser.$b.access_token\r\n        id_token = googleUser.$b.id_token\r\n      }else if(googleUser.wc){\r\n        token = googleUser.wc.access_token\r\n        id_token = googleUser.wc.id_token\r\n      }else{\r\n        var access = googleUser[Object.keys(googleUser)[1]]\r\n        token = access.access_token\r\n        id_token = access.id_token\r\n      }\r\n      this.googleUserLogin(token,id_token)\r\n    },\r\n    googleUserLogin(access_token,id_token) {\r\n      this.loginUser({ access_token: access_token, id_token: id_token });\r\n    },\r\n    // formSubmit() {\r\n    //   this.loginUser({ email: this.email, password: this.password });\r\n    // },\r\n    loginUser(data) {\r\n      var formdata = new FormData()\r\n      formdata.append('access_token',data.access_token)\r\n      formdata.append('id_token',data.id_token)\r\n      if(this.login_step=='login'){\r\n        this.news_name = ''\r\n      }\r\n      formdata.append('news_name',this.news_name)\r\n      fetch(this.api_url+'/api/signinWithGoogle/', {\r\n          method : 'post',\r\n          body : formdata\r\n      })\r\n      .then((response) => {\r\n          return response.json()\r\n      })\r\n      .then((jsonData) => {\r\n        this.showAlert(jsonData.message)\r\n        if(jsonData.status){\r\n            localStorage.setItem(\"userInfo\", JSON.stringify(jsonData));\r\n            this.checkLogin()\r\n            if(this.$root.userInfo.news_name==''){\r\n                localStorage.removeItem(\"userInfo\");\r\n                this.login_step='register'\r\n            }\r\n            else{\r\n                var self = this\r\n                setTimeout(function(){\r\n                    window.location.href = '/';\r\n                },500);\r\n            }\r\n        }else{\r\n            localStorage.removeItem(\"userInfo\");\r\n            this.login_step='register'\r\n        }\r\n      })\r\n    },\r\n    checkPageName() {\r\n        this.news_name = this.checkAlphaNumeric(this.news_name)\r\n        var is_ok = false\r\n        this.is_page = false\r\n        this.message = '<div class=\"text-secondary text-right pr-2\" style=\"font-size:12px;opacit:0.9\">Enter a name</div>';\r\n        if(this.news_name.length>2){\r\n            is_ok = true\r\n        }\r\n        if(is_ok){\r\n            var formdata = new FormData()\r\n            formdata.append('news_name',this.news_name)\r\n            fetch(this.api_url+'/api/checkPageName/', {\r\n                method : 'post',\r\n                body : formdata\r\n            })\r\n            .then((response) => {\r\n                return response.json()\r\n            })\r\n            .then((jsonData) => {\r\n                if(jsonData.success){\r\n                    this.is_page = true\r\n                    this.message = '<div class=\"text-success text-right pr-2\" style=\"font-size:12px;opacit:0.9\">'+jsonData.message+'</div>';\r\n                }else{\r\n                    this.is_page = false\r\n                    this.message = '<div class=\"text-danger text-right pr-2\" style=\"font-size:12px;opacit:0.9\">'+jsonData.message+'</div>';\r\n                }\r\n            })\r\n        }\r\n    },\r\n    createPageName() {\r\n        var formdata = new FormData()\r\n        formdata.append('news_name',this.news_name)\r\n        formdata.append('user_id',this.userId)\r\n        fetch(this.api_url+'/api/registerNewsName/', {\r\n            method : 'post',\r\n            body : formdata\r\n        })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .then((jsonData) => {\r\n            this.showAlert(jsonData.message)\r\n            if(jsonData.status){\r\n                this.$root.userInfo.news_name = jsonData.news_name\r\n                localStorage.setItem(\"userInfo\", JSON.stringify(this.$root.userInfo));\r\n                if(this.$root.userInfo.news_name==''){\r\n                    this.login_step='page_name'\r\n                }\r\n                else{\r\n                    var self = this\r\n                    setTimeout(function(){\r\n                        window.location.href = '/';\r\n                    },500);\r\n                }\r\n            }\r\n        })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n   @import './styles/style.css';\r\n\r\n</style>\r\n"]}]}