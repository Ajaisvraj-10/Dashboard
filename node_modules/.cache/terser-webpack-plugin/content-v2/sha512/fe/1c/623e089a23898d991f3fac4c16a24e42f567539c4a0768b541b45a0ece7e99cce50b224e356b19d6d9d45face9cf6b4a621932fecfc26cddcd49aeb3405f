{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-5d4d2d11\"],{\"1fda\":function(t,e,a){\"use strict\";var s=a(\"7acc\"),i=a.n(s);i.a},\"7acc\":function(t,e,a){},a623:function(t,e,a){\"use strict\";var s=a(\"23e7\"),i=a(\"b727\").every,r=a(\"a640\"),l=a(\"ae40\"),n=r(\"every\"),c=l(\"every\");s({target:\"Array\",proto:!0,forced:!n||!c},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d2b7:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content\",class:t.background_start?\"\":\"biowin-scroll\"},[a(\"main\",[a(\"div\",{staticClass:\"header-bio\"},[a(\"div\",{staticClass:\"container d-flex justify-content-between align-items-center px-4\"},[a(\"div\",{staticClass:\"d-flex\"},[a(\"router-link\",{attrs:{tag:\"a\",to:\"/\"}},[a(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"}})]),a(\"h4\",{staticClass:\"font-weight-700 px-3\"},[t._v(\" Sample Collections\")])],1),a(\"router-link\",{attrs:{tag:\"a\",to:\"/sample-procurement/create\"}},[a(\"div\",{staticClass:\"add-btn\"},[a(\"img\",{attrs:{src:\"/images/plus.png\"}}),a(\"h6\",{staticClass:\"text-16 add-btn-text ml-2\"},[t._v(\"Add\")])])])],1)]),t.not_start?a(\"div\",{},[a(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}})]):t._e(),a(\"div\",{staticClass:\"main-body4 py-2\",style:t.not_start?\"opacity:0.5\":\"\"},[a(\"div\",{staticClass:\"mx-0 row\"},[a(\"div\",{staticClass:\"col-6 pr-1\"},[a(\"b-form-select\",{attrs:{autocomplete:\"off\"},on:{change:function(e){return t.getYears()}},model:{value:t.selected_year,callback:function(e){t.selected_year=e},expression:\"selected_year\"}},t._l(t.years,(function(e){return a(\"b-form-select-option\",{attrs:{value:e.year}},[t._v(t._s(e.year)+\" (\"+t._s(e.count)+\")\")])})),1)],1),a(\"div\",{staticClass:\"col-6 pl-1\"},[a(\"b-form-select\",{model:{value:t.status,callback:function(e){t.status=e},expression:\"status\"}},[a(\"b-form-select-option\",{attrs:{value:\"\"}},[t._v(\"Status\")]),t._l([\"Waiting\",\"Checking\",\"Approved\",\"Send to Lab\",\"Lab Test Approved\",\"Lab Test Rejected\"],(function(e){return a(\"b-form-select-option\",{attrs:{value:e}},[t._v(t._s(e))])}))],2)],1)]),a(\"div\",{staticClass:\" flex-align px-3\",staticStyle:{gap:\"10px\"}},[a(\"div\",{staticClass:\"input-group mb-3 input-group-lg\"},[t._m(0),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.searchQuery,expression:\"searchQuery\"}],staticClass:\"form-control\",staticStyle:{\"border-left\":\"0\"},attrs:{type:\"text\",autocomplete:\"off\",placeholder:\"Search\"},domProps:{value:t.searchQuery},on:{keyup:function(e){return t.resultQuery()},input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),a(\"b-modal\",{attrs:{id:\"filter-data\",title:\"Filter\",\"hide-footer\":\"\"}},[a(\"div\",[a(\"form\",{ref:\"filterData\",on:{submit:function(e){return e.preventDefault(),t.getYears()}}},[a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"ICS \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"ics\"},on:{change:function(e){return t.changeICS()}},model:{value:t.filter.ics,callback:function(e){t.$set(t.filter,\"ics\",e)},expression:\"filter.ics\"}},t._l(t.all_ics,(function(e){return e.type==t.$root.userInfo.fpo?a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))]):t._e()})),1)],1),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"Panchayath \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"panchayath\"},model:{value:t.filter.panchayath,callback:function(e){t.$set(t.filter,\"panchayath\",e)},expression:\"filter.panchayath\"}},t._l(t.all_panchayaths,(function(e){return a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"VFC \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"vfc\"},model:{value:t.filter.vfc,callback:function(e){t.$set(t.filter,\"vfc\",e)},expression:\"filter.vfc\"}},t._l(t.all_vfc,(function(e){return e.location.revenue_village_detail.panchayath==t.filter.panchayath?a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))]):t._e()})),1)],1),a(\"hr\"),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"b-button\",{staticClass:\"w-100 px-3 py-1 ml-1 mr-2\",attrs:{type:\"button\",variant:\"outline-info\"},on:{click:function(e){return t.cancelFilter()}}},[t._v(\"Cancel\")]),a(\"b-button\",{staticClass:\"w-100 px-3 py-1 mr-1 ml-2\",attrs:{type:\"submit\",variant:\"success\"},on:{click:function(e){t.samples=[]}}},[t._v(\"Submit\")])],1)])])])],1),a(\"div\",{staticClass:\"hr-min m-0\"}),a(\"div\",{staticClass:\"my-3 px-3\",staticStyle:{display:\"flex\",\"flex-direction\":\"column\",gap:\"16px\"}},t._l(t.samples,(function(e){return a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"\"==t.status||t.status==e.qc_status,expression:\"status=='' || status==sample.qc_status\"}]},[a(\"router-link\",{attrs:{to:\"/sample-procurement-detail/\"+e.id}},[a(\"div\",{staticClass:\" borderless-card\"},[a(\"div\",{staticClass:\"d-flex justify-content-between align-items-center  px-0 py-1\"},[a(\"h4\",{staticClass:\"font-weight-700\"},[t._v(\" \"+t._s(e.category)+\"/\"+t._s(e.product)+\"/\"+t._s(e.product_type)+\" \"),\"Organic\"==e.farmer_status?a(\"span\",{staticClass:\"badge badge-success\"},[t._v(\"ORG\")]):t._e()]),a(\"h4\",{staticClass:\"font-weight-700 px-4 py-1 \",staticStyle:{\"margin-right\":\"-22px\"}},[t._v(t._s(t.dateFormate(e.created_on)))])]),a(\"div\",{staticClass:\"hr-min\"}),a(\"div\",{staticClass:\"d-flex justify-content-between px-0 py-1 \"},[a(\"h6\",{staticClass:\" font-weight-500 text-light\"},[t._v(\"Farmer: \"),a(\"b\",[t._v(t._s(e.farmer))])]),a(\"h6\",{staticClass:\"m-0 font-weight-700 pl-2 text-light \"},[t._v(t._s(e.farmer_code))])]),a(\"div\",{staticClass:\"d-flex justify-content-between px-0 py-1 \"},[a(\"h6\",{staticClass:\" font-weight-500 text-success\"},[t._v(\"#\"+t._s(e.id)+\"/Sample \")]),a(\"h6\",{staticClass:\"m-0 font-weight-700 pl-2 badge\",class:\"Waiting\"==e.qc_status?\"badge-warning\":\"Approved\"==e.qc_status?\"badge-success\":\"Rejected\"==e.qc_status?\"badge-danger\":\"badge-primary\"},[t._v(t._s(e.qc_status))])])])])],1)})),0),a(\"div\",{},[t.load_more?a(\"h4\",{staticClass:\"font-weight-700 my-2 pl-2 text-green text-center\",on:{click:function(e){return t.filterData()}}},[t._v(\"Load More\")]):t._e()])]),a(\"div\",{staticClass:\"filter-footer\"},[a(\"div\",{staticClass:\"footer-item2 d-flex align-items-center\",on:{click:function(e){return t.$router.push(\"/\")}}},[a(\"img\",{attrs:{src:\"/images/home.png\",width:\"25\"}}),a(\"h5\",{staticClass:\"m-0 pl-2 text-white\"},[t._v(\"Home\")])]),a(\"div\",{staticClass:\"footer-item2 filter-icon d-flex align-items-center\"},[a(\"img\",{directives:[{name:\"b-modal\",rawName:\"v-b-modal.filter-data\",modifiers:{\"filter-data\":!0}}],attrs:{src:\"/images/settings.png\",width:\"25\"},on:{click:function(e){return t.selectFilter()}}}),t.filter.count>0?a(\"div\",{staticClass:\"filter-number\"},[t._v(t._s(t.filter.count))]):t._e(),a(\"h5\",{staticClass:\"m-0 pl-2 text-white\"},[t._v(\"Filter\")])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"input-group-prepend\"},[a(\"div\",{staticClass:\"input-group-text\"},[a(\"img\",{attrs:{src:\"/images/search.png\",width:\"25\"}})])])}],r=(a(\"a623\"),a(\"4de4\"),a(\"caad\"),a(\"d3b7\"),a(\"ac1f\"),a(\"25f0\"),a(\"2532\"),a(\"1276\"),{metaInfo:{title:\"Home\"},data:function(){return{samples:[],years:[],selected_year:null,temp_samples:[],searchQuery:null,filter:{ics:null,panchayath:null,vfc:null,count:0},not_start:!0,status:\"\",background_start:!0,lastScrollPosition:0,load_more:!1}},mounted:function(){this.checkLogin(),localStorage.getItem(\"sample_procuremnt_filter\")&&(this.filter=JSON.parse(localStorage[\"sample_procuremnt_filter\"])),this.getYears();var t=this;document.getElementsByClassName(\"main-body4\")[0].addEventListener(\"scroll\",(function(){t.handleScroll()}))},methods:{handleScroll:function(){var t=document.getElementsByClassName(\"main-body4\")[0].scrollTop;if(t<0)return 0;this.background_start=t<this.lastScrollPosition,this.lastScrollPosition=t},resultQuery:function(){var t=this;if(this.searchQuery){var e=this.samples.filter((function(e){return t.searchQuery.toLowerCase().split(\" \").every((function(t){return e.farmer.toLowerCase().includes(t)||e.farmer_code.toLowerCase().includes(t)||e.id.toString().includes(t)}))}));this.samples=e,this.load_more=!1}else this.temp_samples.length>=40&&(this.load_more=!0),this.samples=this.temp_samples},getYears:function(){var t=this;this.page=0;var e=new FormData;e.append(\"fpo\",this.$root.userInfo.fpo),this.filter.ics&&e.append(\"ics\",this.filter.ics),this.filter.panchayath&&e.append(\"panchayath\",this.filter.panchayath),this.filter.vfc&&e.append(\"vfc\",this.filter.vfc);var a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/aeo_app_years/?year_for=sample\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){t.years=e,e.length>0&&!t.selected_year?t.selected_year=e[0].year:t.selected_year||(t.selected_year=t.this_year),t.filterData()}))},selectFilter:function(){this.page=0,this.getTypes(),this.getIcs(),this.filter.ics&&this.changeICS()},cancelFilter:function(){this.samples=[],this.$bvModal.hide(\"filter-data\"),this.filter={ics:null,panchayath:null,vfc:null,count:0},localStorage.removeItem(\"sample_procuremnt_filter\"),this.getYears()},calcFilterCount:function(){var t=0;this.filter.ics&&t++,this.filter.panchayath&&t++,this.filter.vfc&&t++,this.filter.count=t,localStorage.setItem(\"sample_procuremnt_filter\",JSON.stringify(this.filter)),this.$bvModal.hide(\"filter-data\")},filterData:function(){var t=this;this.page++,this.not_start=!0,this.calcFilterCount();var e=new FormData;e.append(\"fpo\",this.$root.userInfo.fpo),this.filter.ics&&e.append(\"ics\",this.filter.ics),this.filter.panchayath&&e.append(\"panchayath\",this.filter.panchayath),this.filter.vfc&&e.append(\"vfc\",this.filter.vfc);var a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/sample_procurement/?page=\"+this.page+\"&year=\"+this.selected_year,{method:\"post\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){t.not_start=!1,1==t.page?t.samples=e:t.samples.push.apply(t.samples,e),e.length>=40?t.load_more=!0:t.load_more=!1,t.temp_samples=t.samples,t.samples.length<=0&&t.showAlert(\"No sample collections found!\")}))}}}),l=r,n=(a(\"1fda\"),a(\"2877\")),c=Object(n[\"a\"])(l,s,i,!1,null,\"4438892d\",null);e[\"default\"]=c.exports}}]);","extractedComments":[]}