{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-293eec47\"],{\"3c7b\":function(t,a,e){\"use strict\";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"main-content create-main\"},[e(\"form\",{ref:\"dataForm\",on:{submit:function(a){return a.preventDefault(),t.dataForm()}}},[e(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[e(\"h5\",{staticClass:\"mb-0\"},[e(\"span\",{staticClass:\"text-success\"},[t._v(\"Sample Procurement\")]),t._v(\" / \"+t._s(t.slugToWord(t.action)))])]),e(\"div\",{staticClass:\"d-flex\"},[\"view\"!=t.action?e(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"success\",type:\"submit\"}},[t._v(\" Save \")]):t._e(),e(\"router-link\",{attrs:{to:\"/app/procurement/sample-procurement\"}},[e(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"}},[t._v(\" Discard \")])],1)],1)],2),e(\"div\",{staticClass:\" my-3 border-top\"}),e(\"fieldset\",{attrs:{disabled:\"view\"==t.action}},[e(\"b-row\",{staticClass:\"main-scroll pt-2\"},[e(\"b-col\",{attrs:{lg:\"5\",xl:\"5\"}},[e(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[e(\"div\",[e(\"h5\",[t._v(\"Product Details\")]),e(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\" col-md-12\"},[e(\"div\",{staticClass:\"user-info pt-2\"},[e(\"div\",{staticClass:\"o_thread_search_input mb-2\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Date: \")]),e(\"input\",{staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Date\",type:\"text\",autocomplete:\"off\",required:\"\",readonly:\"\"},domProps:{value:t.dateFormate(t.form_data.created_on,!0)}})]),t.load_products?e(\"ProductFields\",{attrs:{product_id:t.product_id,readonly:\"edit\"==t.action},on:{productId:t.productId}}):t._e(),e(\"div\",{staticClass:\"o_thread_search_input mt-2\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Farmer Status: \")]),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer_status,expression:\"form_data.farmer_status\"}],attrs:{type:\"text\",name:\"farmer_status\",readonly:\"\"},domProps:{value:t.form_data.farmer_status},on:{input:function(a){a.target.composing||t.$set(t.form_data,\"farmer_status\",a.target.value)}}})])],1)])]),e(\"hr\")])])])],1),e(\"b-col\",{attrs:{lg:\"7\",xl:\"7\"}},[e(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[e(\"div\",[e(\"h5\",[t._v(\"Farmer Details\")]),e(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\" col-md-12\"},[e(\"div\",{staticClass:\"user-info pt-2\"},[e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Farmer Code: \")]),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer_detail.farmer_code,expression:\"form_data.farmer_detail.farmer_code\"}],attrs:{type:\"text\",placeholder:\"Search (Farmer code)\",autocomplete:\"off\",required:\"\"},domProps:{value:t.form_data.farmer_detail.farmer_code},on:{input:[function(a){a.target.composing||t.$set(t.form_data.farmer_detail,\"farmer_code\",a.target.value)},function(a){return t.searchFarmers()}]}}),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.farmers.length>0,expression:\"farmers.length>0\"}],staticClass:\"farmer_search_drpdwn\"},[e(\"div\",{staticClass:\"farmer_heading\"},[t._v(\" Farmers Result \"),e(\"span\",{on:{click:function(a){t.farmers=[]}}},[e(\"i\",{staticClass:\"fa fa-times-circle\",attrs:{\"aria-hidden\":\"true\"}})])]),e(\"div\",{staticClass:\"farmer_results\"},t._l(t.farmers,(function(a){return e(\"p\",{on:{click:function(e){return t.selectFarmer(a)}}},[t._v(t._s(a.farmer_code)+\"-\"+t._s(a.name))])})),0)])]),e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Farmer name: \")]),e(\"input\",{attrs:{type:\"text\",placeholder:\"Farmer name\",autocomplete:\"off\",readonly:\"\",required:\"\"},domProps:{value:t.form_data.farmer_detail.name}}),e(\"input\",{attrs:{type:\"hidden\",name:\"farmer\"},domProps:{value:t.form_data.farmer}})]),e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Estimate QTY (Kg): \")]),e(\"input\",{attrs:{placeholder:\"Qty\",type:\"text\",autocomplete:\"off\",name:\"estimate_qty\",readonly:\"\"},domProps:{value:t.form_data.estimate_qty}})]),e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Farmer Estimate QTY (Kg): \")]),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer_estimate,expression:\"form_data.farmer_estimate\"}],attrs:{placeholder:\" \",type:\"text\",autocomplete:\"off\",name:\"farmer_estimate\",required:\"\"},domProps:{value:t.form_data.farmer_estimate},on:{input:function(a){a.target.composing||t.$set(t.form_data,\"farmer_estimate\",a.target.value)}}})]),e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Available QTY (KG): \")]),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.available_qty,expression:\"form_data.available_qty\"}],attrs:{placeholder:\" \",type:\"text\",autocomplete:\"off\",name:\"available_qty\",required:\"\"},domProps:{value:t.form_data.available_qty},on:{input:function(a){a.target.composing||t.$set(t.form_data,\"available_qty\",a.target.value)}}})]),e(\"div\",{staticClass:\"o_thread_search_input\"},[e(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" QC Status: \")]),e(\"input\",{attrs:{placeholder:\" \",type:\"text\",autocomplete:\"off\",readonly:\"\"},domProps:{value:t.form_data.qc_status}})])])])]),e(\"hr\")])])])],1)],1)],1)])])},s=[],o=(e(\"d3b7\"),e(\"4dbf\")),i={metaInfo:{title:\"FPO - ICS\"},components:{ProductFields:o[\"a\"]},data:function(){return{form_data:{purchase_type:1,created_on:\"\",estimate_qty:0,farmer_estimate:0,farmer_detail:{name:\"\",farmer_code:\"\"},farmer:null,available_qty:0,qc_status:\"Waiting\",farmer_status:\"\"},id:null,load_products:!1,product_id:null,action:\"create\",farmers:[],total_keys:0}},mounted:function(){this.form_data.created_on=this.currentDate(),this.$root.current_section=\"procurement\",this.action=this.$route.params.action,this.getPurchaseTypes(),\"create\"!=this.action?(this.id=this.$route.params.id,this.getForm()):this.load_products=!0},methods:{searchFarmers:function(){var t=this,a=this.form_data.farmer_detail.farmer_code;if(a.length<4)return!1;var e=new Headers,r=new FormData;r.append(\"farmer_code\",a),r.append(\"search_type\",\"sample_procurement\"),e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/fpo/search_farmers/\",{method:\"post\",headers:e,body:r}).then((function(t){return t.json()})).then((function(a){t.farmers=a}))},selectFarmer:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a&&(this.form_data.farmer_detail=a,this.form_data.farmer_status=\"Conventional\",\"ORG\"==a.status&&(this.form_data.farmer_status=\"Organic\"),this.form_data.farmer=a.id),this.farmers=[];var e=new Headers,r=new FormData;r.append(\"farmer\",this.form_data.farmer),r.append(\"product\",this.form_data.product),e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/fpo/farmer_full_details/\",{method:\"post\",headers:e,body:r}).then((function(t){return t.json()})).then((function(a){t.form_data.estimate_qty=a.estimate_qty}))},getForm:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/sample_procurement/\"+this.id+\"/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.product_id=a.product,t.form_data=a,t.load_products=!0}))},productId:function(t){this.product_id=t,this.form_data.product=t,this.selectFarmer()},dataForm:function(){this.id?this.updateFormdata():this.createFormdata()},createFormdata:function(){var t=this,a=new FormData(this.$refs[\"dataForm\"]);a.append(\"aeo\",2),a.append(\"purchase_type\",1);var e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/sample_procurement/\",{method:\"POST\",body:a,headers:e}).then((function(t){return t.json()})).then((function(a){a.id>0?(t.id=a.id,t.form_data=a,t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},updateFormdata:function(){var t=this,a=new FormData(this.$refs[\"dataForm\"]);a.append(\"aeo\",2),a.append(\"purchase_type\",1),a.append(\"product\",this.form_data.product);var e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/sample_procurement/\"+this.id+\"/\",{method:\"PUT\",body:a,headers:e}).then((function(t){return t.json()})).then((function(a){a.id>0?t.showAlert(\"Updated Successfully!\"):t.showAlert(\"Something Wrong!\")}))}}},n=i,d=(e(\"f939\"),e(\"2877\")),c=Object(d[\"a\"])(n,r,s,!1,null,null,null);a[\"default\"]=c.exports},bb88:function(t,a,e){},f939:function(t,a,e){\"use strict\";var r=e(\"bb88\"),s=e.n(r);s.a}}]);","extractedComments":[]}