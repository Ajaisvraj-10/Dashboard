{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-e23365e6\"],{\"26db\":function(t,e,s){\"use strict\";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"main-content\"},[s(\"main\",[s(\"div\",{staticClass:\"header-bio\"},[s(\"div\",{staticClass:\"container d-flex align-items-center px-4 \"},[s(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"},on:{click:function(e){t.input_col>2?t.colBack():t.$bvModal.show(\"closePopup\")}}}),s(\"h4\",{staticClass:\"font-weight-700 px-3\"},[t._v(\"New Inspection\")])])]),t.not_start?s(\"div\",{},[s(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}})]):t._e(),s(\"form\",{ref:\"inspectionForm\",style:t.not_start?\"opacity:0.5\":\"\",on:{submit:function(e){return e.preventDefault(),t.inspectionForm()}}},[s(\"div\",{staticClass:\"body-bio2 px-4 py-2 create\",staticStyle:{height:\"calc(100vh - 135px)\",overflow:\"auto\"}},[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.$route.query.farmer,expression:\"!$route.query.farmer\"}],staticClass:\"mt-3 row \"},[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.input_col,expression:\"input_col==2\"}],staticClass:\"col-12\"},[s(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"ICS\")]),s(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.icss,(function(e){return s(\"button\",{staticClass:\"btn\",class:t.form_data.ics==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(s){t.form_data.ics=e.id,t.change_select(\"ics\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.type,expression:\"form_data.type\"}],attrs:{type:\"hidden\",name:\"type\",required:\"\"},domProps:{value:t.form_data.type},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"type\",e.target.value)}}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.ics,expression:\"form_data.ics\"}],class:\"check_field_2\",attrs:{type:\"hidden\",name:\"ics\",required:\"\"},domProps:{value:t.form_data.ics},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"ics\",e.target.value)}}})],2)]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:3==t.input_col,expression:\"input_col==3\"}],staticClass:\"col-12\"},[s(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"VFC\")]),s(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.vfcs,(function(e){return s(\"button\",{staticClass:\"btn\",class:t.form_data.vfc==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(s){t.form_data.vfc=e.id,t.change_select(\"vfc\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.vfc,expression:\"form_data.vfc\"}],class:\"check_field_3\",attrs:{type:\"hidden\",name:\"vfc\",required:\"\"},domProps:{value:t.form_data.vfc},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"vfc\",e.target.value)}}})],2)])]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.$route.query.farmer&&4==t.input_col,expression:\"!$route.query.farmer && input_col==4\"}],staticClass:\"row \"},[s(\"div\",{staticClass:\"col-12\"},[s(\"h4\",{staticClass:\"text-light pr-4 pb-2\"},[t._v(\"Farmer\")]),s(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.farmers,(function(e){return s(\"button\",{staticClass:\"btn\",class:t.form_data.farmer==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(s){t.form_data.farmer=e.id,t.getFarmer(),t.nextCol()}}},[t._v(t._s(e.name)+\" - \"+t._s(e.farmer_code))])})),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer,expression:\"form_data.farmer\"}],class:\"check_field_4\",attrs:{type:\"hidden\",name:\"farmer\",required:\"\"},domProps:{value:t.form_data.farmer},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"farmer\",e.target.value)}}})],2)])]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:5==t.input_col,expression:\"input_col==5\"}],staticClass:\"row\"},[s(\"div\",{staticClass:\"col-12\"},[s(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Inspector\")]),s(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.inspectors,(function(e){return s(\"button\",{staticClass:\"btn\",class:t.form_data.internal_inspector==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(s){t.form_data.internal_inspector=e.id,t.change_select(\"inspector\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.internal_inspector,expression:\"form_data.internal_inspector\"}],class:\"check_field_5\",attrs:{type:\"hidden\",name:\"internal_inspector\",required:\"\"},domProps:{value:t.form_data.internal_inspector},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"internal_inspector\",e.target.value)}}})],2)])]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:6==t.input_col,expression:\"input_col==6\"}],staticClass:\"row \"},[s(\"div\",{staticClass:\"col-12\"},[s(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Inspection\")]),s(\"div\",{staticClass:\"card p-0\"},[s(\"div\",{staticClass:\"p-4\"},[s(\"div\",{staticClass:\"row mx-0  pb-3\"},[s(\"h2\",{staticClass:\"text-14  col-5 p-0 text-light\"},[t._v(\"Farmer:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.name))])]),s(\"div\",{staticClass:\"row mx-0  pb-3\"},[s(\"h2\",{staticClass:\"text-14   col-5 p-0 text-light\"},[t._v(\"Farmer code:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.farmer_code))])]),s(\"div\",{staticClass:\"row mx-0  pb-3\"},[s(\"h2\",{staticClass:\"text-14 col-5 p-0  text-light\"},[t._v(\"ICS:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.ics_name))])]),s(\"div\",{staticClass:\"row mx-0  pb-3\"},[s(\"h2\",{staticClass:\"text-14 col-5 p-0  text-light\"},[t._v(\"VFC:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.vfc_name))])]),s(\"div\",{staticClass:\"row mx-0 pb-3\"},[s(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Farmer Status:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},t._l(t.form_data.farmer_detail.statuses,(function(e){return s(\"span\",{staticClass:\"pr-1\",class:\"ORG\"==e?\"text-success\":\"NEW\"==e?\"text-blue\":\"text-primary\"},[t._v(t._s(e))])})),0)]),t.form_data.date_of_previous_inspection?s(\"div\",{staticClass:\"row mx-0 pb-3\"},[s(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Date of previous inspection:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.dateFormate(t.form_data.date_of_previous_inspection)))])]):t._e(),s(\"div\",{staticClass:\"row mx-0 pb-3\"},[s(\"h2\",{staticClass:\"text-14 px-0  col-5 text-light\"},[t._v(\"Date of inspection:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.dateFormate(t.form_data.date_of_inspection)))])]),s(\"div\",{staticClass:\"row mx-0 pb-3\"},[s(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Inspector:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.form_data.inspector_detail.name))])]),s(\"div\",{staticClass:\"row mx-0 pb-3\"},[s(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Inspector Phone:\")]),s(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.form_data.inspector_detail.phone))])])])]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}]},[s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.inspector_detail.phone,expression:\"form_data.inspector_detail.phone\"}],staticClass:\"form-control\",class:\"check_field_6\",attrs:{type:\"text\",placeholder:\"Inspector phone number\",readonly:\"\"},domProps:{value:t.form_data.inspector_detail.phone},on:{input:function(e){e.target.composing||t.$set(t.form_data.inspector_detail,\"phone\",e.target.value)}}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.date_of_inspection,expression:\"form_data.date_of_inspection\"}],staticClass:\"form-control\",class:\"check_field_6\",attrs:{type:\"date\",name:\"date_of_inspection\",required:\"\"},domProps:{value:t.form_data.date_of_inspection},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"date_of_inspection\",e.target.value)}}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.is_approved,expression:\"form_data.is_approved\"}],staticClass:\"form-control\",attrs:{type:\"checkbox\",name:\"is_approved\"},domProps:{checked:Array.isArray(t.form_data.is_approved)?t._i(t.form_data.is_approved,null)>-1:t.form_data.is_approved},on:{change:function(e){var s=t.form_data.is_approved,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);a.checked?n<0&&t.$set(t.form_data,\"is_approved\",s.concat([o])):n>-1&&t.$set(t.form_data,\"is_approved\",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.form_data,\"is_approved\",i)}}})])])])]),s(\"div\",{staticClass:\" my-1 footer border-top\"},[s(\"HomeBtn\"),0==t.not_start?s(\"div\",{staticClass:\"px-4\"},[6!=t.input_col?s(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\",gap:\"10px\"}},[s(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.nextCol()}}},[t._v(\"Next \"),s(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})])]):s(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\",gap:\"10px\"}},[t.id?s(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.nextCol(\"land\")}}},[t._v(\"Next \"),s(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})]):s(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"submit\"}},[t._v(\"Save & Next \"),s(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})])])]):t._e()],1),s(\"b-modal\",{attrs:{id:\"confirmPopup\",title:\"Alert\",\"hide-footer\":\"\"}},[s(\"div\",{staticClass:\"modal-body p-0 m-0\"},[s(\"div\",{staticClass:\"row mx-0 mb-3\"},[s(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure want to this action? \")])])]),s(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?s(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.inspectionForm(\"yes\")}}},[t._v(\"Yes\")]):t._e(),s(\"button\",{staticClass:\"btn btn-outline-secondary px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"confirmPopup\")}}},[t._v(\"No\")])])]),s(\"b-modal\",{attrs:{id:\"closePopup\",title:\"Alert\",\"hide-footer\":\"\"}},[s(\"div\",{staticClass:\"modal-body p-0 m-0\"},[s(\"div\",{staticClass:\"row mx-0 mb-3\"},[s(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure you want to close this section? \")])])]),s(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?s(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.goBack()}}},[t._v(\"Yes\")]):t._e(),s(\"button\",{staticClass:\"btn btn-outline-secondary px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"closePopup\")}}},[t._v(\"No\")])])])],1)])])},i=[],o=(s(\"4160\"),s(\"d3b7\"),s(\"159b\"),{metaInfo:{title:\"Home\"},data:function(){return{form_data:{year:2022,type:this.$root.userInfo.fpo,ics:null,vfc:null,farmer:null,is_approved:!1,farmer_detail:{lands:{created_on:null}},internal_inspector:null,inspector_detail:{phone:\"\"},date_of_inspection:\"\"},input_col:2,types:[],icss:[],vfcs:[],farmers:[],inspectors:[],id:this.$route.params.id,not_start:!0,lock_btn:!1}},mounted:function(){this.year=this.this_year,this.form_data.date_of_inspection=this.currentDate(),this.$route.query.farmer&&(this.input_col=5,this.form_data.farmer=this.$route.query.farmer,this.getFarmer()),\"inspector\"==this.$root.user_type&&this.setInspector(),this.getInspector(),this.getFamrerTypes(),this.id&&this.getInspection()},methods:{nextPage:function(t){this.$router.push(\"/inspection-\"+t+\"/\"+this.id)},colBack:function(){this.input_col--,4==this.input_col&&this.$route.query.farmer&&(this.input_col=2),5==this.input_col&&\"inspector\"==this.$root.user_type&&this.$route.query.farmer?this.input_col=6:5==this.input_col&&\"inspector\"==this.$root.user_type&&(this.input_col=4),3==this.input_col&&\"inspector\"==this.$root.user_type&&(this.input_col=4)},nextCol:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",e=this;return!this.lock_btn&&(4==this.input_col&&\"inspector\"==this.$root.user_type?(this.input_col=6,!1):(this.lock_btn=!0,void setTimeout((function(){e.lock_btn=!1;for(var s=document.getElementsByClassName(\"check_field_\"+e.input_col),a=!0,i=0;i<s.length;i++)s[i].style.border=\"none\",\"\"==s[i].value&&(s[i].style.border=\"1px red solid\",a=!1);if(!a)return e.showAlert(\"Please select a coloumn!\"),!1;e.input_col++,3==e.input_col&&e.$route.query.farmer&&(e.input_col=5),t&&e.nextPage(t)}),300)))},getFamrerTypes:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/get_farmer/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){if(t.types=e,t.not_start=!1,t.change_select(\"type\"),t.id){var s=t;setTimeout((function(){s.change_select(\"ics\"),s.change_select(\"vfc\"),s.change_select(\"farmer\"),s.change_select(\"inspector\")}),500)}}))},getFarmers:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/get_farmer/?vfc=\"+this.form_data.vfc,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.farmers=e,t.not_start=!1}))},setInspector:function(){var t=this;if(this.form_data.internal_inspector=this.$root.inspectorInfo.id,this.form_data.inspector_detail=this.$root.inspectorInfo,this.$route.query.farmer)this.input_col=6;else{this.input_col=4;var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections_filter/?inspector=\"+this.$root.inspectorInfo.id,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.farmers=e,t.not_start=!1}))}},getFarmer:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/farmers/\"+this.form_data.farmer+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){e.status||(e.status=\"NEW\"),t.form_data.farmer_detail=e,t.form_data.type=e.fpo,t.form_data.ics=e.ics,t.form_data.vfc=e.vfc;var s=t;setTimeout((function(){s.change_select(\"type\"),s.change_select(\"ics\"),s.change_select(\"vfc\"),s.change_select(\"farmer\")}),500)}))},getInspector:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/internal_inspector/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.inspectors=e}))},getInspection:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections/\"+this.id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.form_data=e}))},inspectionForm:function(){var t=this;if(!this.form_data.internal_inspector)return this.showAlert(\"Please select an inspector!\"),!1;this.not_start=!0;var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token);var s=new FormData(this.$refs[\"inspectionForm\"]),a=\"/employee/inspections/\",i=\"post\";this.id&&(a=\"/employee/inspections/\"+this.id+\"/\",i=\"put\"),fetch(this.api_url+a,{method:i,headers:e,body:s}).then((function(t){return t.json()})).then((function(e){t.form_data=e,t.id=e.id,t.nextPage(\"land\")}))},change_select:function(t){var e=\"\",s=this;\"type\"==t?(e=this.form_data.type,this.types.forEach((function(t){t.id==e&&(s.icss=t.ics)}))):\"ics\"==t?(e=this.form_data.ics,this.icss.forEach((function(t){t.id==e&&(s.vfcs=t.vfc)}))):\"vfc\"==t?(e=this.form_data.vfc,this.getFarmers()):\"inspector\"==t&&(e=this.form_data.internal_inspector,this.inspectors.forEach((function(t){t.id==e&&(s.form_data.inspector_detail=t)})))}}}),n=o,r=(s(\"ec36\"),s(\"2877\")),c=Object(r[\"a\"])(n,a,i,!1,null,\"b862fb10\",null);e[\"default\"]=c.exports},\"5df2\":function(t,e,s){},ec36:function(t,e,s){\"use strict\";var a=s(\"5df2\"),i=s.n(a);i.a}}]);","extractedComments":[]}