{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c8f9cfea\"],{\"0f83\":function(t,e,a){\"use strict\";var s=a(\"818a\"),i=a.n(s);i.a},\"223a\":function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content main-content2\"},[a(\"div\",[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[t._v(\"Outside Procurement\")])]),a(\"div\",{staticClass:\"d-flex\"})],2),a(\"div\",{staticClass:\"my-3 border-top\"})]),a(\"b-card\",{staticClass:\"main-scroll\"},[a(\"vue-good-table\",{attrs:{columns:t.columns,\"line-numbers\":!1,\"search-options\":{enabled:!0,placeholder:\"Search\"},\"pagination-options\":{enabled:!1,mode:\"records\"},styleClass:\"tableOne vgt-table\",rows:t.rows.results},scopedSlots:t._u([{key:\"table-row\",fn:function(e){return[\"id\"==e.column.field?a(\"span\",[a(\"b-button\",{staticClass:\" px-3 py-1 mx-1\",attrs:{variant:\"primary\"},on:{click:function(a){return t.selectMaterial(e.row)}}},[t._v(\"Select Vehicle\")])],1):\"normal_id\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(e.row.raw_number)+\" \")]):\"product\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(e.row.category)+\"> \"+t._s(e.row.product)+t._s(e.row.parameter?\"> \"+e.row.parameter:\"\")+\" \"),a(\"sup\",[\"Organic\"==e.row.farmer_status?a(\"span\",{staticClass:\"badge badge-success\"},[t._v(\"ORG\")]):t._e()])]):\"total_procured_qty\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(e.row.total_procured_qty)+\"KG \")]):\"date\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(t.dateFormate(e.row.created_on,!0))+\" \")]):t._e()]}}])},[a(\"div\",{staticClass:\"mb-3 filter-but\",attrs:{slot:\"table-actions\"},slot:\"table-actions\"})]),t.rows.count>0?a(\"TablePagination\",{attrs:{page:t.page,rows:t.rows,load_first:t.load_first},on:{changePage:t.changePage}}):t._e()],1),a(\"div\",[a(\"b-modal\",{attrs:{id:\"choose-vehicle\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"form\",{ref:\"chooseVehicle\",on:{submit:function(e){return e.preventDefault(),t.chooseVehicle()}}},[a(\"div\",[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Choose Vehicle\")])])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"success\",type:\"button\"},on:{click:function(e){return t.$bvModal.show(\"create-vehicle\")}}},[t._v(\"Create new vehicle \")]),a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"choose-vehicle\")}}},[t._v(\" Discard \")])],1)],2),a(\"div\",{staticClass:\" my-3 border-top\"})]),a(\"b-row\",{staticClass:\"main-scroll\"},[a(\"b-col\",{attrs:{lg:\"12\",xl:\"12\"}},[a(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[a(\"div\",[a(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[a(\"div\",{},[a(\"div\",{staticClass:\"user-info pt-2\"},[a(\"table\",{staticClass:\"table\"},[a(\"thead\",[a(\"tr\",[a(\"th\",[t._v(\"Vehicle Number\")]),a(\"th\",[t._v(\"Name\")]),a(\"th\",[t._v(\"Contact\")]),a(\"th\",[t._v(\"Vehicle Type\")]),a(\"th\",[t._v(\"Action\")])])]),a(\"tbody\",t._l(t.vehicles,(function(e,s){return a(\"tr\",[a(\"td\",[t._v(\" \"+t._s(e.vehicle_number)+\" \")]),a(\"td\",[t._v(\" \"+t._s(e.name)+\" \")]),a(\"td\",[t._v(\" \"+t._s(e.contact)+\" \")]),a(\"td\",[t._v(\" \"+t._s(e.vehicle_type)+\" \")]),a(\"td\",[a(\"button\",{staticClass:\"btn btn-primary btn-sm px-3 py-1 ml-4\",attrs:{type:\"button\"},on:{click:function(a){return t.chooseVehicle(e)}}},[t._v(\"Select\")])])])})),0)])])])])])])],1)],1)],1)]),a(\"b-modal\",{attrs:{id:\"create-vehicle\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"form\",{ref:\"vehicleForm\",on:{submit:function(e){return e.preventDefault(),t.vehicleForm()}}},[a(\"div\",[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Vehicle\")]),t._v(\" / Create\")])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"success\",type:\"submit\"}},[t._v(\"Save \")]),a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"create-vehicle\")}}},[t._v(\" Discard \")])],1)],2),a(\"div\",{staticClass:\" my-3 border-top\"})]),a(\"b-row\",{staticClass:\"main-scroll\"},[a(\"b-col\",{attrs:{lg:\"12\",xl:\"12\"}},[a(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[a(\"div\",[a(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[a(\"div\",{},[a(\"div\",{staticClass:\"user-info pt-2\"},[a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Vehicle Type : \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.vehicle_type,expression:\"form_data.vehicle_type\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Vehicle Type\",type:\"text\",autocomplete:\"off\",name:\"vehicle_type\",required:\"\"},domProps:{value:t.form_data.vehicle_type},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"vehicle_type\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Driver Name: \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.name,expression:\"form_data.name\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Driver Name\",type:\"text\",autocomplete:\"off\",name:\"name\",required:\"\"},domProps:{value:t.form_data.name},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"name\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Driver Contact: \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.contact,expression:\"form_data.contact\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Driver Contact\",type:\"text\",autocomplete:\"off\",name:\"contact\",required:\"\"},domProps:{value:t.form_data.contact},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"contact\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Vehicle No : \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.vehicle_number,expression:\"form_data.vehicle_number\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Vehicle No\",type:\"text\",autocomplete:\"off\",name:\"vehicle_number\",required:\"\"},domProps:{value:t.form_data.vehicle_number},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"vehicle_number\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Origin of the Vehicle : \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.origin_of_the_vehicle,expression:\"form_data.origin_of_the_vehicle\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Origin of the Vehicle\",type:\"text\",autocomplete:\"off\",name:\"origin_of_the_vehicle\",required:\"\"},domProps:{value:t.form_data.origin_of_the_vehicle},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"origin_of_the_vehicle\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Warehouse: \")]),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.warehouse,expression:\"form_data.warehouse\"}],staticClass:\"ui-autocomplete-input w-100 mx-1\",attrs:{name:\"destination\"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.$set(t.form_data,\"warehouse\",e.target.multiple?a:a[0])}}},t._l(t.warehouses,(function(e){return a(\"option\",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])])])])])],1)],1)],1)])],1)],1)},i=[],o=(a(\"d3b7\"),a(\"a773\")),n={metaInfo:{title:\"OUTSIDE PROCUREMENT\"},components:{TablePagination:o[\"a\"]},data:function(){return{columns:[{label:\"Dispatch Id\",field:\"normal_id\"},{label:\"Product\",field:\"product\"},{label:\"Quantity (KG)\",field:\"total_procured_qty\"},{label:\"Vendor\",field:\"vendor\"},{label:\"Date\",field:\"date\"},{label:\"Action\",field:\"id\"}],rows:{results:[],count:0},page:0,load_first:!0,current_row:[],form_data:{},vehicles:[]}},mounted:function(){this.$root.current_section=\"production\",this.getWarehouses(),this.changePage(1)},methods:{changePage:function(t){this.page=t,this.load_first=!0,this.getRows()},getRows:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/normal_procured/?page=\"+this.page+\"&purchase_type=2&status=Collecting\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){\"Invalid page.\"==e.detail?t.rows={results:[],count:0}:(t.load_first=!1,t.rows=e)}))},selectMaterial:function(t){this.current_row=t,this.$bvModal.show(\"choose-vehicle\"),this.getVehicles()},getVehicles:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/vehicle/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.vehicles=e}))},vehicleForm:function(){var t=this,e=new FormData(this.$refs[\"vehicleForm\"]),a=new Headers;a.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/qc/vehicle/\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.getVehicles(),t.$bvModal.hide(\"create-vehicle\"),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},chooseVehicle:function(t){var e=this;this.$bvModal.hide(\"choose-vehicle\");var a=new FormData;a.append(\"vehicle\",t.id),a.append(\"normal_procurement_id\",this.current_row.id);var s=new Headers;s.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/attach_vehicle_to_normal/\",{method:\"POST\",body:a,headers:s}).then((function(t){return t.json()})).then((function(t){t.success?(e.getRows(),e.showAlert(\"Selected Successfully!\")):e.showAlert(\"Something Wrong!\")}))}}},r=n,c=(a(\"0f83\"),a(\"2877\")),l=Object(c[\"a\"])(r,s,i,!1,null,null,null);e[\"default\"]=l.exports},\"818a\":function(t,e,a){},a773:function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"vgt-wrap__footer vgt-clearfix\",attrs:{bis_skin_checked:\"1\"}},[a(\"div\",{staticClass:\"footer__row-count vgt-pull-left\",attrs:{bis_skin_checked:\"1\"}},[a(\"span\",{staticClass:\"footer__row-count__label\"},[t._v(\"Jump to page\")]),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.current_page,expression:\"current_page\"}],staticClass:\"ml-2\",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.current_page=e.target.multiple?a:a[0]},function(e){return t.changePage(t.current_page)}]}},t._l(t.max_page,(function(e){return a(\"option\",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),t.load_first?a(\"div\",{staticClass:\"table_pagination_loading\"}):a(\"div\",{staticClass:\"footer__navigation vgt-pull-right\"},[a(\"a\",{staticClass:\"footer__navigation__page-btn\",class:t.rows.previous?\"\":\"disabled\",attrs:{href:\"javascript:undefined\",tabindex:\"0\"},on:{click:function(e){t.rows.previous&&t.changePage(t.current_page--)}}},[a(\"span\",{staticClass:\"chevron left\"}),a(\"span\",[t._v(\"Prev\")])]),a(\"div\",{staticClass:\"footer__navigation__info\",attrs:{bis_skin_checked:\"1\"}},[t._v(t._s(t.page)+\" - \"+t._s(t.rows.results.length)+\" of \"+t._s(t.rows.count))]),a(\"a\",{staticClass:\"footer__navigation__page-btn\",class:t.rows.next?\"\":\"disabled\",attrs:{href:\"javascript:undefined\",tabindex:\"0\"},on:{click:function(e){t.rows.next&&t.changePage(t.current_page++)}}},[a(\"span\",[t._v(\"Next\")]),t._v(\" \"),a(\"span\",{staticClass:\"chevron right\"})])])])])},i=[],o={props:[\"page\",\"rows\",\"load_first\"],data:function(){return{max_page:1,current_page:this.page,results:20}},mounted:function(){this.max_page=parseInt(this.rows.count/this.results),this.rows.count%this.results!=0&&this.max_page++},methods:{changePage:function(){this.$emit(\"changePage\",this.current_page)}}},n=o,r=a(\"2877\"),c=Object(r[\"a\"])(n,s,i,!1,null,null,null);e[\"a\"]=c.exports}}]);","extractedComments":[]}