{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3fe88e94\"],{a679:function(t,a,e){},bd7b:function(t,a,e){\"use strict\";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"main-content create-main\"},[e(\"form\",{ref:\"dataForm\",on:{submit:function(a){return a.preventDefault(),t.dataForm()}}},[e(\"div\",[e(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[e(\"h5\",{staticClass:\"mb-0\"},[e(\"span\",{staticClass:\"text-success\"},[t._v(\"Planning\")]),t._v(\" / \"+t._s(t.slugToWord(t.action)))])]),e(\"div\",{staticClass:\"d-flex\"},[e(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"success\",type:\"submit\"}},[t._v(\"Save \")]),e(\"router-link\",{attrs:{to:\"/app/production/planning\"}},[e(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"}},[t._v(\"Discard \")])],1)],1)],2),e(\"div\",{staticClass:\" my-3 border-top\"})]),e(\"b-row\",{staticClass:\"main-scroll pt-2\"},[e(\"b-col\",{attrs:{lg:\"5\",xl:\"5\"}},[e(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[e(\"div\",[e(\"h5\",[t._v(\"Tasks\")]),e(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\"col-md-12\"},t._l(t.departments,(function(a){return e(\"div\",{staticClass:\"pt-4 pb-2 px-4\"},[e(\"h6\",[e(\"b-form-radio\",{attrs:{name:-1!=a.id?\"department\":\"\",id:\"department\"+a.id,value:a.id},model:{value:t.form_data.department,callback:function(a){t.$set(t.form_data,\"department\",a)},expression:\"form_data.department\"}},[e(\"b\",[t._v(t._s(a.name)+\" \"+t._s(-1!=a.id?\"Department\":\"\"))])])],1),a.id==t.form_data.department?e(\"table\",{staticClass:\"w-100 ml-2\"},[t._l(a.production_processes,(function(n){return e(\"tr\",[e(\"td\",[e(\"b-form-checkbox\",{attrs:{name:-1!=a.id?\"main_production_process\":\"yards\",id:\"main_production_process\"+n.id,value:n.id},on:{change:function(e){-1!=a.id&&t.selectAllProcess(n)}},model:{value:t.form_data.main_production_process,callback:function(a){t.$set(t.form_data,\"main_production_process\",a)},expression:\"form_data.main_production_process\"}},[e(\"b\",[t._v(t._s(n.name))])])],1)])})),e(\"tr\",[e(\"td\",{staticClass:\"pt-2\"},[e(\"b-form-checkbox\",{attrs:{name:\"is_attendance\",id:\"is_attendance\"+a.id},model:{value:t.form_data.is_attendance,callback:function(a){t.$set(t.form_data,\"is_attendance\",a)},expression:\"form_data.is_attendance\"}},[e(\"b\",[t._v(\"Attendance\")])])],1)]),e(\"tr\",[e(\"td\",{},[e(\"b-form-checkbox\",{attrs:{name:\"is_printing\",id:\"is_printing\"+a.id},model:{value:t.form_data.is_printing,callback:function(a){t.$set(t.form_data,\"is_printing\",a)},expression:\"form_data.is_printing\"}},[e(\"b\",[t._v(\"Printing\")])])],1)])],2):t._e()])})),0)]),e(\"hr\")])])])],1),e(\"b-col\",{attrs:{lg:\"7\",xl:\"7\"}},[e(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[e(\"div\",[e(\"h5\",[t._v(\"Assign Task\")]),e(\"div\",{staticClass:\"ul-contact-detail__timeline\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\"col-md-12\"},t._l(t.departments,(function(a){return a.id==t.form_data.department?e(\"div\",[e(\"h5\",[t._v(t._s(a.name)+\" \"+t._s(-1!=a.id?\"Department\":\"\"))]),t._l(a.production_processes,(function(a){return t.form_data.main_production_process.includes(a.id)?e(\"table\",{staticClass:\"w-100\"},[e(\"tr\",[e(\"td\",[t._v(t._s(a.name))])]),t._l(a.production_processes,(function(a){return e(\"tr\",[e(\"td\",[e(\"b-form-checkbox\",{attrs:{name:\"production_process\",id:\"production_process\"+a.id,value:a.id},model:{value:t.form_data.production_process,callback:function(a){t.$set(t.form_data,\"production_process\",a)},expression:\"form_data.production_process\"}},[e(\"b\",[t._v(t._s(a.name))])])],1)])}))],2):t._e()}))],2):t._e()})),0)]),e(\"hr\")])])])],1)],1)],1)])},s=[],r=(e(\"4160\"),e(\"caad\"),e(\"d3b7\"),e(\"2532\"),e(\"159b\"),e(\"4dbf\")),o={metaInfo:{title:\"PRODUCTION - PLANNING\"},components:{ProductFields:r[\"a\"]},data:function(){return{form_data:{department:null,main_production_process:[],production_process:[],date:null,yard:null},id:null,action:\"create\",departments:[]}},mounted:function(){this.$root.current_section=\"production\",this.action=this.$route.params.action,\"edit\"==this.action&&(this.id=this.$route.params.id,this.getForm()),this.getDepartments()},methods:{getForm:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/planning/\"+this.id+\"/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.form_data=a}))},getDepartments:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/departments/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.departments=a,t.getYards()}))},selectAllProcess:function(t){var a=this;t.production_processes.forEach((function(t){a.form_data.production_process.includes(t.id)||a.form_data.production_process.push(t.id)}))},getYards:function(){var t=this,a=new Headers;a.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/product/yards/\",{method:\"get\",headers:a}).then((function(t){return t.json()})).then((function(a){t.departments.push({id:-1,name:\"Yard\",production_processes:a})}))},dataForm:function(){this.id?this.updateFormdata():this.createFormdata()},createFormdata:function(){var t=this,a=new FormData(this.$refs[\"dataForm\"]);a.append(\"manager\",this.form_data.manager),a.append(\"date\",this.form_data.date),a.append(\"supervisor\",this.form_data.supervisor);var e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/planning/\",{method:\"POST\",body:a,headers:e}).then((function(t){return t.json()})).then((function(a){a.id>0?t.showAlert(\"Saved Successfully!\"):t.showAlert(\"Something Wrong!\")}))},updateFormdata:function(){var t=this,a=new FormData(this.$refs[\"dataForm\"]);a.append(\"manager\",this.form_data.manager),a.append(\"date\",this.form_data.date),a.append(\"supervisor\",this.form_data.supervisor);var e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/planning/\"+this.id+\"/\",{method:\"PUT\",body:a,headers:e}).then((function(t){return t.json()})).then((function(a){a.id>0?t.showAlert(\"Updated Successfully!\"):t.showAlert(\"Something Wrong!\")}))}}},i=o,d=(e(\"d311\"),e(\"2877\")),c=Object(d[\"a\"])(i,n,s,!1,null,null,null);a[\"default\"]=c.exports},d311:function(t,a,e){\"use strict\";var n=e(\"a679\"),s=e.n(n);s.a}}]);","extractedComments":[]}