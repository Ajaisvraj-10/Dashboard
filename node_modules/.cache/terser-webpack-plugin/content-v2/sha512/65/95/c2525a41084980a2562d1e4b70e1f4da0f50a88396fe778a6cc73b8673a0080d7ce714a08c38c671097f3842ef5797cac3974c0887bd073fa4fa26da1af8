{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-62666f24\"],{\"15e9\":function(t,e,a){\"use strict\";var s=a(\"836d\"),o=a.n(s);o.a},\"4bfb\":function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content main-content2\"},[a(\"div\",[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[t._v(t._s(t.slugToWord(\"workers-book\")))])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"success\"},on:{click:function(e){return t.$bvModal.show(\"attendance\")}}},[t._v(\"+ Add Shift \")])],1)],2),a(\"div\",{staticClass:\"my-3 border-top\"})]),a(\"b-card\",{staticClass:\"main-scroll\"},[a(\"vue-good-table\",{attrs:{columns:t.columns,\"line-numbers\":!1,\"search-options\":{enabled:!0,placeholder:\"Search\"},\"pagination-options\":{enabled:!1,mode:\"records\"},styleClass:\"tableOne vgt-table\",rows:t.rows.results},scopedSlots:t._u([{key:\"table-row\",fn:function(e){return[\"id\"==e.column.field?a(\"span\",[a(\"router-link\",{attrs:{to:\"/app/security-gate/workers-book-workers/\"+e.row.id}},[a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"primary\"}},[t._v(\"View\")])],1)],1):\"workers\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(e.row.workers.length)+\" \")]):\"created_on\"==e.column.field?a(\"span\",[t._v(\" \"+t._s(t.dateFormate(e.row.created_on))+\" \")]):t._e()]}}])}),t.rows.count>0?a(\"TablePagination\",{attrs:{page:t.page,rows:t.rows,load_first:t.load_first},on:{changePage:t.changePage}}):t._e()],1),a(\"div\",[a(\"b-modal\",{attrs:{id:\"attendance\",\"hide-header\":\"\",\"hide-footer\":\"\",\"no-close-on-backdrop\":!0}},[a(\"form\",{ref:\"createShift\",on:{submit:function(e){return e.preventDefault(),t.createShift()}}},[a(\"div\",[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Add Shift\")])])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"b-button\",{staticClass:\" px-3 py-1 d-sm-block mx-1\",attrs:{type:\"submit\",variant:\"success\"}},[t._v(\"Save\")]),a(\"b-button\",{staticClass:\" px-3 py-1 d-sm-block mx-1\",attrs:{type:\"button\",variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"attendance\")}}},[t._v(\"Close\")])],1)],2),a(\"div\",{staticClass:\" my-3 border-top\"}),a(\"b-row\",{staticClass:\"main-scroll\"},[a(\"b-col\",{attrs:{lg:\"12\",xl:\"12\"}},[a(\"b-card\",{staticClass:\"mt-2 pt-0\",attrs:{\"header-bg-variant\":\"transparent\"}},[a(\"div\",{staticClass:\"o_thread_search_input col-12\"},[a(\"span\",{staticStyle:{width:\"120px\",color:\"black\"}},[t._v(\"Date : \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.date,expression:\"form_data.date\"}],staticClass:\"form-control w-100 mt-1\",staticStyle:{\"background-color\":\"#f5fafb\"},attrs:{placeholder:\"Date\",type:\"date\",autocomplete:\"off\",readonly:\"\"},domProps:{value:t.form_data.date},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"date\",e.target.value)}}})]),a(\"div\",{staticClass:\"o_thread_search_input col-12\"},[a(\"span\",{staticStyle:{width:\"120px\",color:\"black\"}},[t._v(\"Shift : \")]),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.shift,expression:\"form_data.shift\"}],staticClass:\"form-control w-100 mt-1\",staticStyle:{\"background-color\":\"#f5fafb\"},attrs:{name:\"shift\"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.$set(t.form_data,\"shift\",e.target.multiple?a:a[0])}}},t._l(t.shifts,(function(e){return a(\"option\",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),a(\"hr\",{staticClass:\"my-2\"})])],1)],1)],1)])])],1)],1)},o=[],n=(a(\"d3b7\"),a(\"a773\")),r={metaInfo:{title:\"States\"},components:{TablePagination:n[\"a\"]},data:function(){return{columns:[{label:\"Shift\",field:\"shift\"},{label:\"Workers\",field:\"workers\"},{label:\"Date\",field:\"created_on\"},{label:\"Action\",field:\"id\"}],rows:{results:[],count:0},page:0,load_first:!0,form_data:{date:this.currentDate(),shift:\"DAY\"}}},mounted:function(){this.$root.current_section=\"security-gate\",this.changePage(1)},methods:{changePage:function(t){this.page=t,this.load_first=!0,this.getRows()},getRows:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/security/workers_shift/?page=\"+this.page,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){\"Invalid page.\"==e.detail?t.rows={results:[],count:0}:(t.load_first=!1,t.rows=e)}))},createShift:function(){var t=this,e=new Headers,a=new FormData;a.append(\"shift\",this.form_data.shift),e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/security/workers_shift/\",{method:\"POST\",body:a,headers:e}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.$bvModal.hide(\"attendance\"),t.changePage(1),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))}}},i=r,l=(a(\"15e9\"),a(\"2877\")),c=Object(l[\"a\"])(i,s,o,!1,null,null,null);e[\"default\"]=c.exports},\"836d\":function(t,e,a){}}]);","extractedComments":[]}