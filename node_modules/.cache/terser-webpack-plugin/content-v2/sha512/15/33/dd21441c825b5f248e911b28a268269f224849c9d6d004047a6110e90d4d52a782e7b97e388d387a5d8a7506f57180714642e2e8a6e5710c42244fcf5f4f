{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-657c7de4\"],{1689:function(t,e,a){\"use strict\";var s=a(\"9aeb\"),i=a.n(s);i.a},\"9aeb\":function(t,e,a){},a519:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content\",class:t.background_start?\"\":\"biowin-scroll\"},[a(\"main\",[a(\"div\",{staticClass:\"header-bio\"},[a(\"div\",{staticClass:\"container d-flex justify-content-between align-items-center px-4\"},[a(\"div\",{staticClass:\"d-flex\"},[a(\"router-link\",{attrs:{tag:\"a\",to:\"/\"}},[a(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"}})]),a(\"h4\",{staticClass:\"font-weight-700 px-3\"},[t._v(\" Farmers\")])],1),\"aeo\"==t.$root.user_type?a(\"router-link\",{attrs:{tag:\"a\",to:\"/farmer/create\"}},[a(\"div\",{staticClass:\"add-btn\"},[a(\"img\",{attrs:{src:\"/images/plus.png\"}}),a(\"h6\",{staticClass:\"text-16 add-btn-text ml-2\"},[t._v(\"Add\")])])]):t._e()],1)]),t.not_start?a(\"div\",{},[a(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}})]):t._e(),a(\"div\",{staticClass:\"main-body4\",style:t.not_start?\"opacity:0.5\":\"\",attrs:{id:\"main_body\"}},[a(\"div\",{staticClass:\" my-3 flex-align px-3\",staticStyle:{gap:\"10px\"}},[a(\"div\",{staticClass:\"input-group input-group-lg mb-0\"},[t._m(0),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.searchQuery,expression:\"searchQuery\"}],staticClass:\"form-control\",attrs:{type:\"text\",autocomplete:\"off\",placeholder:\"Search\"},domProps:{value:t.searchQuery},on:{keyup:function(e){return t.resultQuery()},input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),a(\"b-modal\",{attrs:{id:\"filter-data\",title:\"Filter\",\"hide-footer\":\"\"}},[a(\"div\",[a(\"form\",{ref:\"filterData\",on:{submit:function(e){return e.preventDefault(),t.filterData()}}},[a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"ICS \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"ics\"},on:{change:function(e){return t.changeICS()}},model:{value:t.filter.ics,callback:function(e){t.$set(t.filter,\"ics\",e)},expression:\"filter.ics\"}},t._l(t.all_ics,(function(e){return e.type==t.$root.userInfo.fpo?a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))]):t._e()})),1)],1),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"Panchayath \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"panchayath\"},model:{value:t.filter.panchayath,callback:function(e){t.$set(t.filter,\"panchayath\",e)},expression:\"filter.panchayath\"}},t._l(t.all_panchayaths,(function(e){return a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"label\",{staticClass:\"check-container\"},[t._v(\"VFC \")]),a(\"b-form-select\",{staticClass:\"mb-3\",staticStyle:{\"max-width\":\"120px\",\"min-height\":\"35px\"},attrs:{name:\"vfc\"},model:{value:t.filter.vfc,callback:function(e){t.$set(t.filter,\"vfc\",e)},expression:\"filter.vfc\"}},t._l(t.all_vfc,(function(e){return e.location.revenue_village_detail.panchayath==t.filter.panchayath?a(\"b-form-select-option\",{attrs:{value:e.id}},[t._v(t._s(e.name))]):t._e()})),1)],1),a(\"hr\"),a(\"div\",{staticClass:\"filter-item flex-align\"},[a(\"b-button\",{staticClass:\"w-100 px-3 py-1 ml-1 mr-2\",attrs:{type:\"button\",variant:\"outline-info\"},on:{click:function(e){return t.cancelFilter()}}},[t._v(\"Cancel\")]),a(\"b-button\",{staticClass:\"w-100 px-3 py-1 mr-1 ml-2\",attrs:{type:\"submit\",variant:\"success\"},on:{click:function(e){t.farmers=[]}}},[t._v(\"Submit\")])],1)])])])],1),a(\"div\",{staticClass:\"mb-3 px-3\"},[a(\"div\",{staticClass:\"card px-2 py-2\"},[a(\"table\",[a(\"tr\",[a(\"td\",{staticClass:\"pl-2\"},[t._v(\"Total Farmers\")]),a(\"td\",[t._v(\":\")]),a(\"th\",[t._v(\" \"+t._s(t.farmers_count))])]),t.filter.ics?a(\"tr\",[a(\"td\",{staticClass:\"pl-2\"},[t._v(\"ICS\")]),a(\"td\",[t._v(\":\")]),a(\"th\",t._l(t.all_ics,(function(e){return e.id==t.filter.ics?a(\"span\",{staticClass:\"badge badge-primary py-1 ml-1\"},[t._v(t._s(e.name))]):t._e()})),0)]):t._e(),t.filter.vfc?a(\"tr\",[a(\"td\",{staticClass:\"pl-2\"},[t._v(\"VFC\")]),a(\"td\",[t._v(\":\")]),a(\"th\",t._l(t.all_vfc,(function(e){return e.id==t.filter.vfc?a(\"span\",{staticClass:\"badge badge-success py-1 ml-1\"},[t._v(t._s(e.name))]):t._e()})),0)]):t._e(),t.filter.panchayath?a(\"tr\",[a(\"td\",{staticClass:\"pl-2\"},[t._v(\"Panchayath\")]),a(\"td\",[t._v(\":\")]),a(\"th\",t._l(t.all_panchayaths,(function(e){return e.id==t.filter.panchayath?a(\"span\",{staticClass:\"badge badge-primary py-1 ml-1\"},[t._v(t._s(e.name))]):t._e()})),0)]):t._e()])])]),a(\"div\",{staticClass:\"hr-min\"}),a(\"div\",{staticClass:\"my-3 px-3\",staticStyle:{display:\"flex\",\"flex-direction\":\"column\",gap:\"16px\"}},[t._l(t.farmers,(function(e,s){return a(\"div\",[a(\"router-link\",{attrs:{to:\"/farmer-detail/\"+e.id}},[a(\"div\",{staticClass:\" borderless-card\"},[a(\"div\",{staticClass:\"d-flex justify-content-between align-items-center  px-0 py-1\"},[a(\"h4\",{staticClass:\"font-weight-500\"},[t._v(t._s(e.name)+\" \"),t._l(e.statuses,(function(e){return a(\"span\",{staticClass:\"font-weight-500 text-13 pr-2\",class:\"ORG\"==e?\"text-success\":\"NEW\"==e?\"text-blue\":\"text-primary\"},[t._v(t._s(e))])}))],2),a(\"h4\",{staticClass:\"font-weight-500 text-right text-13 ml-3 py-1 text-green text-14\",staticStyle:{\"white-space\":\"pre\"}},[t._v(\"#\"+t._s(e.farmer_code))])]),a(\"div\",{staticClass:\"hr-min\"}),a(\"div\",{staticClass:\"d-flex justify-content-between px-0 py-1 \"},[a(\"div\",[a(\"h6\",{staticClass:\" font-weight-500 text-light\"},[t._v(\"Address: \"),a(\"b\",[t._v(t._s(e.house_name))])])]),a(\"h6\",{staticClass:\"m-0 font-weight-700 pl-2 text-light \"},[t._v(t._s(e.panchayath))])])])])],1)})),a(\"div\",{},[t.load_more?a(\"h4\",{staticClass:\"font-weight-700 my-2 pl-2 text-green text-center\",on:{click:function(e){t.filter.count>0?t.filterData():t.getFarmers()}}},[t._v(\"Load More\")]):t._e()])],2)]),a(\"div\",{staticClass:\"filter-footer\"},[a(\"div\",{staticClass:\"footer-item2 d-flex align-items-center\",on:{click:function(e){return t.$router.push(\"/\")}}},[a(\"img\",{attrs:{src:\"/images/home.png\",width:\"25\"}}),a(\"h5\",{staticClass:\"m-0 pl-2 text-white\"},[t._v(\"Home\")])]),a(\"div\",{directives:[{name:\"b-modal\",rawName:\"v-b-modal.filter-data\",modifiers:{\"filter-data\":!0}}],staticClass:\"footer-item2 filter-icon d-flex align-items-center\",on:{click:function(e){return t.selectFilter()}}},[a(\"img\",{attrs:{src:\"/images/settings.png\",width:\"25\"}}),t.filter.count>0?a(\"div\",{staticClass:\"filter-number\"},[t._v(t._s(t.filter.count))]):t._e(),a(\"h5\",{staticClass:\"m-0 pl-2 text-white\"},[t._v(\"Filter\")])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"input-group-prepend\"},[a(\"div\",{staticClass:\"input-group-text\"},[a(\"img\",{attrs:{src:\"/images/search.png\",width:\"25\"}})])])}],r=(a(\"4de4\"),a(\"d3b7\"),{metaInfo:{title:\"Home\"},data:function(){return{farmers:[],temp_farmers:[],searchQuery:\"\",page:0,farmers_count:0,filter:{ics:null,panchayath:null,vfc:null,count:0},load_more:!1,not_start:!0,background_start:!0,lastScrollPosition:0}},mounted:function(){this.checkLogin(),localStorage.getItem(\"farmer_filter\")?(this.filter=JSON.parse(localStorage[\"farmer_filter\"]),this.selectFilter(),this.filterData()):this.getFarmers();var t=this;document.getElementsByClassName(\"main-body4\")[0].addEventListener(\"scroll\",(function(){t.handleScroll()}))},methods:{handleScroll:function(){var t=document.getElementsByClassName(\"main-body4\")[0].scrollTop;if(t<0)return 0;this.background_start=t<this.lastScrollPosition,this.lastScrollPosition=t},resultQuery:function(){var t=this;\"check_cam101\"==this.searchQuery&&this.$router.push(\"/inspection-digital-sign/5\");var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/farmers/?search=\"+this.searchQuery,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.farmers=e.farmers,t.load_more=!1})),\"\"==this.searchQuery&&(this.farmers_count=jsonData.farmers_count,this.farmers=this.temp_farmers,this.getFarmers())},getFarmers:function(){var t=this;this.page++,this.not_start=!0;var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token);var a=\"?page=\"+this.page;\"inspector\"==this.$root.user_type&&(a+=\"&inspector=\"+this.$root.inspectorInfo.id),fetch(this.api_url+\"/employee/farmers/\"+a,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.not_start=!1,t.farmers_count=e.farmers_count;for(var a=0;a<e.farmers.length;a++)t.farmers.push(e.farmers[a]);t.load_more=!0,a<20&&(t.load_more=!1),t.temp_farmers=t.farmers}))},selectFilter:function(){this.page=0,this.getTypes(),this.getIcs(),this.filter.ics&&this.changeICS()},cancelFilter:function(){this.page=0,this.farmers=[],this.getFarmers(),this.$bvModal.hide(\"filter-data\"),this.filter={ics:null,panchayath:null,vfc:null,count:0},localStorage.removeItem(\"farmer_filter\")},calcFilterCount:function(){var t=0;this.filter.ics&&t++,this.filter.panchayath&&t++,this.filter.vfc&&t++,this.filter.count=t,localStorage.setItem(\"farmer_filter\",JSON.stringify(this.filter)),this.$bvModal.hide(\"filter-data\")},filterData:function(){var t=this;this.page++,this.not_start=!0,this.calcFilterCount();var e=new FormData;e.append(\"fpo\",this.$root.userInfo.fpo),this.filter.ics&&e.append(\"ics\",this.filter.ics),this.filter.panchayath&&e.append(\"panchayath\",this.filter.panchayath),this.filter.vfc&&e.append(\"vfc\",this.filter.vfc),\"inspector\"==this.$root.user_type&&e.append(\"inspector\",this.$root.inspectorInfo.id);var a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/farmers/?page=\"+this.page,{method:\"post\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){t.not_start=!1,t.farmers_count=e.farmers_count;for(var a=0;a<e.farmers.length;a++)t.farmers.push(e.farmers[a]);t.load_more=!0,a<20&&(t.load_more=!1),e.farmers.length<=0&&t.showAlert(\"No farmers found!\")}))}}}),n=r,l=(a(\"1689\"),a(\"2877\")),c=Object(l[\"a\"])(n,s,i,!1,null,\"cb493fba\",null);e[\"default\"]=c.exports}}]);","extractedComments":[]}