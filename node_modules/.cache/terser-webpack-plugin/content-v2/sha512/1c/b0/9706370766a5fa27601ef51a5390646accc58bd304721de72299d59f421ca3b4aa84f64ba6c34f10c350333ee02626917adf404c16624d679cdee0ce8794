{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c5455864\"],{\"383b\":function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.input_col,expression:\"input_col==2\"}]},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\" Product Category: \")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.categories,(function(e){return a(\"button\",{staticClass:\"btn\",class:t.category_id==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){!t.readonly&&(t.category_id=e.id),t.restProducts(1)}}},[t._v(t._s(e.name)+\" \")])})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.category_id,expression:\"category_id\"}],class:\"check_field_2\",attrs:{type:\"hidden\",name:\"category\",required:\"\"},domProps:{value:t.category_id},on:{input:function(e){e.target.composing||(t.category_id=e.target.value)}}})],2)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:3==t.input_col,expression:\"input_col==3\"}]},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\" Product Types : \")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.product_types,(function(e){return e.category.includes(t.category_id)?a(\"button\",{staticClass:\"btn\",class:t.product_type_id==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){!t.readonly&&(t.product_type_id=e.id),t.restProducts(2)}}},[t._v(t._s(e.name)+\" \")]):t._e()})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.product_type_id,expression:\"product_type_id\"}],class:\"check_field_3\",attrs:{type:\"hidden\",name:\"product_type\",required:\"\"},domProps:{value:t.product_type_id},on:{input:function(e){e.target.composing||(t.product_type_id=e.target.value)}}})],2)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:4==t.input_col,expression:\"input_col==4\"}]},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\" Product : \")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.products,(function(e){return e.category==t.category_id&&e.product_type==t.product_type_id?a(\"button\",{staticClass:\"btn\",class:t.product_id==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){!t.readonly&&(t.product_id=e.id),t.selectProduct()}}},[t._v(t._s(e.name)+\" \")]):t._e()})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.product_id,expression:\"product_id\"}],class:\"check_field_4\",attrs:{type:\"hidden\",name:\"product\",required:\"\"},domProps:{value:t.product_id},on:{input:function(e){e.target.composing||(t.product_id=e.target.value)}}})],2)])])},r=[],i=(a(\"d3b7\"),{props:[\"product_id\",\"readonly\",\"input_col\"],data:function(){return{categories:[],product_types:[],products:[],category_id:null,product_type_id:null,lock_pro_btn:!1}},mounted:function(){this.product_id?this.getProduct():(this.getCategories(),this.getProductTypes(),this.getProducts())},methods:{nextColPro:function(){var t=this;if(this.lock_pro_btn)return!1;this.lock_pro_btn=!0,setTimeout((function(){t.lock_pro_btn=!1,t.input_col++}),300)},getProduct:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/product/products/\"+this.product_id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.products=e,t.category_id=e.category_detail.id,t.product_type_id=e.product_type_detail.id,t.getCategories(),t.getProductTypes(),t.getProducts()}))},getCategories:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/product/categories/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.categories=e}))},getProductTypes:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/product/product_types/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.product_types=e}))},getProducts:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/product/products/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.products=e}))},selectProduct:function(){this.$emit(\"productId\",this.product_id)},restProducts:function(t){this.nextColPro(),this.product_id=null}}}),o=i,n=a(\"2877\"),c=Object(n[\"a\"])(o,s,r,!1,null,null,null);e[\"a\"]=c.exports},\"525a\":function(t,e,a){},\"9db4\":function(t,e,a){\"use strict\";var s=a(\"525a\"),r=a.n(s);r.a},b77b:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content\",class:t.background_start?\"\":\"biowin-scroll\"},[a(\"main\",[a(\"div\",{staticClass:\"header-bio\"},[a(\"div\",{staticClass:\"container d-flex justify-content-between align-items-center px-4\"},[a(\"div\",{staticClass:\"d-flex\"},[a(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"},on:{click:function(e){return t.$router.push(\"/normal-procurement\")}}}),a(\"h4\",{staticClass:\" px-3\"},[t._v(\" Normal Procurement\")])]),t.lines.length>0&&\"Collecting\"==t.form_data.status?a(\"div\",{staticClass:\"tick add-btn\",on:{click:function(e){return t.$bvModal.show(\"complete-procurement\")}}},[a(\"img\",{attrs:{src:\"/images/tick.png\"}}),a(\"h6\",{staticClass:\"text-16 add-btn-text ml-2\"},[t._v(\"Complete\")])]):t._e(),a(\"b-modal\",{attrs:{id:\"confirmPopup2\",title:\"Alert\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body  m-0\"},[a(\"div\",{staticClass:\"col-6 mb-3\"},[a(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure want to this action? \")])])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.updateFormdata(\"yes\")}}},[t._v(\"Yes\")]):t._e(),a(\"button\",{staticClass:\"btn  px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"confirmPopup2\")}}},[t._v(\"No\")])])])],1)]),t.not_start?a(\"div\",{},[a(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}})]):t._e(),a(\"form\",{ref:\"dataForm\",style:t.not_start?\"opacity:0.5\":\"\",on:{submit:function(e){return e.preventDefault(),t.dataForm()}}},[a(\"div\",{staticClass:\"main-body4 px-3 py-2 create\"},[!t.$route.query.add||\"Collecting\"!=t.form_data.status&&0!=t.form_data.farmer_lines.length?a(\"div\",[a(\"h5\",{staticClass:\"my-3\"},[t._v(\"Procurement Details:\")]),a(\"div\",{staticClass:\"card p-0 mb-4\"},[a(\"div\",{staticClass:\"p-4\"},[a(\"div\",{staticClass:\"row details-row\"},[t._m(0),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Warehouse:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.warehouse_detail.name))])]),a(\"div\",{staticClass:\" col-6\"},[a(\"h2\",{staticClass:\"   \"},[t._v(\"Product Status:\")]),a(\"h2\",{staticClass:\"  \"},[\"Organic\"==t.form_data.farmer_status?a(\"span\",{staticClass:\"badge badge-success p-1\"},[t._v(t._s(t.form_data.farmer_status))]):a(\"span\",{staticClass:\"badge badge-secondary p-1\"},[t._v(t._s(t.form_data.farmer_status))])])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Product Category:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.product_detail.category_detail.name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Product Types:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.product_detail.product_type_detail.name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Product:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.product_detail.name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Date:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.dateFormate(t.form_data.created_on)))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Total Quantity:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.total_procured_qty)+\"KG\")])]),a(\"div\",{staticClass:\" col-6 pb-0\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Total Farmers:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.farmer_lines.length))])]),a(\"div\",{staticClass:\" col-6 pb-0\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Status:\")]),a(\"h2\",{staticClass:\" \"},[a(\"span\",{staticClass:\"badge p-1 \",class:\"Collecting\"==t.form_data.status?\"badge-warning\":\"On the Way\"==t.form_data.status?\"badge-primary\":\"Qc Rejected\"==t.form_data.status?\"badge-danger\":\"badge-success\"},[t._v(t._s(t.form_data.status))])])])])])]),t.form_data.vehicle?a(\"h5\",{staticClass:\"my-3\"},[t._v(\"Vehicle Details:\")]):t._e(),t.form_data.vehicle?a(\"div\",{staticClass:\"card p-0 mb-4\"},[a(\"div\",{staticClass:\"p-4\"},[a(\"div\",{staticClass:\"row details-row\"},[a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Driver Name:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.vehicle_detail.name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Phone:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.vehicle_detail.contact))])]),a(\"div\",{staticClass:\" col-6 pb-0\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Vehicle No:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.vehicle_detail.vehicle_number))])]),a(\"div\",{staticClass:\" col-6 pb-0\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Vehicle Type:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.form_data.vehicle_detail.vehicle_type))])])])])]):t._e()]):t._e(),a(\"div\",{staticClass:\"d-flex my-2 align-items-center  justify-content-between\"},[a(\"h5\",{staticClass:\"my-2\"},[t._v(\"Farmers: \"),a(\"b\",[t._v(t._s(t.lines.length))])]),\"Collecting\"==t.form_data.status?a(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block\",attrs:{variant:\"secondary\",type:\"button\"},on:{click:function(e){return t.addFarmerPopup()}}},[t._v(\" Add Farmer \")]):t._e()],1),a(\"div\",[a(\"b-modal\",{attrs:{id:\"add-farmer\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"form\",{on:{submit:function(e){return e.preventDefault(),t.addFarmer()}}},[a(\"div\",{staticClass:\"d-flex  align-items-center pt-2 pb-3 border-bottom mb-3  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Add\")]),t._v(\" / Farmer\")])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"img\",{attrs:{src:\"/images/close.png\",width:\"15\"},on:{click:function(e){return t.$bvModal.hide(\"add-farmer\")}}})])],2),a(\"div\",{staticClass:\"card-scroll \",attrs:{\"header-bg-variant\":\"transparent\"}},[a(\"div\",{staticClass:\"user-info\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==t.farmer_col,expression:\"farmer_col==1\"}]},[a(\"h4\",{staticClass:\" pr-4 py-2\"},[t._v(\" ICS: \")]),a(\"div\",{staticClass:\"inspection-btn\"},t._l(t.all_ics,(function(e,s){return a(\"button\",{staticClass:\"btn\",class:t.filter.ics==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.filter.ics=e.id,t.nextFarmerCol(),t.changeICS()}}},[t._v(t._s(e.name))])})),0)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.farmer_col,expression:\"farmer_col==2\"}]},[a(\"h4\",{staticClass:\" pr-4 py-2\"},[t._v(\" VFC: \")]),a(\"div\",{staticClass:\"inspection-btn\"},t._l(t.all_vfc,(function(e,s){return a(\"button\",{staticClass:\"btn\",class:t.filter.vfc==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.filter.vfc=e.id,t.nextFarmerCol(),t.searchFarmers()}}},[t._v(t._s(e.name))])})),0)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:3==t.farmer_col,expression:\"farmer_col==3\"}]},[a(\"h4\",{staticClass:\" pr-4 py-2\"},[t._v(\" Farmers: \")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.farmers,(function(e,s){return a(\"button\",{staticClass:\"btn\",class:t.add_line.farmer==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.selectFarmer(e,t.add_line),t.nextFarmerCol()}}},[t._v(t._s(e.farmer_code)+\" - \"+t._s(e.name)+\" \")])})),0!=t.farmers.length||t.search_no_farmers?t.search_no_farmers?a(\"div\",{staticClass:\"text-danger text-center\"},[t._v(\" No farmers! \")]):t._e():a(\"div\",{staticClass:\"text-primary text-center\"},[t._v(\" Searching... \")])],2)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:4==t.farmer_col,expression:\"farmer_col==4\"}]},[a(\"div\",{staticClass:\"mb-4\"},[a(\"div\",{},[a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Farmer Code\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.farmer_detail.farmer_code))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Farmer\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.farmer_detail.name))])]),a(\"div\",{staticClass:\"col-6  pb-3\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"ICS:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.farmer_detail.ics_name))])]),a(\"div\",{staticClass:\"col-6  pb-3\"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"VFC:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.farmer_detail.vfc_name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Estimate QTY\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.estimate_qty)+\"KG\")])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Estimate QTY Balance\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(t.add_line.estimate_qty_balance)+\"KG\")])])])]),a(\"div\",[a(\"th\",[t._v(\"Procure Qty (KG)\")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.add_line.procure_qty,expression:\"add_line.procure_qty\"}],staticClass:\"form-control\",attrs:{placeholder:\"Enter Quantity\",type:\"number\",min:\"0\",autocomplete:\"off\",disabled:t.add_line.estimate_qty<=0||t.add_line.estimate_qty_balance2<=0,required:\"\"},domProps:{value:t.add_line.procure_qty},on:{input:[function(e){e.target.composing||t.$set(t.add_line,\"procure_qty\",e.target.value)},function(e){return t.procureQty()}]}}),t.add_line.estimate_qty<=0||t.add_line.estimate_qty_balance2<=0?a(\"span\",{staticClass:\"text-danger text-right\"},[t._v(\"Cannot add this farmer!\")]):t._e(),t.over_max_qty?a(\"span\",{staticClass:\"text-danger text-right\"},[t._v(\"Maximum quantity is \"+t._s(t.add_line.estimate_qty_balance2)+\"KG!\")]):t._e()])])])]),a(\"div\",{staticClass:\"border-top pt-3 mt-3 d-flex align-items-center mx-auto justify-content-center\"},[a(\"b-button\",{class:4==t.farmer_col?\"w-25\":\"w-50\",staticStyle:{\"min-height\":\"40px\",\"border-radius\":\"5px\"},attrs:{variant:\"outline-danger\",type:\"button\"},on:{click:function(e){t.farmer_col>1&&t.farmer_col--}}},[t._v(\"Back \")]),4==t.farmer_col?a(\"b-button\",{staticClass:\"ml-2 w-25\",staticStyle:{\"min-height\":\"40px\",\"border-radius\":\"5px\"},attrs:{variant:\"success\",type:\"submit\",disabled:t.add_line.estimate_qty<=0||t.add_line.estimate_qty_balance2<=0}},[t._v(\"Save \")]):t._e()],1)])]),a(\"b-modal\",{attrs:{id:\"complete-procurement\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"form\",{on:{submit:function(e){return e.preventDefault(),t.updateFormdata()}}},[a(\"div\",{staticClass:\"d-flex  align-items-center pt-2 pb-3 border-bottom mb-3  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Complete /\")]),t._v(\" Procurement\")])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"img\",{attrs:{src:\"/images/close.png\",width:\"15\"},on:{click:function(e){return t.$bvModal.hide(\"complete-procurement\")}}})])],2),a(\"div\",{staticClass:\"p-2\",staticStyle:{\"background-color\":\"#eff0f40\"}},[a(\"div\",{staticClass:\"user-info\"},[a(\"div\",{staticClass:\"my-2\"},[a(\"div\",{},[a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"  col-6  \"},[t._v(\"Total Farmers:\")]),a(\"h2\",{staticClass:\" col-6  text-right\"},[t._v(t._s(t.form_data.farmer_lines.length)+\"Farmer\"+t._s(t.checkMult(t.form_data.farmer_lines.length)))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"  col-6  \"},[t._v(\"Total Procured QTY:\")]),a(\"h2\",{staticClass:\" col-6  text-right\"},[t._v(t._s(t.form_data.total_procured_qty)+\"KG\")])])])]),a(\"div\",{staticClass:\"mb-3\"},[a(\"th\",[t._v(\"Dispatch Number\")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.raw_number,expression:\"form_data.raw_number\"}],staticClass:\"form-control\",attrs:{placeholder:\"Enter Number\",type:\"text\",min:\"0\",autocomplete:\"off\",required:\"\"},domProps:{value:t.form_data.raw_number},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"raw_number\",e.target.value)}}})]),a(\"div\",{staticClass:\"mb-3\"},[a(\"div\",{staticClass:\"d-flex my-2 align-items-center  justify-content-between\"},[a(\"b\",{staticClass:\"mb-0 \"},[t._v(\"Select Vehicle\")]),a(\"span\",{staticClass:\"badge badge-primary py-2\",on:{click:function(e){t.form_data.vehicle_detail={warehouse:t.form_data.warehouse},t.changeVehicle(\"create\")}}},[t._v(\" Add Vehicle \")])]),a(\"div\",{staticClass:\"o_thread_search_input mb-1\"},[a(\"div\",{staticClass:\"inspection-btn mt-3 mb-0\"},t._l(t.vehicles,(function(e){return a(\"div\",{staticClass:\"card py-2 px-3 w-100\",class:t.form_data.vehicle==e.id?\"active-vehicle-card\":\"\",on:{click:function(a){return t.changeVehicle(e)}}},[a(\"div\",{staticClass:\"d-flex align-items-start\",staticStyle:{gap:\"10px\"}},[a(\"img\",{staticClass:\"pt-2\",staticStyle:{width:\"38px\"},attrs:{src:\"/images/lorry.png\"}}),a(\"div\",{staticStyle:{width:\"calc(100% - 38px)\"}},[t._v(\" Driver: \"),a(\"b\",[t._v(t._s(e.name))]),a(\"br\"),t._v(\" Vehicle No: \"),a(\"b\",[t._v(t._s(e.vehicle_number))]),a(\"br\"),t._v(\" Vehicle: \"),a(\"b\",[t._v(t._s(e.vehicle_type))])])])])})),0)])])]),a(\"div\",{staticClass:\"border-top pt-3 mt-3 d-flex align-items-center justify-content-center\"},[a(\"b-button\",{staticClass:\"w-100\",staticStyle:{\"min-height\":\"40px\",\"border-radius\":\"5px\"},attrs:{variant:\"secondary\",type:\"button\"},on:{click:function(e){return t.updateFormdata()}}},[t._v(\"Save & Complete \")])],1)])])]),a(\"b-modal\",{attrs:{id:\"create-vehicle\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"form\",{ref:\"vehicleForm\",on:{submit:function(e){return e.preventDefault(),t.vehicleForm()}}},[a(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[a(\"h5\",{staticClass:\"mb-0\"},[a(\"span\",{staticClass:\"text-success\"},[t._v(\"Vehicle\")]),t._v(\" / Create\")])]),a(\"div\",{staticClass:\"d-flex\"},[a(\"b-button\",{staticStyle:{\"min-height\":\"30px\",\"border-radius\":\"5px\"},attrs:{variant:\"success\",size:\"sm\",type:\"submit\"}},[t._v(\"Save \")]),a(\"b-button\",{staticClass:\"ml-1\",staticStyle:{\"min-height\":\"30px\",\"border-radius\":\"5px\"},attrs:{variant:\"light\",size:\"sm\"},on:{click:function(e){return t.$bvModal.hide(\"create-vehicle\")}}},[t._v(\" Close \")])],1)],2),a(\"hr\",{staticClass:\"mt-3 mb-2\"}),a(\"div\",{staticClass:\"p-2\",attrs:{\"header-bg-variant\":\"transparent\"}},[a(\"div\",{staticClass:\"user-info pt-2\"},[a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Driver Name: \")]),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"Driver Name\",type:\"text\",autocomplete:\"off\",name:\"name\",required:\"\"},domProps:{value:t.form_data.vehicle_detail.name}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Driver Contact: \")]),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"Driver Contact\",type:\"text\",autocomplete:\"off\",name:\"contact\",required:\"\"},domProps:{value:t.form_data.vehicle_detail.contact}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Vehicle Type : \")]),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"Vehicle Type\",type:\"text\",autocomplete:\"off\",name:\"vehicle_type\",required:\"\"},domProps:{value:t.form_data.vehicle_detail.vehicle_type}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Vehicle No : \")]),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"Vehicle No\",type:\"text\",autocomplete:\"off\",name:\"vehicle_number\",required:\"\"},domProps:{value:t.form_data.vehicle_detail.vehicle_number}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Origin of the Vehicle : \")]),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"Origin of the Vehicle\",type:\"text\",autocomplete:\"off\",name:\"origin_of_the_vehicle\",required:\"\"},domProps:{value:t.form_data.vehicle_detail.origin_of_the_vehicle}})]),a(\"div\",{staticClass:\"o_thread_search_input\"},[a(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"Destination: \")]),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.warehouse,expression:\"form_data.warehouse\"}],staticClass:\"form-control\",attrs:{name:\"destination\"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.$set(t.form_data,\"warehouse\",e.target.multiple?a:a[0])}}},t._l(t.warehouses,(function(e){return a(\"option\",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])])])])],1),t._l(t.lines,(function(e,s){return a(\"div\",{staticClass:\"card  mb-4\"},[a(\"div\",{staticClass:\"p-4\"},[a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Farmer Code\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(e.farmer_detail.farmer_code))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Farmer\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(e.farmer_detail.name))])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Estimate QTY\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(e.estimate_qty)+\"KG\")])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Estimate QTY Balance\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(e.estimate_qty_balance)+\"KG\")])]),a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Procure Qty\")]),a(\"h2\",{staticClass:\"  \"},[t._v(t._s(e.procure_qty)+\"KG\")])]),\"Collecting\"!=t.form_data.status?a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Qc Status\")]),a(\"h2\",{staticClass:\"  \"},[a(\"span\",{staticClass:\"badge p-1 \",class:\"Waiting\"==e.qc_status?\"badge-warning\":\"Approved\"==e.qc_status?\"badge-success\":\"Rejected\"==e.qc_status?\"badge-danger\":\"badge-primary\"},[t._v(t._s(e.qc_status))])])]):t._e()])])})),a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}]},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.add_line.farmer,expression:\"add_line.farmer\"}],staticClass:\"form-control\",attrs:{placeholder:\"0\",type:\"text\",autocomplete:\"off\",name:\"farmer\",readonly:\"\"},domProps:{value:t.add_line.farmer},on:{input:function(e){e.target.composing||t.$set(t.add_line,\"farmer\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.id,expression:\"form_data.id\"}],staticClass:\"form-control\",attrs:{placeholder:\"0\",type:\"text\",autocomplete:\"off\",name:\"normal_procurement\",readonly:\"\"},domProps:{value:t.form_data.id},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"id\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.add_line.estimate_qty,expression:\"add_line.estimate_qty\"}],staticClass:\"form-control\",attrs:{placeholder:\"0\",type:\"text\",autocomplete:\"off\",name:\"estimate_qty\",readonly:\"\"},domProps:{value:t.add_line.estimate_qty},on:{input:function(e){e.target.composing||t.$set(t.add_line,\"estimate_qty\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.add_line.procure_qty,expression:\"add_line.procure_qty\"}],staticClass:\"form-control\",attrs:{placeholder:\"0\",type:\"text\",autocomplete:\"off\",name:\"procure_qty\",readonly:\"\"},domProps:{value:t.add_line.procure_qty},on:{input:function(e){e.target.composing||t.$set(t.add_line,\"procure_qty\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.add_line.estimate_qty_balance,expression:\"add_line.estimate_qty_balance\"}],staticClass:\"form-control\",attrs:{placeholder:\"0\",type:\"text\",autocomplete:\"off\",name:\"estimate_qty_balance\",readonly:\"\"},domProps:{value:t.add_line.estimate_qty_balance},on:{input:function(e){e.target.composing||t.$set(t.add_line,\"estimate_qty_balance\",e.target.value)}}}),a(\"input\",{staticClass:\"form-control\",attrs:{placeholder:\"\",type:\"text\",autocomplete:\"off\",name:\"qc_status\",readonly:\"\"},domProps:{value:t.add_line.qc_status}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.total_procured_qty,expression:\"form_data.total_procured_qty\"}],attrs:{type:\"text\",name:\"total_procured_qty\"},domProps:{value:t.form_data.total_procured_qty},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"total_procured_qty\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.total_quantity,expression:\"form_data.total_quantity\"}],attrs:{type:\"text\",name:\"total_quantity\"},domProps:{value:t.form_data.total_quantity},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"total_quantity\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.total_estimate_qty,expression:\"form_data.total_estimate_qty\"}],attrs:{type:\"text\",name:\"total_estimate_qty\"},domProps:{value:t.form_data.total_estimate_qty},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"total_estimate_qty\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer_status,expression:\"form_data.farmer_status\"}],attrs:{type:\"text\",name:\"farmer_status\"},domProps:{value:t.form_data.farmer_status},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"farmer_status\",e.target.value)}}}),t.form_data.raw_number?a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.raw_number,expression:\"form_data.raw_number\"}],attrs:{type:\"text\",name:\"raw_number\"},domProps:{value:t.form_data.raw_number},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"raw_number\",e.target.value)}}}):t._e(),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.vehicle,expression:\"form_data.vehicle\"}],attrs:{type:\"hidden\",name:\"vehicle\",required:\"\"},domProps:{value:t.form_data.vehicle},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"vehicle\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.status,expression:\"form_data.status\"}],attrs:{type:\"text\",name:\"status\"},domProps:{value:t.form_data.status},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"status\",e.target.value)}}})])])],2),a(\"b-modal\",{attrs:{id:\"confirmPopup\",title:\"Alert\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body  m-0\"},[a(\"div\",{staticClass:\"col-6 mb-3\"},[a(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure want to this action? \")])])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.addFarmer(\"yes\")}}},[t._v(\"Yes\")]):t._e(),a(\"button\",{staticClass:\"btn  px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"confirmPopup\")}}},[t._v(\"No\")])])])],1),a(\"div\",{staticClass:\"filter-footer\"},[a(\"div\",{staticClass:\"footer-item2 d-flex align-items-center\",on:{click:function(e){return t.$router.push(\"/\")}}},[a(\"img\",{attrs:{src:\"/images/home.png\",width:\"25\"}}),a(\"h5\",{staticClass:\"m-0 pl-2 text-white\"},[t._v(\"Home\")])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\" col-6 \"},[a(\"h2\",{staticClass:\"    \"},[t._v(\"Purchase Type:\")]),a(\"h2\",{staticClass:\"  \"},[t._v(\"Farmer purchase\")])])}],i=(a(\"4de4\"),a(\"4160\"),a(\"caad\"),a(\"d3b7\"),a(\"159b\"),a(\"383b\")),o={metaInfo:{title:\"FPO - ICS\"},components:{ProductFields:i[\"a\"]},data:function(){return{form_data:{farmer_lines:[],vehicle:null,raw_number:\"\",purchase_type:1,created_on:new Date,sample_procurement:null,status:\"Collecting\",total_farmers:0,product_detail:{category_detail:{},product_type_detail:{}},vehicle_detail:{},total_procured_qty:0,total_quantity:0,warehouse_detail:{}},id:this.$route.params.id,filter:{ics:null,panchayath:null,vfc:null,count:0},farmer_col:1,load_products:!1,lines:[],add_line:{estimate_qty:0,estimate_qty_balance:0,estimate_qty_balance2:0,farmer:null,farmer_detail:{name:\"\",farmer_code:\"\"},vfc:null,procure_qty:0,qc_status:\"Waiting\",farmers_list:[]},product_id:null,action:\"create\",vehicles:[],farmers:[],not_start:!0,search_no_farmers:!1,over_max_qty:!1,lock_btn:!1,background_start:!0,lastScrollPosition:0}},mounted:function(){this.form_data.created_on=this.currentDate(),this.getVehicles(),this.id?this.getForm():(this.load_products=!0,this.not_start=!1);var t=this;document.getElementsByClassName(\"main-body4\")[0].addEventListener(\"scroll\",(function(){t.handleScroll()}))},methods:{getForm:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/qc/normal_procured/\"+this.id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.form_data=e,t.product_id=e.product,t.lines=e.farmer_lines,t.load_products=!0,t.not_start=!1}))},addFarmer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"no\";if(\"no\"==t)return this.$bvModal.show(\"confirmPopup\"),!1;this.$bvModal.hide(\"confirmPopup\"),this.$bvModal.hide(\"add-farmer\"),this.lines.push(this.add_line),this.calcultion();var e=this;setTimeout((function(){e.dataForm()}),50)},procureQty:function(){var t=this;this.over_max_qty=!1,this.add_line.procure_qty>this.add_line.estimate_qty_balance2&&(this.over_max_qty=!0,setTimeout((function(){t.add_line.procure_qty=t.add_line.estimate_qty_balance2,t.add_line.estimate_qty_balance=t.add_line.estimate_qty_balance2-t.add_line.procure_qty}),150)),this.add_line.estimate_qty_balance=this.add_line.estimate_qty_balance2-this.add_line.procure_qty,calcultion()},calcultion:function(){var t=[],e=0,a=0;this.lines.forEach((function(s,r){!t.includes(s.farmer)&&s.farmer&&t.push(s.farmer),e+=parseFloat(s.procure_qty),a+=parseFloat(s.estimate_qty)})),this.form_data.total_farmers=t.length,this.form_data.total_procured_qty=e,this.form_data.total_estimate_qty=a,\"Collecting\"==this.form_data.status&&(this.form_data.total_quantity=e)},productId:function(t){this.product_id=t,this.form_data.product=t},addFarmerPopup:function(){this.farmer_col=1,this.filter.vfc&&(this.farmer_col=3,this.searchFarmers()),this.getIcs(),this.$bvModal.show(\"add-farmer\")},nextFarmerCol:function(){var t=this;if(this.lock_btn)return!1;this.lock_btn=!0,setTimeout((function(){t.lock_btn=!1,t.farmer_col++}),300)},searchFarmers:function(){var t=this;this.farmers=[],this.search_no_farmers=!1;var e=new Headers,a=new FormData;a.append(\"vfc\",this.filter.vfc),a.append(\"search_type\",\"normal_procurement\"),a.append(\"farmer_status\",this.form_data.farmer_status),a.append(\"product\",this.product_id),e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/search_farmers/\",{method:\"post\",headers:e,body:a}).then((function(t){return t.json()})).then((function(e){t.farmers=e,e.length<=0&&(t.search_no_farmers=!0)}))},selectFarmer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;t&&(e.farmer_detail=t,e.farmer=t.id,e.farmers_list=[]);var a=new Headers,s=new FormData;s.append(\"farmer\",e.farmer),s.append(\"product\",this.product_id),a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/farmer_full_details/\",{method:\"post\",headers:a,body:s}).then((function(t){return t.json()})).then((function(t){e.estimate_qty=t.estimate_qty,e.procure_qty=\"\",e.estimate_qty_balance=t.estimate_qty_balance,e.estimate_qty_balance2=t.estimate_qty_balance}))},changeVehicle:function(t){\"create\"==t?(this.form_data.vehicle=\"\",this.$bvModal.show(\"create-vehicle\")):(this.form_data.vehicle=t.id,this.form_data.vehicle_detail=t)},getVehicles:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/qc/vehicle/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.vehicles=e,t.getWarehouses()}))},vehicleForm:function(){var t=this;this.not_start=!0;var e=new FormData(this.$refs[\"vehicleForm\"]);e.append(\"vehicle_for\",\"procurement\");var a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/qc/vehicle/\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.getVehicles(),t.form_data.vehicle=e.id,t.$bvModal.hide(\"create-vehicle\"),t.not_start=!1,t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},dataForm:function(){this.not_start=!0,this.attachFarmer()},attachFarmer:function(){var t=this,e=new FormData(this.$refs[\"dataForm\"]),a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/qc/normal_procured_farmers/\",{method:\"POST\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.getForm(),t.showAlert(\"Added Successfully!\")):t.showAlert(\"Something Wrong!\")}))},updateFormdata:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"no\";if(\"no\"==e)return this.$bvModal.show(\"confirmPopup2\"),!1;if(this.$bvModal.hide(\"confirmPopup2\"),!this.form_data.raw_number)return this.showAlert(\"Please enter the raw number!\"),!1;if(!this.form_data.vehicle)return this.showAlert(\"Please select a vehicle!\"),!1;var a=new FormData(this.$refs[\"dataForm\"]);a.append(\"purchase_type\",this.form_data.purchase_type),a.append(\"keys\",0),a.append(\"status\",\"On the Way\");var s=new Headers;s.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/qc/normal_procured/\"+this.id+\"/\",{method:\"PUT\",body:a,headers:s}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.not_start=!1,t.showAlert(\"Procurement Completed!\"),t.$router.push(\"/normal-procurement\")):t.showAlert(\"Something Wrong!\")}))},handleScroll:function(){var t=document.getElementsByClassName(\"main-body4\")[0].scrollTop;if(t<0)return 0;this.background_start=t<this.lastScrollPosition,this.lastScrollPosition=t}}},n=o,c=(a(\"9db4\"),a(\"2877\")),l=Object(c[\"a\"])(n,s,r,!1,null,\"df9962c8\",null);e[\"default\"]=l.exports}}]);","extractedComments":[]}