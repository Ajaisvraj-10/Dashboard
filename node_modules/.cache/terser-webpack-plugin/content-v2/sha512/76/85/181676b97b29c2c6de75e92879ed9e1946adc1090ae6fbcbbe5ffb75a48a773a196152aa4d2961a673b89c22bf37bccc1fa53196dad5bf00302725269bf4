{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-d4d1563e\"],{4310:function(t,e,a){\"use strict\";var i=a(\"664d\"),s=a.n(i);s.a},\"664d\":function(t,e,a){},b0c0:function(t,e,a){var i=a(\"83ab\"),s=a(\"9bf2\").f,o=Function.prototype,n=o.toString,r=/^\\s*function ([^ (]*)/,c=\"name\";i&&!(c in o)&&s(o,c,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return\"\"}}})},b2c1:function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content\"},[a(\"main\",[a(\"div\",{staticClass:\"header-bio\"},[a(\"div\",{staticClass:\"container d-flex align-items-center px-4 \"},[a(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"},on:{click:function(e){return t.goBack()}}}),a(\"h4\",{staticClass:\"font-weight-700 px-4\"},[t._v(\"Digital Sign\")])])]),t.not_start?a(\"div\",{},[a(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}}),t.previewPhoto?a(\"div\",{staticClass:\"loading_upload\"},[a(\"h3\",{staticClass:\"loading_text\"},[t._v(\"Uploading...\")]),a(\"div\",{staticClass:\"cancel_upload\",on:{click:function(e){return t.cancelUpload()}}},[t._v(\" Cancel & Continue Later \")])]):t._e()]):t._e(),a(\"form\",{ref:\"dataForm\",style:t.not_start?\"opacity:0.5\":\"\",on:{submit:function(e){return e.preventDefault(),t.dataForm()}}},[a(\"div\",{staticClass:\"body-bio px-4 py-2 create\"},[a(\"div\",{staticClass:\"my-3 \"},[a(\"div\",[a(\"b-form-group\",{staticClass:\"yes_or_no_btn\"},[a(\"b-form-radio-group\",{attrs:{options:[\"Farmer\",\"Other\"],\"button-variant\":\"outline-info\",name:\"verifyer\",buttons:\"\"},model:{value:t.form_data.verifyer,callback:function(e){t.$set(t.form_data,\"verifyer\",e)},expression:\"form_data.verifyer\"}})],1)],1),\"Farmer\"==t.form_data.verifyer?a(\"div\",{},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Farmer\")]),a(\"b-form-input\",{attrs:{name:\"verifyer_name\",placeholder:\"Farmer Name\",readonly:\"\"},model:{value:t.form_data.farmer_detail.name,callback:function(e){t.$set(t.form_data.farmer_detail,\"name\",e)},expression:\"form_data.farmer_detail.name\"}})],1):a(\"div\",{},[a(\"div\",[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Name\")]),a(\"b-form-input\",{attrs:{name:\"verifyer_name\",placeholder:\"Name\",required:\"\"},model:{value:t.form_data.verifyer_name,callback:function(e){t.$set(t.form_data,\"verifyer_name\",e)},expression:\"form_data.verifyer_name\"}})],1),a(\"div\",[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Realtion\")]),a(\"b-form-select\",{attrs:{name:\"relationship\"},model:{value:t.form_data.relationship,callback:function(e){t.$set(t.form_data,\"relationship\",e)},expression:\"form_data.relationship\"}},t._l([\"Wife\",\"Husband\",\"Son\",\"Daughter\",\"Parent\",\"Other Family Member\"],(function(e){return a(\"b-form-select-option\",{attrs:{value:e}},[t._v(t._s(e))])})),1)],1)]),a(\"div\",{staticClass:\"mt-4\"},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Photo\")]),t.previewPhoto?a(\"p\",{staticClass:\"card\"},[a(\"img\",{staticClass:\"w-100 rounded\",attrs:{src:t.previewPhoto}})]):t._e(),a(\"div\",{staticClass:\"digital_sign\"},[a(\"label\",{staticClass:\"w-100\"},[a(\"div\",{staticClass:\"prepend-1\"},[a(\"label\",{staticClass:\"camera_label w-100\",attrs:{for:\"camera-input\"}},[a(\"input\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],staticClass:\"form-control text-center w-100\",attrs:{type:\"file\",name:\"photo\",accept:\"image/*\",id:\"camera-input\"},on:{change:t.selectFile}}),a(\"img\",{staticClass:\"mr-2\",staticStyle:{width:\"40px\"},attrs:{src:\"/images/image.png\"}}),t._v(\" Upload Photo \")])])])])])])]),a(\"div\",{staticClass:\"my-1 footer border-top\"},[a(\"HomeBtn\"),0==t.not_start?a(\"div\",{staticClass:\"px-4\"},[t._m(0)]):t._e()],1),a(\"b-modal\",{attrs:{id:\"confirmPopup\",title:\"Alert\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body p-0 m-0\"},[a(\"div\",{staticClass:\"row mx-0 mb-3\"},[a(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure want to this action? \")])])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.dataForm(\"yes\")}}},[t._v(\"Yes\")]):t._e(),a(\"button\",{staticClass:\"btn btn-outline-secondary px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"confirmPopup\")}}},[t._v(\"No\")])])])],1)]),a(\"div\",[a(\"b-modal\",{attrs:{id:\"cameraPopup\",\"hide-header\":\"\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body p-0 m-0\"},[a(\"video\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.current_photo,expression:\"!current_photo\"}],staticStyle:{width:\"100%\",height:\"calc(100vh - 110px)\",\"object-fit\":\"cover\"},attrs:{id:\"video_camera\",playsinline:\"\",autoplay:\"\"}}),a(\"canvas\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.current_photo,expression:\"current_photo\"}],staticStyle:{width:\"100%\",height:\"calc(100vh - 110px)\",\"object-fit\":\"cover\"},attrs:{id:\"canvas_preview\",width:t.cam_width,height:t.cam_height}}),a(\"div\",{staticClass:\"row camera-footer\"},[a(\"div\",{staticClass:\"col-4 text-center pt-4\"},[t.current_photo?a(\"button\",{staticClass:\"btn btn-light\",staticStyle:{\"font-size\":\"16px\"},attrs:{type:\"button\"},on:{click:function(e){t.current_photo=\"\"}}},[t._v(\"Camera\")]):a(\"button\",{staticClass:\"btn btn-outline-light px-4\",staticStyle:{\"font-size\":\"16px\"},attrs:{type:\"button\"}},[t._v(\"Flip\")])]),a(\"div\",{staticClass:\"col-4 text-center pt-2\"},[t.current_photo?t._e():a(\"img\",{staticStyle:{height:\"70px\",width:\"70px\"},attrs:{src:\"/images/cam2.png\"},on:{click:function(e){return t.capturePhoto()}}})]),a(\"div\",{staticClass:\"col-4 text-center pt-4\"},[t.current_photo?a(\"button\",{staticClass:\"btn btn-light\",staticStyle:{\"font-size\":\"16px\"},attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"cameraPopup\")}}},[t._v(\"Select\")]):a(\"button\",{staticClass:\"btn btn-outline-light px-4\",staticStyle:{\"font-size\":\"16px\"},attrs:{type:\"button\"},on:{click:function(e){t.current_photo,t.$bvModal.hide(\"cameraPopup\")}}},[t._v(\"Close\")])])])])]),a(\"b-modal\",{attrs:{id:\"allConfirmationPopup\",title:\"Confirmation Window\",\"hide-footer\":\"\"},on:{close:function(e){return t.verifyInspection(!0)}}},[a(\"div\",{staticClass:\"modal-body p-0 m-0\"},[a(\"div\",{staticClass:\"popup_body\",staticStyle:{\"max-height\":\"78vh\"}},[a(\"table\",{staticClass:\"table\"},[a(\"tr\",{on:{click:function(e){!t.form_data.lands.id&&t.$router.push(\"/inspection-land/\"+t.id)}}},[a(\"th\",[t._v(\" Land Details \")]),a(\"td\",[t.form_data.lands.id?a(\"span\",[a(\"i\",{staticClass:\"fas fa-check-circle text-success\"})]):a(\"span\",[a(\"i\",{staticClass:\"fas fa-times-circle text-danger\"})])])]),a(\"tr\",{on:{click:function(e){!t.form_data.plants.id&&t.$router.push(\"/inspection-plant/\"+t.id)}}},[a(\"th\",[t._v(\" Plant Details \")]),a(\"td\",[t.form_data.plants.id?a(\"span\",[a(\"i\",{staticClass:\"fas fa-check-circle text-success\"})]):a(\"span\",[a(\"i\",{staticClass:\"fas fa-times-circle text-danger\"})])])]),t._l(t.q_categories,(function(e,i){return a(\"tr\",{on:{click:function(a){!(e.answerd_count>0)&&t.$router.push(\"/inspection-questions/\"+t.id+\"?category=\"+e.id)}}},[a(\"th\",[t._v(\" \"+t._s(e.name)+\" \")]),a(\"td\",[e.answerd_count>0?a(\"span\",[a(\"i\",{staticClass:\"fas fa-check-circle text-success\"})]):a(\"span\",[a(\"i\",{staticClass:\"fas fa-times-circle text-danger\"})])])])})),a(\"tr\",{on:{click:function(e){t.not_start=!1,t.$bvModal.hide(\"allConfirmationPopup\")}}},[a(\"th\",[t._v(\" Digita Sign \")]),a(\"td\",[t.form_data.photo?a(\"span\",[a(\"i\",{staticClass:\"fas fa-check-circle text-success\"})]):a(\"span\",[a(\"i\",{staticClass:\"fas fa-times-circle text-danger\"})])])])],2)])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success w-100 px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.verifyInspection(!0)}}},[t._v(\"Finish\")]):t._e()])])],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\",gap:\"10px\"}},[a(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"submit\"}},[t._v(\"Save & Finish \"),a(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})])])}],o=(a(\"b0c0\"),a(\"d3b7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"2b3d\"),{metaInfo:{title:\"Home\"},data:function(){return{form_data:{year:2022,farmer:null,verifyer:\"Farmer\",farmer_detail:{},lands:{survey_number:null,total_farming_area:null},plants:{}},q_categories:[],id:this.$route.params.id,not_start:!0,video:{},current_photo:\"\",previewPhoto:\"\",front:!1,cam_width:360,cam_height:625}},mounted:function(){this.year=this.this_year,this.id&&this.getInspection()},methods:{nextPage:function(t){this.$router.push(\"/inspection-\"+t+\"/\"+this.id)},getInspection:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections/\"+this.id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){e.lands.year||(e.lands.year=t.this_year),t.form_data=e,t.form_data.lands.survey_number||(t.form_data.lands.survey_number=t.id),t.not_start=!1}))},selectFile:function(t){var e=t.target.files[0];if(e){this.previewPhoto=\"\";var a=this;setTimeout((function(){a.previewPhoto=URL.createObjectURL(e)}),10)}},cancelUpload:function(){this.not_start=!1,this.verifyInspection()},dataForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"no\";return this.previewPhoto?\"no\"==t?(this.$bvModal.show(\"confirmPopup\"),!1):(this.$bvModal.hide(\"confirmPopup\"),this.not_start=!0,void(this.form_data.lands.id&&this.form_data.plants.id?this.updateFormdata():(this.verifyInspection(),this.showAlert(\"Please complete previous sections!\")))):(this.showAlert(\"Please upload a photo!\"),!1)},updateFormdata:function(){var t=this,e=new FormData(this.$refs[\"dataForm\"]);e.append(\"year\",this.form_data.year),e.append(\"type\",this.form_data.type),e.append(\"ics\",this.form_data.ics),e.append(\"vfc\",this.form_data.vfc),e.append(\"farmer\",this.form_data.farmer),e.append(\"date_of_inspection\",this.form_data.date_of_inspection),e.append(\"aeo\",this.form_data.aeo),e.append(\"internal_inspector\",this.form_data.internal_inspector),this.form_data.date_of_previous_inspection&&e.append(\"date_of_previous_inspection\",this.form_data.date_of_previous_inspection);var a=new Headers;a.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections/\"+this.form_data.id+\"/\",{method:\"PUT\",body:e,headers:a}).then((function(t){return t.json()})).then((function(e){e.id>0?(t.form_data=e,t.verifyInspection(),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},verifyInspection:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.not_start=!1,t?\"aeo\"!=this.$root.user_type||this.form_data.is_approved?this.$router.push(\"/inspections\"):this.aprroveInspection():(this.getQuestions(),this.$bvModal.show(\"allConfirmationPopup\"))},aprroveInspection:function(){var t=this;this.not_start=!0;var e=new Headers,a=new FormData;e.append(\"Authorization\",\"Bearer \"+this.$root.token),a.append(\"inspection\",this.id),fetch(this.api_url+\"/employee/approve_inspection/\",{method:\"POST\",body:a,headers:e}).then((function(t){return t.json()})).then((function(e){t.not_start=!1,e.success?(t.showAlert(\"Inspection Auto Approved!\"),t.$router.push(\"/inspections\")):t.showAlert(\"Something Wrong!\")}))},getQuestions:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/add_answers/?inspection=\"+this.form_data.id,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.q_categories=e}))},openCamera:function(){var t=this;this.current_photo=\"\",this.$bvModal.show(\"cameraPopup\"),setTimeout((function(){t.video=document.getElementById(\"video_camera\");var e={video:{facingMode:t.front?\"user\":\"environment\",width:t.cam_width,height:t.cam_height}};navigator.mediaDevices.getUserMedia(e).then((function(e){t.video.srcObject=e,t.video.onloadedmetadata=function(e){t.video.play()}})).catch((function(t){console.log(t.name+\": \"+t.message)}))}),300)},capturePhoto:function(){var t=document.getElementById(\"canvas_preview\"),e=t.getContext(\"2d\");e.drawImage(this.video,0,0),this.current_photo=t.toDataURL(\"image/png\")}}}),n=o,r=(a(\"4310\"),a(\"2877\")),c=Object(r[\"a\"])(n,i,s,!1,null,\"0d361544\",null);e[\"default\"]=c.exports}}]);","extractedComments":[]}