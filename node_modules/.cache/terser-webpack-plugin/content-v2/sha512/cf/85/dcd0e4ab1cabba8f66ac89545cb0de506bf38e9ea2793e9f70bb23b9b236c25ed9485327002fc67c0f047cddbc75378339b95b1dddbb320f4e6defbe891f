{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-eb42ca74\"],{\"4dbf\":function(t,e,s){\"use strict\";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Product Category: \")]),s(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.category_id,expression:\"category_id\"}],staticClass:\"ui-autocomplete-input w-100 mx-1\",attrs:{name:\"category\",required:\"\",disabled:t.readonly},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.category_id=e.target.multiple?s:s[0]},function(e){return t.restProducts(1)}]}},[s(\"option\",{attrs:{value:\"\",disabled:\"\"}},[t._v(\"Select a category\")]),t._l(t.categories,(function(e){return s(\"option\",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Product Types : \")]),s(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.product_type_id,expression:\"product_type_id\"}],staticClass:\"ui-autocomplete-input w-100 mx-1\",attrs:{name:\"product_type\",required:\"\",disabled:t.readonly},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.product_type_id=e.target.multiple?s:s[0]},function(e){return t.restProducts(2)}]}},[s(\"option\",{attrs:{value:\"\",disabled:\"\"}},[t._v(\"Select a type\")]),t._l(t.product_types,(function(e){return e.category.includes(t.category_id)?s(\"option\",{domProps:{value:e.id}},[t._v(t._s(e.name))]):t._e()}))],2)]),s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\" Product : \")]),s(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.product_id,expression:\"product_id\"}],staticClass:\"ui-autocomplete-input w-100 mx-1\",attrs:{name:\"product\",required:\"\",disabled:t.readonly},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.product_id=e.target.multiple?s:s[0]},function(e){return t.selectProduct()}]}},[s(\"option\",{attrs:{value:\"\",disabled:\"\"}},[t._v(\"Select a product\")]),t._l(t.products,(function(e){return e.category==t.category_id&&e.product_type==t.product_type_id?s(\"option\",{domProps:{value:e.id}},[t._v(t._s(e.name))]):t._e()}))],2)])])},r=[],o=(s(\"d3b7\"),{props:[\"product_id\",\"readonly\"],data:function(){return{categories:[],product_types:[],products:[],category_id:\"\",product_type_id:\"\"}},mounted:function(){this.product_id?this.getProduct():(this.product_id=\"\",this.getCategories(),this.getProductTypes(),this.getProducts())},methods:{getProduct:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/product/products/\"+this.product_id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.products=e,t.category_id=e.category_detail.id,t.product_type_id=e.product_type_detail.id,t.getCategories(),t.getProductTypes(),t.getProducts()}))},getCategories:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/product/categories/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.categories=e}))},getProductTypes:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/product/product_types/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.product_types=e}))},getProducts:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/product/products/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.products=e}))},selectProduct:function(){this.$emit(\"productId\",this.product_id)},restProducts:function(t){this.product_id=\"\",this.selectProduct()}}}),i=o,n=s(\"2877\"),c=Object(n[\"a\"])(i,a,r,!1,null,null,null);e[\"a\"]=c.exports},\"5f39\":function(t,e,s){\"use strict\";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"main-content main-content2\"},[s(\"div\",[s(\"div\",{staticClass:\"d-flex mb-2 align-items-center justify-content-between\"},[t._t(\"header\",[s(\"h5\",{staticClass:\"mb-0\"},[t._v(\"Sun Dried\")])]),s(\"div\",{staticClass:\"d-flex\"},[s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"success\"},on:{click:function(e){return t.createSheetYard()}}},[t._v(\" + Create \")]),s(\"router-link\",{attrs:{to:\"/app/production/sun-dried/sun-dried\"}},[s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"}},[t._v(\" Discard \")])],1)],1)],2),s(\"div\",{staticClass:\"my-3 border-top\"})]),s(\"div\",{staticClass:\" pt-1\"},[s(\"div\",{staticClass:\"row mx-0\"},[s(\"div\",{staticClass:\"col-md-9 p-1\"},[s(\"div\",{staticClass:\"card\",staticStyle:{height:\"90px\"}},[s(\"div\",{staticClass:\"p-2 m-0 row\"},[t._m(0),s(\"div\",{staticClass:\"col-md-11\"},[s(\"p\",{staticClass:\"px-1\"},[s(\"b\",[t._v(t._s(t.yard.name)+\" \")]),t.spread_product.id?s(\"span\",[t._v(\">\"+t._s(t.spread_product.stock.lot)+\"/Lot \"+t._s(t.spread_product.stock.name)+\" (\"+t._s(t.dateFormate(t.spread_product.created_on))+\")\")]):t._e()]),t._l(t.yard.yard_spread_products,(function(e){return s(\"button\",{staticClass:\"btn px-3 py-1 mx-1\",class:t.spread_product.id==e.id?\"btn-success\":\"btn-outline-success\",on:{click:function(s){t.spread_product=e,t.getSheets()}}},[t._v(\"#\"+t._s(e.stock.lot)+\"/Lot \"),s(\"b\",[t._v(t._s(e.stock.name))]),t._v(\" (\"+t._s(t.dateFormate(e.created_on))+\")\")])}))],2)])]),s(\"div\",{staticClass:\"row mx-0\",staticStyle:{height:\"70vh\",\"overflow-y\":\"auto\"}},t._l(t.sheets,(function(e){return s(\"div\",{staticClass:\"col-md-3 p-1\"},[s(\"div\",{staticClass:\"card text-center\",staticStyle:{\"min-height\":\"140px\"}},[e.is_active?s(\"div\",{staticClass:\"mb-1\"},[s(\"div\",{staticClass:\"card p-2 m-0 flex-row border\"},[t._m(1,!0),s(\"div\",{staticClass:\"col-md-10\"},[t._v(\" Sheet :\"),s(\"b\",[t._v(t._s(e.sheet_number))]),s(\"div\",[s(\"b-button\",{staticClass:\" px-1 py-0\",staticStyle:{\"font-size\":\"12px\"},attrs:{type:\"button\",variant:\"primary\"},on:{click:function(s){return t.startSheetProcess(\"open_time\",e,{id:null,sheet:e.id,yard_process:t.form_data.id})}}},[t._v(\"Open\")]),s(\"b-button\",{staticClass:\"ml-1 px-1 py-0\",staticStyle:{\"font-size\":\"12px\"},attrs:{type:\"button\",variant:\"danger\"},on:{click:function(s){return t.startSheetProcess(\"stop\",e,{id:null,sheet:e.id,yard_process:t.form_data.id})}}},[t._v(\"Stop\")])],1)])]),s(\"div\",{staticClass:\"px-1\",staticStyle:{height:\"200px\",\"overflow-y\":\"auto\"}},t._l(e.sheet_processes,(function(a){return s(\"div\",{staticClass:\"card mb-1\"},[s(\"div\",{staticClass:\"p-2\"},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-6 text-left\"},[t._v(t._s(t.dateFormate(a.created_on)))]),s(\"div\",{staticClass:\"col-6 text-right\"},[s(\"b\",{staticClass:\"text-success\"},[t._v(t._s(a.status))])])]),s(\"div\",{staticClass:\"row\",staticStyle:{\"font-size\":\"12px\"}},[s(\"div\",{staticClass:\"col-4 text-left\"},[t._v(\" \"+t._s(a.close_time?\"Drying Time\":\"Drying\")+\" \")]),s(\"div\",{staticClass:\"col-8 text-right\"},[a.close_time?s(\"span\",[t._v(\" \"+t._s(t.timeFormate(a.open_time))+\" to \"+t._s(t.timeFormate(a.close_time))+\" \")]):s(\"span\",[a.open_time?s(\"span\",[t._v(\" \"+t._s(t.timeFormate(a.open_time))+\" to \"),s(\"span\",{staticClass:\"badge badge-danger cursor-pointer\",on:{click:function(s){return t.startSheetProcess(\"close_time\",e,a)}}},[t._v(\"Close Sheet\")])]):s(\"span\",[s(\"span\",{staticClass:\"badge badge-success cursor-pointer\",on:{click:function(s){return t.startSheetProcess(\"open_time\",e,a)}}},[t._v(\"Open Sheet\")])])])])])])])})),0)]):s(\"div\",{staticClass:\"mx-3 py-4 px-3\"},[s(\"span\",[t._v(\"Sheet number\")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.sheet_number,expression:\"sheet.sheet_number\"}],staticClass:\"ui-autocomplete-input px-2 w-100\",staticStyle:{height:\"35px\"},attrs:{type:\"text\",placeholder:\"Enter Number\",name:\"sheet_number\"},domProps:{value:e.sheet_number},on:{input:function(s){s.target.composing||t.$set(e,\"sheet_number\",s.target.value)}}}),s(\"b-button\",{staticClass:\"px-3 py-1 mt-2\",attrs:{variant:\"success\"},on:{click:function(s){t.current_sheet=e,t.saveSheet()}}},[t._v(\"Save\")])],1)])])})),0)]),s(\"div\",{staticClass:\"col-md-3 p-1\"},[s(\"div\",{staticClass:\"card\"},[s(\"div\",{staticClass:\"card p-2 m-0 flex-row border\"},[t._m(2),s(\"div\",{staticClass:\"col-md-10 align-self-center\"},[s(\"b\",[t._v(t._s(t.yard.name)+\" \")]),s(\"div\",[s(\"b-button\",{staticClass:\" px-1 py-0\",staticStyle:{\"font-size\":\"12px\"},attrs:{type:\"button\",variant:\"primary\"},on:{click:function(e){return t.startProcess(\"shift\")}}},[t._v(\"New Shift\")])],1)])]),s(\"div\",{staticClass:\"process_kanban\"},[t._l(t.processes,(function(e,a){return s(\"div\",{staticClass:\"m-1\"},[s(\"div\",{staticClass:\"card px-3 py-2 cursor-pointer\",class:a%2==0?\"bg-lightgreen\":\"bg-lightred\"},[s(\"table\",[s(\"tr\",[s(\"th\",{staticClass:\"text-primary\"},[t._v(\"#\"+t._s(e.id))]),s(\"th\",{staticClass:\"text-right\",attrs:{colspan:\"2\"}},[t._v(\" \"+t._s(t.dateFormate(e.created_on))+\" \")])]),s(\"tr\",[s(\"th\",[t._v(\"Status\")]),s(\"th\",{staticClass:\"text-right\",attrs:{colspan:\"2\"}},[s(\"span\",{staticClass:\"text-success\"},[t._v(t._s(e.status))])])]),s(\"tr\",[s(\"th\",[t._v(\" Workers \")]),s(\"th\",[t._v(\" \"+t._s(e.workers.length>0?e.workers.length+\" worker\"+t.checkMult(e.workers.length):\"No workers\")+\" \")]),s(\"th\",{staticClass:\"text-right\"},[e.workers.length>0?s(\"span\",{staticClass:\"badge badge-warning cursor-pointer\",on:{click:function(s){return t.startProcess(\"workers\",e,!0)}}},[t._v(\"View\")]):s(\"span\",{staticClass:\"badge badge-primary cursor-pointer\",on:{click:function(s){return t.startProcess(\"workers\",e)}}},[t._v(\"Add\")])])]),s(\"tr\",[s(\"th\",[t._v(\" Expenses \")]),s(\"th\",[t._v(\" \"+t._s(e.total_expense>0?\"Rs\"+e.total_expense:\"No expenses\")+\" \")]),s(\"th\",{staticClass:\"text-right\"},[e.total_expense>0?s(\"span\",{staticClass:\"badge badge-warning cursor-pointer\",on:{click:function(s){return t.startProcess(\"expenses\",e,!0)}}},[t._v(\"View\")]):s(\"span\",{staticClass:\"badge badge-primary cursor-pointer\",on:{click:function(s){return t.startProcess(\"expenses\",e)}}},[t._v(\"Add\")])])])])]),s(\"hr\",{staticClass:\"my-2\"})])})),s(\"div\",{staticClass:\"text-center\"})],2)])])])]),s(\"div\",[s(\"b-modal\",{attrs:{id:\"start-process\",\"hide-header\":\"\",\"hide-footer\":\"\",\"no-close-on-backdrop\":!0}},[s(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[s(\"h5\",{staticClass:\"mb-0\"},[s(\"span\",{staticClass:\"text-success\"},[t._v(\"Yard\")]),t._v(\" /\"+t._s(t.action))])]),s(\"div\",{staticClass:\"d-flex\"},[t.is_view?t._e():s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"success\"},on:{click:function(e){return t.dataForm()}}},[t._v(\"Save\")]),s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"start-process\")}}},[t._v(\"Close\")])],1)],2),s(\"div\",{staticClass:\" my-3 border-top\"}),s(\"form\",{ref:\"dataForm\",staticClass:\"start-product-body\",on:{submit:function(e){return e.preventDefault(),t.dataForm()}}},[s(\"fieldset\",{attrs:{disabled:t.is_view}},[s(\"b-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"shift\"==t.action,expression:\"action=='shift'\"}],staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"div\",{staticClass:\"user-info pt-2 mb-5\"},[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"90px\"}},[t._v(\" Date : \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.date,expression:\"form_data.date\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Date\",type:\"date\",autocomplete:\"off\",name:\"date\",required:\"\"},domProps:{value:t.form_data.date},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"date\",e.target.value)}}})]),s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.yard.id,expression:\"yard.id\"}],attrs:{type:\"hidden\",name:\"yard\"},domProps:{value:t.yard.id},on:{input:function(e){e.target.composing||t.$set(t.yard,\"id\",e.target.value)}}})])])])])]),s(\"b-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"workers\"==t.action,expression:\"action=='workers'\"}],staticClass:\"card-scroll my-3\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"h5\",[t._v(\"Workers\")]),s(\"div\",[s(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"div\",{staticClass:\"o_thread_search_input mt-1\"},[s(\"span\",{staticStyle:{width:\"130px\"}},[t._v(\" Select Labours: \")]),s(\"div\",{staticClass:\"mx-2 workers_box\"},t._l(t.workers,(function(e){return\"Wage\"==e.work_type?s(\"label\",{staticClass:\"workers_label\",attrs:{for:\"worker\"+e.id}},[s(\"b-form-checkbox\",{attrs:{name:\"workers\",id:\"worker\"+e.id,value:e.id},on:{input:function(e){t.form_data.total_workers=t.form_data.workers.length}},model:{value:t.form_data.workers,callback:function(e){t.$set(t.form_data,\"workers\",e)},expression:\"form_data.workers\"}},[s(\"b\",[t._v(\"#\"+t._s(e.id)+\"/\"+t._s(e.name))])])],1):t._e()})),0)]),s(\"div\",[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"130px\"}},[t._v(\" Number of Labours : \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.total_workers,expression:\"form_data.total_workers\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Labours\",type:\"number\",autocomplete:\"off\",name:\"total_workers\",min:\"0\"},domProps:{value:t.form_data.total_workers},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"total_workers\",e.target.value)}}}),s(\"input\",{attrs:{type:\"hidden\",name:\"work_type\",value:\"wages\"}})])])])])])],1)])])]),s(\"b-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"expenses\"==t.action,expression:\"action=='expenses'\"}],staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"div\",{staticClass:\"user-info pt-2 mb-5\"},[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"150px\"}},[t._v(\" Security charge (Rs): \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.security_charge,expression:\"form_data.security_charge\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Security charge\",type:\"number\",autocomplete:\"off\",name:\"security_charge\",required:\"\"},domProps:{value:t.form_data.security_charge},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"security_charge\",e.target.value)}}})]),s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"150px\"}},[t._v(\" Other expenses (Rs): \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.other_expenses,expression:\"form_data.other_expenses\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Security expenses\",type:\"number\",autocomplete:\"off\",name:\"other_expenses\",required:\"\"},domProps:{value:t.form_data.other_expenses},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"other_expenses\",e.target.value)}}})])])])])])],1)])]),s(\"b-modal\",{attrs:{id:\"create-sheet\",\"hide-header\":\"\",\"hide-footer\":\"\",\"no-close-on-backdrop\":!0}},[s(\"div\",[s(\"div\",{staticClass:\"main-content create-main\"},[s(\"form\",{ref:\"yardProductForm\",on:{submit:function(e){return e.preventDefault(),t.yardProductForm()}}},[s(\"div\",[s(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[s(\"h5\",{staticClass:\"mb-0\"},[s(\"span\",{staticClass:\"text-success\"},[t._v(\"Yard\")]),t._v(\" / Select Product\")])]),s(\"div\",{staticClass:\"d-flex\"},[t.selecte_yard_product_id?s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"primary\"},on:{click:function(e){t.selecte_yard_product_id=null}}},[t._v(\"Change product \")]):t._e(),t.selecte_yard_product_id?s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"submit\",variant:\"success\"}},[t._v(\"Save \")]):t._e(),s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"create-sheet\")}}},[t._v(\"Discard \")])],1)],2),s(\"div\",{staticClass:\" my-3 border-top\"})]),s(\"b-row\",{staticClass:\"main-scroll\"},[s(\"b-col\",{staticClass:\"my-3\",attrs:{lg:\"12\",xl:\"12\"}},[s(\"div\",[t.selecte_yard_product_id?s(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"120px\"}},[t._v(\"No Sheets : \")]),s(\"input\",{staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"No Sheets\",type:\"text\",autocomplete:\"off\",name:\"number_of_sheets\",required:\"\"}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.selecte_yard_product_id,expression:\"selecte_yard_product_id\"}],attrs:{type:\"hidden\",name:\"product\"},domProps:{value:t.selecte_yard_product_id},on:{input:function(e){e.target.composing||(t.selecte_yard_product_id=e.target.value)}}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.yard.id,expression:\"yard.id\"}],attrs:{type:\"hidden\",name:\"yard\"},domProps:{value:t.yard.id},on:{input:function(e){e.target.composing||t.$set(t.yard,\"id\",e.target.value)}}}),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.id,expression:\"form_data.id\"}],attrs:{type:\"hidden\",name:\"yard_process\"},domProps:{value:t.form_data.id},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"id\",e.target.value)}}})])]):s(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"table\",{staticClass:\"table\"},[s(\"tr\",[s(\"th\",[t._v(\"Product\")]),s(\"th\",[t._v(\"Quantity\")]),s(\"th\",[t._v(\"Lot\")]),s(\"th\",[t._v(\"Action\")])]),t._l(t.yard_products,(function(e){return s(\"tr\",[s(\"td\",[t._v(t._s(e.name))]),s(\"td\",[t._v(t._s(e.quantity)+\"KG\")]),s(\"td\",[t._v(\"#\"+t._s(e.stock.lot)+\"/Lot\")]),s(\"td\",[t.selecte_yard_product_id==e.id?s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"danger\"},on:{click:function(e){t.selecte_yard_product_id=null}}},[t._v(\" Remove \")]):s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{variant:\"primary\"},on:{click:function(s){t.selecte_yard_product_id=e.id}}},[t._v(\" Select \")])],1)])}))],2)])],1)])],1)],1)])])]),s(\"b-modal\",{attrs:{id:\"sheet-process\",\"hide-header\":\"\",\"hide-footer\":\"\",\"no-close-on-backdrop\":!0}},[s(\"div\",{staticClass:\"d-flex mb-2 align-items-center  justify-content-between\"},[t._t(\"header\",[s(\"h5\",{staticClass:\"mb-0\"},[s(\"span\",{staticClass:\"text-success\"},[t._v(\"Sheet\")]),t._v(\" /\"+t._s(t.slugToWord(t.action)))])]),s(\"div\",{staticClass:\"d-flex\"},[t.is_view?t._e():s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"success\"},on:{click:function(e){return t.dataSheetProcessForm()}}},[t._v(\"Save\")]),s(\"b-button\",{staticClass:\" px-3 py-1  d-sm-block mx-1\",attrs:{type:\"button\",variant:\"danger\"},on:{click:function(e){return t.$bvModal.hide(\"sheet-process\")}}},[t._v(\"Close\")])],1)],2),s(\"div\",{staticClass:\" my-3 border-top\"}),s(\"form\",{ref:\"sheetProcessForm\",staticClass:\"start-product-body\",on:{submit:function(e){return e.preventDefault(),t.sheetProcessForm()}}},[s(\"fieldset\",{attrs:{disabled:t.is_view}},[\"open_time\"==t.action||\"close_time\"==t.action?s(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"div\",{staticClass:\"user-info pt-2 mb-5\"},[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"open_time\"==t.action,expression:\"action=='open_time'\"}],staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"150px\"}},[t._v(\" Open Time: \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.sheet_process.open_time,expression:\"sheet_process.open_time\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Open Time\",type:\"time\",autocomplete:\"off\",name:\"open_time\",required:\"\"},domProps:{value:t.sheet_process.open_time},on:{input:function(e){e.target.composing||t.$set(t.sheet_process,\"open_time\",e.target.value)}}})]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"close_time\"==t.action,expression:\"action=='close_time'\"}],staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"150px\"}},[t._v(\" Close Time: \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.sheet_process.close_time,expression:\"sheet_process.close_time\"}],staticClass:\"ui-autocomplete-input\",attrs:{placeholder:\"Close Time\",type:\"time\",autocomplete:\"off\",name:\"close_time\"},domProps:{value:t.sheet_process.close_time},on:{input:function(e){e.target.composing||t.$set(t.sheet_process,\"close_time\",e.target.value)}}})]),s(\"div\",[t.sheet_process.close_time?s(\"input\",{attrs:{type:\"hidden\",name:\"status\",value:\"Closed\"}}):t.sheet_process.open_time?s(\"input\",{attrs:{type:\"hidden\",name:\"status\",value:\"Spread\"}}):s(\"input\",{attrs:{type:\"hidden\",name:\"status\",value:\"Open\"}})])])])])]):t._e(),\"stop\"==t.action?s(\"b-card\",{staticClass:\"card-scroll\",attrs:{\"header-bg-variant\":\"transparent\"}},[s(\"div\",{staticClass:\"row\"},[s(\"div\",{staticClass:\"col-md-12\"},[s(\"div\",{staticClass:\"user-info py-2\"},[s(\"div\",{staticClass:\"o_thread_search_input\"},[s(\"span\",{staticStyle:{width:\"150px\"}},[t._v(\" Total Weight: \")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.current_sheet.quantity,expression:\"current_sheet.quantity\"}],staticClass:\"ui-autocomplete-input append_btn_input_right\",attrs:{placeholder:\"Total Weight\",type:\"number\",autocomplete:\"off\",name:\"quantity\",required:\"\"},domProps:{value:t.current_sheet.quantity},on:{input:function(e){e.target.composing||t.$set(t.current_sheet,\"quantity\",e.target.value)}}}),s(\"button\",{staticClass:\"btn btn-white append_btn_right\",attrs:{type:\"button\"}},[t._v(\"KG\")])])])])])]):t._e()],1)])])],1)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"card col-md-1 align-self-center p-1\"},[s(\"img\",{staticStyle:{\"vertical-align\":\"top\"},attrs:{src:\"/img/website.png\"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"card col-md-2 align-self-center p-0\"},[s(\"img\",{staticStyle:{\"vertical-align\":\"top\"},attrs:{src:\"/img/website.png\"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"card col-md-2 align-self-center p-1\"},[s(\"img\",{staticStyle:{\"vertical-align\":\"top\"},attrs:{src:\"/img/website.png\"}})])}],o=(s(\"4160\"),s(\"d3b7\"),s(\"159b\"),s(\"4dbf\")),i={metaInfo:{title:\"FPO - ICS\"},components:{ProductFields:o[\"a\"]},data:function(){return{form_data:{date:this.currentDate(),id:null,workers:[],status:\"\"},is_view:!1,yard:{id:null,yard_spread_products:[]},action:\"create\",processes:[],workers:[],yard_products:[],spread_product:{id:null},sheets:[],current_sheet:{},sheet_process:{},selecte_yard_product_id:null}},mounted:function(){this.yard.id=this.$route.params.id,this.getForm(),this.getWorkers()},methods:{getForm:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yards/\"+this.yard.id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.yard=e,t.processes=e.processes,t.processes.length>0&&(t.form_data=t.processes[0]),t.yard.yard_spread_products.length>0&&(t.spread_product=t.yard.yard_spread_products[0],t.getSheets())}))},startProcess:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:null,date:this.currentDate(),workers:[]},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.action=t,this.form_data=e,this.is_view=s,this.$bvModal.show(\"start-process\")},createSheetYard:function(){this.processes.length>0?(this.getYardProducts(),this.$bvModal.show(\"create-sheet\")):this.showAlert(\"Please create a process!\")},yardProductForm:function(){var t=this;if(\"supervisor\"!=this.$root.user_type)return this.showAlert(\"You cannot add!\"),!1;if(this.lock_btn)return!1;this.lock_btn=!0;var e=new FormData(this.$refs[\"yardProductForm\"]);e.append(\"supervisor\",this.employeeId);var s=new Headers;s.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_spread_products/\",{method:\"POST\",body:e,headers:s}).then((function(t){return t.json()})).then((function(e){t.lock_btn=!1,e.id>0?(t.spread_product=e,t.yardAddSheets()):t.showAlert(\"Something Wrong!\")}))},yardAddSheets:function(){var t=this,e=new FormData;if(e.append(\"yard\",this.yard.id),e.append(\"yard_spread_product\",this.spread_product.id),this.lock_btn)return!1;this.lock_btn=!0;var s=new Headers;s.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_sheets/\",{method:\"POST\",body:e,headers:s}).then((function(t){return t.json()})).then((function(e){t.lock_btn=!1,e.id>0?(t.$bvModal.hide(\"create-sheet\"),t.getForm(),t.getSheets(),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},saveSheet:function(){var t=this;this.current_sheet.sheet_number||this.showAlert(\"Please enter sheet number!\");var e=new FormData;if(e.append(\"yard\",this.current_sheet.yard),e.append(\"yard_spread_product\",this.current_sheet.yard_spread_product),e.append(\"sheet_number\",this.current_sheet.sheet_number),e.append(\"is_active\",1),\"Completed\"==this.current_sheet.status?(e.append(\"status\",\"Completed\"),e.append(\"quantity\",this.current_sheet.quantity)):e.append(\"status\",\"Open\"),this.lock_btn)return!1;this.lock_btn=!0;var s=new Headers;s.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_sheets/\"+this.current_sheet.id+\"/\",{method:\"PUT\",body:e,headers:s}).then((function(t){return t.json()})).then((function(e){t.lock_btn=!1,e.id>0?(t.getSheets(),t.showAlert(\"Saved Successfully!\"),t.$bvModal.hide(\"sheet-process\")):t.showAlert(\"Something Wrong!\")}))},getYardProducts:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/transfer_yard_products/?yard=\"+this.yard.id,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.yard_products=e}))},getSheets:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_sheets/?yard_spread_product=\"+this.spread_product.id,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.current_sheet={},t.sheets=e}))},startSheetProcess:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:null},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.action=t,this.current_sheet=e,this.sheet_process=s,this.is_view=a;var r=\"\";if(e.sheet_processes.forEach((function(t){t.close_time||s.id||(r=\"Please close your sheet!\")})),r)return this.showAlert(r),!1;this.$bvModal.show(\"sheet-process\")},dataSheetProcessForm:function(){\"stop\"==this.action?(this.current_sheet.status=\"Completed\",this.saveSheet()):this.sheetProcessForm()},sheetProcessForm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"POST\";if(\"supervisor\"!=this.$root.user_type)return this.showAlert(\"You cannot add!\"),!1;var s=\"\";this.sheet_process.id&&(e=\"PUT\",s=this.sheet_process.id+\"/\");var a=new FormData(this.$refs[\"sheetProcessForm\"]);if(a.append(\"supervisor\",this.employeeId),a.append(\"yard_process\",this.sheet_process.yard_process),a.append(\"sheet\",this.sheet_process.sheet),this.lock_btn)return!1;this.lock_btn=!0;var r=new Headers;r.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_process_sheet/\"+s,{method:e,body:a,headers:r}).then((function(t){return t.json()})).then((function(e){t.lock_btn=!1,e.id>0?(t.sheet_process.id=e.id,t.$bvModal.hide(\"sheet-process\"),t.getSheets(),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},dataForm:function(){this.form_data.status=\"Starting\",(this.form_data.workers.length>0||this.form_data.total_expense>0)&&(this.form_data.status=\"Completed\"),this.yardProcessForm()},yardProcessForm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"POST\";if(\"supervisor\"!=this.$root.user_type)return this.showAlert(\"You cannot add!\"),!1;var s=\"\";this.form_data.id&&(e=\"PUT\",s=this.form_data.id+\"/\");var a=new FormData(this.$refs[\"dataForm\"]);if(a.append(\"supervisor\",this.employeeId),a.append(\"status\",this.form_data.status),a.append(\"yard_process\",this.form_data.id),this.lock_btn)return!1;this.lock_btn=!0;var r=new Headers;r.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/production/yard_process/\"+s,{method:e,body:a,headers:r}).then((function(t){return t.json()})).then((function(e){t.lock_btn=!1,e.id>0?(t.form_data.id=e.id,t.$bvModal.hide(\"start-process\"),t.getForm(),t.showAlert(\"Saved Successfully!\")):t.showAlert(\"Something Wrong!\")}))},getWorkers:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Token \"+this.$root.token),fetch(this.api_url+\"/employee/workers/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.workers=e}))}}},n=i,c=(s(\"ca36\"),s(\"2877\")),d=Object(c[\"a\"])(n,a,r,!1,null,null,null);e[\"default\"]=d.exports},ca0f:function(t,e,s){},ca36:function(t,e,s){\"use strict\";var a=s(\"ca0f\"),r=s.n(a);r.a}}]);","extractedComments":[]}