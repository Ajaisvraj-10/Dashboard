{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-39224a87\"],{\"26db\":function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"main-content\"},[a(\"main\",[a(\"div\",{staticClass:\"header-bio\"},[a(\"div\",{staticClass:\"container d-flex align-items-center px-4 \"},[a(\"img\",{attrs:{src:\"/images/left-arrow.png\",width:\"10\"},on:{click:function(e){t.input_col>2?t.colBack():t.$bvModal.show(\"closePopup\")}}}),a(\"h4\",{staticClass:\"font-weight-700 px-3\"},[t._v(\"New Inspection\")])])]),t.not_start?a(\"div\",{},[a(\"div\",{staticClass:\"loading\",staticStyle:{\"z-index\":\"999999999999999\"}})]):t._e(),a(\"form\",{ref:\"inspectionForm\",style:t.not_start?\"opacity:0.5\":\"\",on:{submit:function(e){return e.preventDefault(),t.inspectionForm()}}},[a(\"div\",{staticClass:\"body-bio2 px-4 py-2 create\",staticStyle:{height:\"calc(100vh - 135px)\",overflow:\"auto\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.$route.query.farmer,expression:\"!$route.query.farmer\"}],staticClass:\"mt-3 row \"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.input_col,expression:\"input_col==2\"}],staticClass:\"col-12\"},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"ICS\")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.icss,(function(e){return a(\"button\",{staticClass:\"btn\",class:t.form_data.ics==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.form_data.ics=e.id,t.change_select(\"ics\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.type,expression:\"form_data.type\"}],attrs:{type:\"hidden\",name:\"type\",required:\"\"},domProps:{value:t.form_data.type},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"type\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.ics,expression:\"form_data.ics\"}],class:\"check_field_2\",attrs:{type:\"hidden\",name:\"ics\",required:\"\"},domProps:{value:t.form_data.ics},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"ics\",e.target.value)}}})],2)]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:3==t.input_col,expression:\"input_col==3\"}],staticClass:\"col-12\"},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"VFC\")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.vfcs,(function(e){return a(\"button\",{staticClass:\"btn\",class:t.form_data.vfc==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.form_data.vfc=e.id,t.change_select(\"vfc\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.vfc,expression:\"form_data.vfc\"}],class:\"check_field_3\",attrs:{type:\"hidden\",name:\"vfc\",required:\"\"},domProps:{value:t.form_data.vfc},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"vfc\",e.target.value)}}})],2)])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.$route.query.farmer&&4==t.input_col,expression:\"!$route.query.farmer && input_col==4\"}],staticClass:\"row \"},[a(\"div\",{staticClass:\"col-12\"},[a(\"h4\",{staticClass:\"text-light pr-4 pb-2\"},[t._v(\"Farmer\")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.farmers,(function(e){return a(\"button\",{staticClass:\"btn\",class:t.form_data.farmer==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.form_data.farmer=e.id,t.getFarmer(),t.nextCol()}}},[t._v(t._s(e.name)+\" - \"+t._s(e.farmer_code))])})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.farmer,expression:\"form_data.farmer\"}],class:\"check_field_4\",attrs:{type:\"hidden\",name:\"farmer\",required:\"\"},domProps:{value:t.form_data.farmer},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"farmer\",e.target.value)}}})],2)])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:5==t.input_col,expression:\"input_col==5\"}],staticClass:\"row\"},[a(\"div\",{staticClass:\"col-12\"},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Inspector\")]),a(\"div\",{staticClass:\"inspection-btn\"},[t._l(t.inspectors,(function(e){return a(\"button\",{staticClass:\"btn\",class:t.form_data.internal_inspector==e.id?\"active-btn\":\"\",attrs:{type:\"button\"},on:{click:function(a){t.form_data.internal_inspector=e.id,t.change_select(\"inspector\"),t.nextCol()}}},[t._v(t._s(e.name)+\" \")])})),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.internal_inspector,expression:\"form_data.internal_inspector\"}],class:\"check_field_5\",attrs:{type:\"hidden\",name:\"internal_inspector\",required:\"\"},domProps:{value:t.form_data.internal_inspector},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"internal_inspector\",e.target.value)}}})],2)])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:6==t.input_col,expression:\"input_col==6\"}],staticClass:\"row \"},[a(\"div\",{staticClass:\"col-12\"},[a(\"h4\",{staticClass:\"text-light pr-4 py-2\"},[t._v(\"Inspection\")]),a(\"div\",{staticClass:\"card p-0\"},[a(\"div\",{staticClass:\"p-4\"},[a(\"div\",{staticClass:\"row mx-0  pb-3\"},[a(\"h2\",{staticClass:\"text-14  col-5 p-0 text-light\"},[t._v(\"Farmer:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.name))])]),a(\"div\",{staticClass:\"row mx-0  pb-3\"},[a(\"h2\",{staticClass:\"text-14   col-5 p-0 text-light\"},[t._v(\"Farmer code:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.farmer_code))])]),a(\"div\",{staticClass:\"row mx-0  pb-3\"},[a(\"h2\",{staticClass:\"text-14 col-5 p-0  text-light\"},[t._v(\"ICS:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.ics_name))])]),a(\"div\",{staticClass:\"row mx-0  pb-3\"},[a(\"h2\",{staticClass:\"text-14 col-5 p-0  text-light\"},[t._v(\"VFC:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-700 \"},[t._v(t._s(t.form_data.farmer_detail.vfc_name))])]),a(\"div\",{staticClass:\"row mx-0 pb-3\"},[a(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Status:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.form_data.farmer_detail.status))])]),t.form_data.date_of_previous_inspection?a(\"div\",{staticClass:\"row mx-0 pb-3\"},[a(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Date of previous inspection:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.dateFormate(t.form_data.date_of_previous_inspection)))])]):t._e(),a(\"div\",{staticClass:\"row mx-0 pb-3\"},[a(\"h2\",{staticClass:\"text-14 px-0  col-5 text-light\"},[t._v(\"Date of inspection:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.dateFormate(t.form_data.date_of_inspection)))])]),a(\"div\",{staticClass:\"row mx-0 pb-3\"},[a(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Inspector:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.form_data.inspector_detail.name))])]),a(\"div\",{staticClass:\"row mx-0 pb-3\"},[a(\"h2\",{staticClass:\"text-14  px-0 col-5 text-light\"},[t._v(\"Inspector Phone:\")]),a(\"h2\",{staticClass:\"text-14 col-7 font-weight-500 \"},[t._v(t._s(t.form_data.inspector_detail.phone))])])])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}]},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.inspector_detail.phone,expression:\"form_data.inspector_detail.phone\"}],staticClass:\"form-control\",class:\"check_field_6\",attrs:{type:\"text\",placeholder:\"Inspector phone number\",readonly:\"\"},domProps:{value:t.form_data.inspector_detail.phone},on:{input:function(e){e.target.composing||t.$set(t.form_data.inspector_detail,\"phone\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.date_of_inspection,expression:\"form_data.date_of_inspection\"}],staticClass:\"form-control\",class:\"check_field_6\",attrs:{type:\"date\",name:\"date_of_inspection\",required:\"\"},domProps:{value:t.form_data.date_of_inspection},on:{input:function(e){e.target.composing||t.$set(t.form_data,\"date_of_inspection\",e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form_data.is_approved,expression:\"form_data.is_approved\"}],staticClass:\"form-control\",attrs:{type:\"checkbox\",name:\"is_approved\"},domProps:{checked:Array.isArray(t.form_data.is_approved)?t._i(t.form_data.is_approved,null)>-1:t.form_data.is_approved},on:{change:function(e){var a=t.form_data.is_approved,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=null,n=t._i(a,o);s.checked?n<0&&t.$set(t.form_data,\"is_approved\",a.concat([o])):n>-1&&t.$set(t.form_data,\"is_approved\",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.form_data,\"is_approved\",i)}}})])])])]),a(\"div\",{staticClass:\" my-1 footer border-top\"},[a(\"HomeBtn\"),0==t.not_start?a(\"div\",{staticClass:\"px-4\"},[6!=t.input_col?a(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\",gap:\"10px\"}},[a(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.nextCol()}}},[t._v(\"Next \"),a(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})])]):a(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-end\",gap:\"10px\"}},[t.id?a(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.nextCol(\"land\")}}},[t._v(\"Next \"),a(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})]):a(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"submit\"}},[t._v(\"Save & Next \"),a(\"i\",{staticClass:\"fa fa-angle-right\",staticStyle:{color:\"white\"}})])])]):t._e()],1),a(\"b-modal\",{attrs:{id:\"confirmPopup\",title:\"Alert\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body p-0 m-0\"},[a(\"div\",{staticClass:\"row mx-0 mb-3\"},[a(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure want to this action? \")])])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.inspectionForm(\"yes\")}}},[t._v(\"Yes\")]):t._e(),a(\"button\",{staticClass:\"btn btn-outline-secondary px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"confirmPopup\")}}},[t._v(\"No\")])])]),a(\"b-modal\",{attrs:{id:\"closePopup\",title:\"Alert\",\"hide-footer\":\"\"}},[a(\"div\",{staticClass:\"modal-body p-0 m-0\"},[a(\"div\",{staticClass:\"row mx-0 mb-3\"},[a(\"div\",{staticClass:\"col-md-12\"},[t._v(\" Are you sure you want to close this section? \")])])]),a(\"div\",{staticClass:\"modal-footer\"},[0==t.not_start?a(\"button\",{staticClass:\"btn btn-success px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.goBack()}}},[t._v(\"Yes\")]):t._e(),a(\"button\",{staticClass:\"btn btn-outline-secondary px-4\",attrs:{type:\"button\"},on:{click:function(e){return t.$bvModal.hide(\"closePopup\")}}},[t._v(\"No\")])])])],1)])])},i=[],o=(a(\"4160\"),a(\"d3b7\"),a(\"159b\"),{metaInfo:{title:\"Home\"},data:function(){return{form_data:{year:2022,type:this.$root.userInfo.fpo,ics:null,vfc:null,farmer:null,is_approved:!1,farmer_detail:{lands:{created_on:null}},internal_inspector:null,inspector_detail:{phone:\"\"},date_of_inspection:\"\"},input_col:2,types:[],icss:[],vfcs:[],farmers:[],inspectors:[],id:this.$route.params.id,not_start:!0,lock_btn:!1}},mounted:function(){this.year=this.this_year,this.form_data.date_of_inspection=this.currentDate(),this.$route.query.farmer&&(this.input_col=5,this.form_data.farmer=this.$route.query.farmer,this.getFarmer()),\"inspector\"==this.$root.user_type&&this.setInspector(),this.getInspector(),this.getFamrerTypes(),\"aeo\"==this.$root.user_type&&(this.form_data.is_approved=!0),this.id&&this.getInspection()},methods:{nextPage:function(t){this.$router.push(\"/inspection-\"+t+\"/\"+this.id)},colBack:function(){this.input_col--,4==this.input_col&&this.$route.query.farmer&&(this.input_col=2),5==this.input_col&&\"inspector\"==this.$root.user_type&&this.$route.query.farmer?this.input_col=6:5==this.input_col&&\"inspector\"==this.$root.user_type&&(this.input_col=4),3==this.input_col&&\"inspector\"==this.$root.user_type&&(this.input_col=4)},nextCol:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",e=this;return!this.lock_btn&&(4==this.input_col&&\"inspector\"==this.$root.user_type?(this.input_col=6,!1):(this.lock_btn=!0,void setTimeout((function(){e.lock_btn=!1;for(var a=document.getElementsByClassName(\"check_field_\"+e.input_col),s=!0,i=0;i<a.length;i++)a[i].style.border=\"none\",\"\"==a[i].value&&(a[i].style.border=\"1px red solid\",s=!1);if(!s)return e.showAlert(\"Please select a coloumn!\"),!1;e.input_col++,3==e.input_col&&e.$route.query.farmer&&(e.input_col=5),t&&e.nextPage(t)}),300)))},getFamrerTypes:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/get_farmer/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){if(t.types=e,t.not_start=!1,t.change_select(\"type\"),t.id){var a=t;setTimeout((function(){a.change_select(\"ics\"),a.change_select(\"vfc\"),a.change_select(\"farmer\"),a.change_select(\"inspector\")}),500)}}))},getFarmers:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/get_farmer/?vfc=\"+this.form_data.vfc,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.farmers=e,t.not_start=!1}))},setInspector:function(){var t=this;if(this.form_data.internal_inspector=this.$root.inspectorInfo.id,this.form_data.inspector_detail=this.$root.inspectorInfo,this.$route.query.farmer)this.input_col=6;else{this.input_col=4;var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections_filter/?inspector=\"+this.$root.inspectorInfo.id,{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.farmers=e,t.not_start=!1}))}},getFarmer:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/farmers/\"+this.form_data.farmer+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){e.status||(e.status=\"NEW\"),t.form_data.farmer_detail=e,t.form_data.type=e.fpo,t.form_data.ics=e.ics,t.form_data.vfc=e.vfc;var a=t;setTimeout((function(){a.change_select(\"type\"),a.change_select(\"ics\"),a.change_select(\"vfc\"),a.change_select(\"farmer\")}),500)}))},getInspector:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/fpo/internal_inspector/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.inspectors=e}))},getInspection:function(){var t=this,e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token),fetch(this.api_url+\"/employee/inspections/\"+this.id+\"/\",{method:\"get\",headers:e}).then((function(t){return t.json()})).then((function(e){t.form_data=e}))},inspectionForm:function(){var t=this;if(!this.form_data.internal_inspector)return this.showAlert(\"Please select an inspector!\"),!1;this.not_start=!0;var e=new Headers;e.append(\"Authorization\",\"Bearer \"+this.$root.token);var a=new FormData(this.$refs[\"inspectionForm\"]),s=\"/employee/inspections/\",i=\"post\";this.id&&(s=\"/employee/inspections/\"+this.id+\"/\",i=\"put\"),fetch(this.api_url+s,{method:i,headers:e,body:a}).then((function(t){return t.json()})).then((function(e){t.form_data=e,t.id=e.id,t.nextPage(\"land\")}))},change_select:function(t){var e=\"\",a=this;\"type\"==t?(e=this.form_data.type,this.types.forEach((function(t){t.id==e&&(a.icss=t.ics)}))):\"ics\"==t?(e=this.form_data.ics,this.icss.forEach((function(t){t.id==e&&(a.vfcs=t.vfc)}))):\"vfc\"==t?(e=this.form_data.vfc,this.getFarmers()):\"inspector\"==t&&(e=this.form_data.internal_inspector,this.inspectors.forEach((function(t){t.id==e&&(a.form_data.inspector_detail=t)})))}}}),n=o,r=(a(\"a5c5\"),a(\"2877\")),c=Object(r[\"a\"])(n,s,i,!1,null,\"6212d8eb\",null);e[\"default\"]=c.exports},\"70f3\":function(t,e,a){},a5c5:function(t,e,a){\"use strict\";var s=a(\"70f3\"),i=a.n(s);i.a}}]);","extractedComments":[]}